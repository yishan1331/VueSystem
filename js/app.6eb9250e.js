(function(t){function e(e){for(var o,i,r=e[0],l=e[1],c=e[2],d=0,u=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);m&&m(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var m=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0bea":function(t,e,a){"use strict";var o=a("5cf3"),n=a.n(o);n.a},"0de6":function(t,e,a){},1:function(t,e){},"10dd":function(t,e,a){"use strict";var o=a("36ec"),n=a.n(o);n.a},1463:function(t,e,a){},"14bb":function(t,e,a){},"192a":function(t,e,a){},"1be0":function(t,e,a){"use strict";var o=a("14bb"),n=a.n(o);n.a},2:function(t,e){},"2fe5":function(t,e,a){"use strict";var o=a("f4eb"),n=a.n(o);n.a},"32a3":function(t,e,a){},"36ec":function(t,e,a){},"3d80":function(t,e,a){"use strict";var o=a("43c8"),n=a.n(o);n.a},"3fdb":function(t,e,a){"use strict";var o=a("1463"),n=a.n(o);n.a},"43c8":function(t,e,a){},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=s,t.exports=n,n.id="4678"},"4c71":function(t,e,a){},"4fce":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o,n,s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],l=(a("4de4"),a("4160"),a("caad"),a("d81d"),a("4fad"),a("b64b"),a("159b"),a("5530")),c=(a("1157"),a("4989"),a("2f62")),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"index"},[o("b-navbar",{staticStyle:{"background-color":"#7c93b6"},attrs:{toggleable:"lg",type:"dark",id:"navbar",sticky:""}},[o("b-navbar-brand",[o("router-link",{attrs:{to:"/index/bulletin/board"}},[o("img",{staticClass:"navbar-brand",attrs:{src:a("9696"),width:"170px"}})])],1),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",t._l(Object.keys(t.navbarItems),(function(e,a){return o("div",{key:a},[t.pageAccess.hasOwnProperty(e)&&t.pageAccess[e].authority?o("b-nav-item-dropdown",{staticStyle:{float:"left !important","font-size":"20px"},attrs:{text:t.navbarItems[e].title,right:""}},t._l(t.pageAccess[e].children,(function(a,n,s){return o("div",{key:s},[t.pageAccess[e].children.hasOwnProperty(n)&&t.pageAccess[e].children[n].authority?o("b-dropdown-item",{attrs:{to:"/index/"+e+"/"+n}},[t._v(" "+t._s(t.navbarItems[e].children[n].title)+" ")]):t._e()],1)})),0):t._e()],1)})),0),o("b-navbar-nav",{staticClass:"ml-auto"},[null===t.loginData.username?[o("b-nav-text",{staticClass:"account"},[t._v("HI, xxxx")])]:[o("b-nav-text",{staticClass:"account"},[t._v("HI, "+t._s(t.loginData.username))])],o("b-nav-item",{on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("登出")])],2)],1)],1),o("b-container",[o("router-view",{staticStyle:{"margin-top":"10px"}})],1),o("alertModal")],1)},d=[],u=(a("a9e3"),a("ade3")),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("b-modal",{attrs:{centered:t.commonModalConfig.centered,"no-close-on-backdrop":"","no-close-on-esc":"",scrollable:t.commonModalConfig.scrollable,"hide-footer":t.commonModalConfig.hideModalFooter,size:t.commonModalConfig.size,"hide-header":t.commonModalConfig.hideModalHeader,"hide-header-close":t.commonModalConfig.hideModalHeaderClose,"modal-class":{"modal-fullscreen":t.commonModalConfig.modalClassFull}},scopedSlots:t._u([{key:"modal-header",fn:function(){return[t._t("modalheader")]},proxy:!0},{key:"default",fn:function(){return[t._t("default")]},proxy:!0},{key:"modal-footer",fn:function(){return[t._t("modalfooter")]},proxy:!0}],null,!0),model:{value:t.commonModalShow,callback:function(e){t.commonModalShow=e},expression:"commonModalShow"}})],1)},f=[],h={name:"modal",data:function(){return{}},computed:Object(l["a"])({},Object(c["c"])({commonModalShow:"usemodal/get_commonModalShow",commonModalConfig:"usemodal/get_commonModalConfig"}))},g=h,b=(a("c6c3"),a("2877")),v=Object(b["a"])(g,p,f,!1,null,"84be9258",null),y=v.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alertModal"},[a("b-modal",{attrs:{"hide-header":"","hide-footer":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",id:"alertModal"},scopedSlots:t._u([{key:"default",fn:function(){return[t.alertProgressModalShow?[a("h4",[t._v("進度：")]),a("b-progress",{attrs:{max:100,variant:"success",height:"1.5rem","show-progress":"",animated:""}},[a("b-progress-bar",{attrs:{value:t.alertProgressValue}},[a("p",{staticStyle:{margin:"0","font-size":"1.2rem","font-weight":"bolder"}},[t._v(" "+t._s(t.alertProgressValue)+"% ")])])],1)]:["string"===typeof t.alertMsg?a("div",{staticClass:"text-center"},["請稍候...."===t.alertMsg?a("b-spinner",{staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{label:"Spinner",type:"grow"}}):t._e(),a("h4",{class:{"inline-block":"請稍候...."===t.alertMsg}},[t._v(" "+t._s(t.alertMsg)+" ")])],1):t._l(t.alertMsg,(function(e,o){return a("h4",{key:o,staticStyle:{"text-align":"center !important"}},[t._v(" "+t._s(e)+" ")])}))]]},proxy:!0}]),model:{value:t.alertModalShow,callback:function(e){t.alertModalShow=e},expression:"alertModalShow"}}),a("b-modal",{attrs:{"hide-header":"","hide-footer":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",id:"setTimeOutAlertModal"},scopedSlots:t._u([{key:"default",fn:function(){return["string"===typeof t.setTimeOutAlertMsg?a("h4",{staticStyle:{"text-align":"center !important"}},[t._v(" "+t._s(t.setTimeOutAlertMsg)+" ")]):t._l(t.setTimeOutAlertMsg,(function(e,o){return a("h4",{key:o,staticStyle:{"text-align":"center !important"}},[t._v(" "+t._s(e)+" ")])}))]},proxy:!0}]),model:{value:t.setTimeOutAlertModalShow,callback:function(e){t.setTimeOutAlertModalShow=e},expression:"setTimeOutAlertModalShow"}})],1)},S=[],k={name:"alertModal",data:function(){return{}},watch:{alertModalShow:{handler:function(t){}}},computed:Object(l["a"])({},Object(c["c"])({alertModalShow:"alertmodal/get_alertModalShow",setTimeOutAlertModalShow:"alertmodal/get_setTimeOutalertModalShow",alertMsg:"alertmodal/get_alertMsg",setTimeOutAlertMsg:"alertmodal/get_setTimeOutAlertMsg",alertProgressValue:"alertmodal/get_alertProgressValue",alertProgressModalShow:"alertmodal/get_alertMsgProgressShow"}))},x=k,M=(a("3fdb"),Object(b["a"])(x,D,S,!1,null,null,null)),T=M.exports,O={name:"index",data:function(){return{navbarItems:{bulletin:{title:"系統公告",children:{board:{title:"公告區"},manage:{title:"公告管理"}}},architecture:{title:"系統架構",children:{structure:{title:"架構圖"},server:{title:"伺服器狀態"},storage:{title:"儲存設備狀態"}}},report:{title:"報告",children:{todolist:{title:"待辦事項"},weeklyreport:{title:"工作週報"},meetingminutes:{title:"會議記錄"},sop:{title:"SOP文件"}}},tool:{title:"工具",children:{fileupdownload:{title:"檔案上傳下載"}}},management:{title:"系統管理",children:{department:{title:"部門"},account:{title:"帳號"}}}}}},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",pageAccess:"getlogin/get_pageAccess",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig"})),created:function(){this.getNow()},components:{modal:y,alertModal:T},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])((o={axiosAction:"commonaxios/axiosAction",change_loginData:"getlogin/change_loginData",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal"},Object(u["a"])(o,"settimeoutalertModal","alertmodal/settimeout_alertModal"),Object(u["a"])(o,"setDate","getdate/set_Date"),o))),{},{getNow:function(){var t=this,e=[[Number(-6),Number(0)],[Number(0),Number(6)],[Number(-1),Number(5)],[Number(-2),Number(4)],[Number(-3),Number(3)],[Number(-4),Number(2)],[Number(-5),Number(1)]],a=new Date,o={};o=t.dateFormat(a);var n={};n.now=o.weekday+", "+o.month+"月 "+o.day+", "+o.year,n.nowFormat=o.year+"-"+o.month+"-"+o.day,Date.prototype.addDays=function(t){return this.setDate(this.getDate()+t),this};var s=new Date;s.addDays(e[s.getDay()][0]);var i={};i=t.dateFormat(s);var r=new Date;r.addDays(e[r.getDay()][1]);var l={};l=t.dateFormat(r),n.thisweekday=[i.year+"-"+i.month+"-"+i.day,l.year+"-"+l.month+"-"+l.day],t.setDate(n)},dateFormat:function(t){var e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],a=t.getDate();a<10&&(a="0"+a);var o=t.getMonth()+1;return o<10&&(o="0"+o),{year:t.getFullYear(),month:o,day:a,weekday:e[t.getDay()]}},logout:function(){var t=this,e={account:null,status:!1,username:null,accesslist:null};t.change_loginData(e),t.$router.push("/")},reset:function(){var t=this.$options.data();Object.assign(this.$data,t)}})},w=O,A=(a("2fe5"),Object(b["a"])(w,m,d,!1,null,"6e370ffa",null)),C=A.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("h1",[t._v("this is home")])])}],q={name:"home",data:function(){return{}},components:{},computed:Object(l["a"])({},Object(c["c"])({})),created:function(){},methods:Object(l["a"])({},Object(c["b"])({}))},P=q,j=Object(b["a"])(P,I,F,!1,null,"2709a936",null),L=j.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BulletinBoard container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("公告區")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"9"}},[a("div",{staticStyle:{opacity:"0.5"}},[t.collapseVisible?[a("b-icon",{attrs:{icon:"arrows-collapse",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]:[a("b-icon",{attrs:{icon:"arrows-expand",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]],2)])],1),a("b-collapse",{model:{value:t.collapseVisible,callback:function(e){t.collapseVisible=e},expression:"collapseVisible"}},[a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("commonQuery")],1)],1)],1),t.boardtitle||0!=t.items.length?a("div",{staticStyle:{width:"100%","min-height":"260px"},attrs:{id:"board"}},[a("div",{staticClass:"card text-center"},[a("div",{staticClass:"card-header",staticStyle:{"font-size":"20px"}},[t._v("公告內容")]),a("div",{staticClass:"card-body",staticStyle:{"min-height":"260px"}},[a("h5",{staticClass:"card-title"},[t._v(t._s(t.boardtitle))]),""!=t.boardcontentPREUP?a("pre",{staticStyle:{"font-size":"1rem","text-align":"left !important"},style:[1!=Object.keys(t.boardcontentPREUP).length?t.checkContentStyle(t.boardcontentPREUP):{}],domProps:{innerHTML:t._s(t.boardcontentPREUP.content)}}):t._e(),t._l(t.boardcontentUP.content,(function(e,o){return a("p",{key:o,staticClass:"card-text",class:{textleft:e.length>110},style:[1!=Object.keys(t.boardcontentUP).length?t.checkContentStyle(t.boardcontentUP):{}],domProps:{innerHTML:t._s(e)}})})),0!=t.contentitems.length?a("b-table",{staticStyle:{"text-align":"left"},attrs:{responsive:"",outlined:"",hover:"","head-row-variant":"primary",fields:t.contenfields,items:t.contentitems}}):t._e(),t._l(t.boardcontentDOWN.content,(function(e,o){return a("p",{key:o+"_",staticClass:"card-text",class:{textleft:e.length>110},style:[1!=Object.keys(t.boardcontentDOWN).length?t.checkContentStyle(t.boardcontentDOWN):{}],domProps:{innerHTML:t._s(e)}},[t._v(" "+t._s(o)+" ")])})),""!=t.boardcontentPREDOWN?a("pre",{staticStyle:{"font-size":"1rem","text-align":"left !important"},style:[1!=Object.keys(t.boardcontentPREDOWN).length?t.checkContentStyle(t.boardcontentPREDOWN):{}],domProps:{innerHTML:t._s(t.boardcontentPREDOWN.content)}}):t._e()],2),a("div",{staticClass:"card-footer text-muted"},[a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.boardannex).length>0,expression:"Object.keys(boardannex).length > 0"}]},[a("span",[t._v("附件:")]),t._l(t.boardannex,(function(e,o,n){return a("div",{key:n,staticStyle:{display:"inline-block",position:"relative","margin-right":"15px","margin-bottom":"10px"}},[a("b-button",{attrs:{pill:"",variant:"outline-info",target:"_blank"},on:{click:function(a){return a.preventDefault(),t.previewfile(e)}}},[t._v(t._s(o))]),a("div",{staticClass:"downloadfilebtn",attrs:{target:"_blank"},on:{click:function(a){return t.onDownload(e,o)}}},[a("font-awesome-icon",{attrs:{icon:["fas","download"],size:"lg"}})],1)],1)}))],2),a("small",{staticClass:"mt-2"},[t._v("發佈日期: "+t._s(t.boardtime))])])])]):t._e(),a("br"),0!=t.items.length?a("b-table",{attrs:{"sticky-header":"430px",responsive:"",hover:"",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,"head-variant":"light"},on:{"row-clicked":t.onRowClicked},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[t._v("Loading...")])],1)]},proxy:!0}],null,!1,2167337275)}):t._e(),0!=t.items.length?a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{cols:"12",md:"4"}},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):t._e()],1)},E=[],$=(a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d"),a("bc3a")),N=a.n($),U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commonQuery container mb-3"},[a("div",{class:{inlineblock:!t.inputData.usetime}},[a("div",[a("label",[t._v(t._s(t.inputData.label)+"：")]),a("b-form-select",{attrs:{options:t.inputData.options},on:{change:function(e){return t.onChange(e)}},model:{value:t.inputData.selected,callback:function(e){t.$set(t.inputData,"selected",e)},expression:"inputData.selected"}})],1),""!=t.selected?[a("div",{staticClass:"mt-1"},[a("label",[t._v(t._s(t.selected)+"：")]),"input"==t.inputData.childcondition?["部門名稱"==t.selected?a("b-form-select",{attrs:{options:t.conditionOptions},model:{value:t.inputtext,callback:function(e){t.inputtext=e},expression:"inputtext"}}):a("b-form-input",{staticClass:"input-title",attrs:{type:"text"},model:{value:t.inputtext,callback:function(e){t.inputtext="string"===typeof e?e.trim():e},expression:"inputtext"}})]:"select"==t.inputData.childcondition?[a("b-form-select",{attrs:{options:t.conditionOptions},model:{value:t.inputtext,callback:function(e){t.inputtext=e},expression:"inputtext"}})]:t._e()],2)]:t._e(),t.inputData.secondcondition[0]?[a("div",{staticClass:"mt-1"},[a("label",[t._v(t._s(t.inputData.secondcondition[1].label)+"：")]),"select"==t.inputData.secondcondition[1].condition?[a("b-form-select",{attrs:{options:t.conditionOptions},on:{change:function(e){return t.second_onChange(e)}},model:{value:t.inputData.second_selected,callback:function(e){t.$set(t.inputData,"second_selected",e)},expression:"inputData.second_selected"}})]:t._e()],2)]:t._e()],2),a("div",{staticClass:"mt-2",class:{inlineblock:!t.inputData.usetime}},[t.inputData.usetime?a("div",{staticClass:"inlineblock"},[t.inputData.usetime?a("b-form-checkbox",{staticClass:"inlineblock",model:{value:t.settingtime,callback:function(e){t.settingtime=e},expression:"settingtime"}},[t.settingtime?t._e():a("span",[t._v("指定時間")])]):t._e(),t.settingtime?a("div",{staticClass:"inlineblock"},[a("label",[t._v("時間：")]),a("datepicker",{attrs:{date:t.startTime,option:t.startoption}}),t._v("~ "),a("datepicker",{attrs:{date:t.endTime,option:t.endoption,limit:t.endoption.limit}})],1):t._e()],1):t._e(),a("div",{staticClass:"inlineblock"},[a("b-button",{staticClass:"ml-2",attrs:{variant:"primary"},on:{click:function(e){return t.QueryData(e)}}},[t._v("查詢")])],1)])])},z=[],Q=a("5d99"),B={name:"commonQuery",data:function(){return{startTime:{time:""},endTime:{time:""},startoption:{type:"day",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD",placeholder:"",inputStyle:{display:"inline-block",padding:"6px","line-height":"22px","font-size":"16px",border:"2px solid #fff","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.2)","border-radius":"2px",color:"#5F5F5F",width:"110px"},color:{header:"#ccc",headerText:"#f00"},overlayOpacity:.5,dismissible:!0},endoption:{type:"day",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD",placeholder:"",inputStyle:{display:"inline-block",padding:"6px","line-height":"22px","font-size":"16px",border:"2px solid #fff","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.2)","border-radius":"2px",color:"#5F5F5F",width:"110px"},color:{header:"#ccc",headerText:"#f00"},overlayOpacity:.5,dismissible:!0,limit:[{type:"fromto",from:"",to:""}]},inputtext:"",second_inputtext:"",selected:"",selectedCH:{depID:"部門編號",noumenonID:"部門編號",depName:"部門名稱",uID:"帳號",uName:"姓名"},settingtime:!1}},created:function(){var t=this;t.DefaultDate("Default"),t.inputData.secondcondition[0]&&"select"==t.inputData.secondcondition[1].condition&&(t.second_inputtext=t.inputData.second_selected)},mounted:function(){},components:{datepicker:Q["a"]},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",queryResponse:"commonquery/get_queryResponse",receivequeryAgain:"commonquery/receive_queryAgain",inputData:"commonquery/get_inputData",apiParams:"commonquery/get_apiParams",isInit:"commonquery/get_isInit",conditionOptions:"commonquery/get_conditionOptions",getDate:"getdate/get_Date"})),watch:{"startTime.time":{handler:function(t){var e=this;Date.parse(e.endTime.time).valueOf()<Date.parse(t).valueOf()&&(e.endTime.time="",e.endoption.placeholder=""),e.endoption.limit[0].from=t,e.endoption.limit[0].to=""}},"endTime.time":{handler:function(t){var e=this;Date.parse(e.startTime.time).valueOf()>Date.parse(t).valueOf()&&(e.startTime.time="",e.startoption.placeholder="")}},receivequeryAgain:{handler:function(){this.QueryData()}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",setqueryResponse:"commonquery/set_queryResponse",setthisQueryTimeInterval:"commonquery/set_thisQueryTimeInterval",setisInit:"commonquery/set_isInit",changetableBusy:"commonquery/change_tableBusy"})),{},{onChange:function(t){var e=this;0!=Object.keys(e.inputData.conversiontable).length&&e.inputData.conversiontable.hasOwnProperty(t)?e.selected=e.inputData.conversiontable[t]:e.selected="",e.inputtext=""},second_onChange:function(t){var e=this;e.second_inputtext=t},QueryDataFunction:function(){var t=this,e={};if(""!=t.selected&&""==t.inputtext)return t.setTimeOutAlertMsg("尚未輸入條件"),t.settimeoutalertModal(),void t.changetableBusy();if(t.inputData.secondcondition[0]&&""==t.second_inputtext)return t.setTimeOutAlertMsg("尚未輸入條件"),t.settimeoutalertModal(),void t.changetableBusy();t.togglealertModal(!0),e["timeattr"]=t.apiParams.normal.timeattr,e["start_time"]=t.startTime.time+" 00:00:00",e["end_time"]=t.endTime.time+" 23:59:59",e["settingtime"]=t.settingtime;var a={urlparams:{getSqlSyntax:"yes"}};if("normal"==t.apiParams.type){a["url"]="api/YS/2.0/my/CommonUse/SqlSyntax";var o="",n=["desc","lastUpdateTime"],s=["ALL"],i={},r={},l={},c={},m=[];if(t.settingtime?(l[t.apiParams.normal.timeattr]=[[t.startTime.time+" 00:00:00",t.endTime.time+" 23:59:59"]],t.setthisQueryTimeInterval([t.startTime.time,t.endTime.time])):t.isInit&&0!=Object.keys(t.apiParams.normal.intervaltime).length?(l=t.apiParams.normal.intervaltime,t.setthisQueryTimeInterval("DEFAULT")):(l="",t.setthisQueryTimeInterval("ALL")),"ALL"!=t.inputData.selected&&(""==t.apiParams.normal.attr?"user"==t.apiParams.normal.table&&"depName"==t.inputData.selected?(i["noumenonID"]=[t.inputtext],r["noumenonID"]=["like"]):(i[t.inputData.selected]=[t.inputtext],r[t.inputData.selected]=["like"]):(i[t.apiParams.normal.attr]=[t.inputData.selected],r[t.apiParams.normal.attr]=["like"],"todoList"==t.apiParams.normal.table&&(n=["asc","schedDate"]),"weeklyReport"==t.apiParams.normal.table&&(n=["asc","date"]))),t.inputData.secondcondition[0]){t.second_inputtext.length;i[t.inputData.secondcondition[1].attr]=t.second_inputtext;var d=t.second_inputtext.map((function(t){return"equal"}));r[t.inputData.secondcondition[1].attr]=d}0==Object.keys(i).length&&(i="",r=""),0==Object.keys(c).length&&(c=""),0==m.length&&(m="");var u={condition_1:{table:t.apiParams.normal.table,fields:o,orderby:n,limit:s,where:i,symbols:r,intervaltime:l,subquery:c,union:m}};Object.keys(t.apiParams.customized).map((function(e){u.hasOwnProperty(e)?(Object.keys(u[e]).map((function(a){t.apiParams.customized[e].hasOwnProperty(a)&&(""==u[e][a]?u[e][a]=t.apiParams.customized[e][a]:Object.assign(u[e][a],t.apiParams.customized[e][a]))})),Object.keys(t.apiParams.customized[e]).map((function(a){u[e].hasOwnProperty(a)||Object.assign(u[e][a],t.apiParams.customized[e][a])}))):(u[e]=JSON.parse(JSON.stringify(t.apiParams.customized[e])),Object.entries(t.apiParams.customized[e]).map((function(t){"where"!=t[0]&&"symbols"!=t[0]&&"intervaltime"!=t[0]||"string"!==typeof t[1]||(u[e][t[0]]=u[t[1]][t[0]])})))})),a["postdata"]=u}else"join"==t.apiParams.type&&"ALL"==t.inputData.selected&&(a["url"]="api/YS/2.0/my/CommonUse/SqlSyntax/JoinMultiTable",a["postdata"]=t.apiParams.customized);var p=!1;t.axiosPostAction(a).then((function(){var e=t.axiosResult;if(t.togglealertModal(!1),200!=e.status)return p=!0,void t.setTimeOutAlertMsg(e.data);"ok"===e.data["Response"]?(e.data["QueryTableData"]=e.data["QueryTableData"].sort((function(t,e){return t.lastUpdateTime<e.lastUpdateTime?1:-1})),0==e.data["QueryTableData"].length?("查無資料"==t.queryResponse&&t.setTimeOutAlertMsg("查無資料"),p=!0,t.setqueryResponse("查無資料")):t.setqueryResponse(e.data["QueryTableData"])):(p=!0,t.setTimeOutAlertMsg(e.data["Response"]))})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){p&&t.settimeoutalertModal()}))},DefaultDate:function(t){var e=this;"Default"===t?(e.startoption.placeholder=e.getDate.thisweekday[0],e.startTime.time=e.getDate.thisweekday[0],e.endoption.placeholder=e.getDate.thisweekday[1],e.endTime.time=e.getDate.thisweekday[1]):(e.reset(["startTime","endTime","selected","inputtext","second_inputtext","settingtime"]),e.changetableBusy(),e.QueryDataFunction())},dateFormat:function(t){var e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],a=t.getDate();a<10&&(a="0"+a);var o=t.getMonth()+1;return o<10&&(o="0"+o),{year:t.getFullYear(),month:o,day:a,weekday:e[t.getDay()]}},QueryData:function(t){var e=this;if("undefined"!=typeof t&&e.setisInit(!1),e.settingtime&&(""==e.startTime.time||""==e.endTime.time))return"時間尚未選擇"==e.queryResponse&&(e.setTimeOutAlertMsg("時間尚未選擇"),e.settimeoutalertModal()),void e.setqueryResponse("時間尚未選擇");e.DefaultDate(e.selected)},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},J=B,V=(a("a9b8"),Object(b["a"])(J,U,z,!1,null,"92e22650",null)),H=V.exports,W={name:"BulletinBoard",data:function(){return{fields:[{key:"category",label:"類別",sortable:!0},{key:"title",label:"標題",sortable:!0},{key:"releasedate",label:"發布日期",sortable:!0}],items:[],contenfields:[],contentitems:[],boardtitle:"",boardcontentUP:"",boardcontentDOWN:"",boardcontentPREUP:"",boardcontentPREDOWN:"",boardannex:{},boardtime:"",totalRows:1,currentPage:1,perPage:5,categorytoCH:{network:"網路",PC:"個人電腦",system:"系統"},collapseVisible:!1,test_data:[{category:"system",title:"2021年3月13號(六)因擴廠作業需求，將進行斷電施工，系統關機通知",releasedate:"2021-03-12 18:27:42",content:"因配合產線施工工程，2021年1月9號(六)早上06-00至晚上06-00需進行斷電，這段時間內系統將無法使用，請各位同仁在1月8號(五)下班前將電腦關機並拔除插頭，造成不便敬請見諒。",filename:""},{category:"system",title:"2021年1月30號(六)因擴廠作業需求，將進行斷電施工，系統關機通知",releasedate:"2021-01-29 18:01:41",content:"因配合產線施工工程，2021年1月３０號(六)早上09-00至晚上18-00需進行斷電施工，這段時間內系統將無法使用，請各位同仁在1月29號(五)下班前將電腦關機並拔除插頭，造成不便敬請見諒。",filename:""},{category:"system",title:"防火牆異動作業",releasedate:"2020-09-29 18:03:32",content:"9/23(三)配合防火牆異動作業12-30~13-00，造成不便請多包涵!",filename:""},{category:"PC",title:"請各位小心釣魚網站",releasedate:"2020-01-16 10:21:56",content:"公司內部同仁遇到有網站偽裝成防毒軟體 發送訊息警示您中毒了請立即更新防毒軟體 當心按下去有可能就中病毒或被駭客入侵 請各位同仁多加注意",filename:""},{category:"network",title:"Google Play Store騙錢軟體",releasedate:"2020-01-20 15:03:13",content:"現行App提供免費試用期，俟用戶滿意才需要付款，若不喜歡就需取消訂閱。普通情況下，大部份用戶是把測試版移除，即使未終止訂閱開發商也不會再收取費用。但安全廠商Sophos去年發現有24款AndroidApp，它們都只是QR讀取器、指南針或計算機等簡單功能，但若用戶在免費期（例如3天）截止前沒有主動終止訂閱，就會被索取1年100到240美元的高額費用，光是移除測試版是沒有用的。因此安全廠商Sophos將此類App稱為騙錢軟體（fleeceware）。",filename:""}]}},created:function(){this.SetCommonQueryData(),this.LatestBulletinDataQuery()},mounted:function(){this.totalRows=this.items.length},components:{commonQuery:H},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams"})),watch:{queryResponse:{handler:function(){var t=this;if(t.reset([]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();for(var e=[],a=0;a<t.queryResponse.length;a++){t.setLatestBulletin(t.queryResponse[0]);var o={};if(1==t.queryResponse[a]["showhide"]){if(o["category"]=t.categorytoCH[t.queryResponse[a]["category"]],o["title"]=t.queryResponse[a]["title"],o["releasedate"]=t.queryResponse[a]["lastUpdateTime"],o["content"]=t.queryResponse[a]["content"],""!=t.queryResponse[a]["filename"]){var n=t.queryResponse[a]["filename"].split(",");o["annex"]=n}e.push(o)}}t.items=e,t.totalRows=e.length,t.collapseVisible=!1}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",changetableBusy:"commonquery/change_tableBusy",setqueryResponse:"commonquery/set_queryResponse",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams"})),{},{SetCommonQueryData:function(){var t=this,e="ALL",a=[{value:"system",text:"系統"},{value:"PC",text:"個人電腦"},{value:"network",text:"網路"},{value:"ALL",text:"全選"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="misBulletin",n.normal.attr="category",t.setapiParams(n)},LatestBulletinDataQuery:function(){var t=this,e={url:"api/YS/2.0/my/CommonUse/SqlSyntax",urlparams:{getSqlSyntax:"yes"}},a={condition_1:{fields:"",table:"misBulletin",orderby:["desc","lastUpdateTime"],limit:[0,5],where:{showhide:[1]},symbols:{showhide:["equal"]},intervaltime:"",union:"",subquery:""}};e["postdata"]=a;var o=!1;t.togglealertModal(!0),t.axiosPostAction(e).then((function(){var e=t.axiosResult;if(t.togglealertModal(!1),200==e.status)if("ok"===e.data["Response"])if(0==e.data["QueryTableData"].length)t.setTimeOutAlertMsg("查無資料");else{var a=[];t.setLatestBulletin(e.data["QueryTableData"][0]);for(var n=0;n<e.data["QueryTableData"].length;n++){var s={};if(s["category"]=t.categorytoCH[e.data["QueryTableData"][n]["category"]],s["title"]=e.data["QueryTableData"][n]["title"],s["releasedate"]=e.data["QueryTableData"][n]["lastUpdateTime"],s["content"]=e.data["QueryTableData"][n]["content"],""!=e.data["QueryTableData"][n]["filename"]){var i=e.data["QueryTableData"][n]["filename"].split(",");s["annex"]=i}a.push(s)}t.items=a,t.totalRows=a.length}else t.setTimeOutAlertMsg(e.data["Response"]),o=!0;else t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e),o=!0})).finally((function(){o&&t.settimeoutalertModal()}))},onRowClicked:function(t){var e=this;if(e.reset(["items","totalRows","currentPage"]),e.boardtitle=t.title,e.setLatestBulletinContent(t),e.boardtime=t.releasedate,"undefined"!=typeof t.annex)for(var a=0;a<t.annex.length;a++)e.boardannex[t.annex[a]]="./misbulletinfiles/"+t.annex[a];window.scrollTo(0,0)},onDownload:function(t,e){N()({url:t,method:"GET",responseType:"blob"}).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=a,o.setAttribute("download",e),document.body.appendChild(o),o.click(),document.body.removeChild(o)}))},previewfile:function(t){window.open(t,"vueSystem","vueSystem","statusbar=no,scrollbars=yes,status=yes,resizable=yes")},setLatestBulletin:function(t){var e=this;if(e.boardtitle=t["title"],e.setLatestBulletinContent(t),e.boardtime=t["lastUpdateTime"],""!=t["filename"])for(var a=t["filename"].split(","),o=0;o<a.length;o++)e.boardannex[a[o]]="./misbulletinfiles/"+a[o]},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)},setLatestBulletinContent:function(t){var e=this;if(e.checkIsJsonData(t.content)){var a=t.content;"[object Object]"!=Object.prototype.toString.call(t.content)&&(a=JSON.parse(a)),a.hasOwnProperty("table")&&(e.contenfields=a.table.fields,e.contentitems=a.table.items),a.hasOwnProperty("wordUp")&&(Array.isArray(a.wordUp.content)||(a.wordUp.content=a.wordUp.content.split("<br/>")),e.boardcontentUP=a.wordUp),a.hasOwnProperty("wordDown")&&(Array.isArray(a.wordDown.content)||(a.wordDown.content=a.wordDown.content.split("<br/>")),e.boardcontentDOWN=a.wordDown),a.hasOwnProperty("wordPreUp")&&(e.boardcontentPREUP=a.wordPreUp.content),a.hasOwnProperty("wordPreDown")&&(e.boardcontentPREDOWN=a.wordPreDown.content)}else{var o={};o["content"]=t.content.split("<br/>"),e.boardcontentUP=o}},checkIsJsonData:function(t){var e=!0;if("[object Object]"!=Object.prototype.toString.call(t))try{JSON.parse(t)}catch(a){e=!1}return e},checkContentStyle:function(t){var e={};return Object.entries(t).forEach((function(t){"align"===t[0]&&(e["text-align"]=t[1]),"color"===t[0]&&(e["color"]=t[1]),"size"===t[0]&&(e["font-size"]=t[1])})),e}})},G=W,Y=(a("ccb2"),Object(b["a"])(G,R,E,!1,null,"c70dd86a",null)),K=Y.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BulletinManage container"},[0!=t.tabIndex?a("commonQuery"):t._e(),a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"上傳",active:""}},[0==t.tabIndex?a("b-form",{on:{submit:t.uploadFormSubmit}},[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("類別:")])]),a("b-col",{attrs:{sm:"5"}},[a("b-form-select",{staticStyle:{display:"inline-block"},attrs:{id:"input-category",options:t.categoryoptions},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("公告標題:")])]),a("b-col",{class:{"form-group--error":t.$v.form.title.value.$error},attrs:{sm:"5"}},[a("b-form-input",{staticClass:"input-title",attrs:{type:"text"},model:{value:t.$v.form.title.$model.value,callback:function(e){t.$set(t.$v.form.title.$model,"value","string"===typeof e?e.trim():e)},expression:"$v.form.title.$model.value"}}),t.check_required(t.$v.form.title.value.required,t.$v.form.title.$model)?[a("div",{staticClass:"error"},[t._v("Is required")])]:t._e()],2)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("公告內容:")]),a("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{trigger:"hover",title:t.usetableTooltipExample,html:!0,placement:"right",variant:"info"},expression:"{\n                                    trigger: 'hover',\n                                    title: usetableTooltipExample,\n                                    html: true,\n                                    placement: 'right',\n                                    variant: 'info',\n                                }"}],staticStyle:{"margin-bottom":"5px"},model:{value:t.formcontentusetable,callback:function(e){t.formcontentusetable=e},expression:"formcontentusetable"}},[t._v("自定義文字格式或使用表格(若兩者都勾選以此優先)")]),a("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{trigger:"hover",title:t.usepreTooltipExample,html:!0,placement:"bottom",variant:"info"},expression:"{\n                                    trigger: 'hover',\n                                    title: usepreTooltipExample,\n                                    html: true,\n                                    placement: 'bottom',\n                                    variant: 'info',\n                                }"}],model:{value:t.formcontentusepre,callback:function(e){t.formcontentusepre=e},expression:"formcontentusepre"}},[t._v("自定義格式內容(<pre>)")])],1),a("b-col",{class:{"form-group--error":t.seterrorclass(t.$v.form.content.value,t.tabIndex)},attrs:{sm:"10"}},[a("b-form-textarea",{attrs:{id:"textarea-default",size:"lg","no-resize":"",rows:"8"},model:{value:t.$v.form.content.$model.value,callback:function(e){t.$set(t.$v.form.content.$model,"value","string"===typeof e?e.trim():e)},expression:"$v.form.content.$model.value"}},[a("br")]),t.check_required(t.$v.form.content.value.required,t.$v.form.content.$model)?[a("div",{staticClass:"error"},[t._v("Is required")])]:t.formcontentusetable?[t.check_jsonvalid(t.$v.form.content.value.jsonvalidator,t.$v.form.content.$model)?a("div",{staticClass:"jsonerror"},[t._v(" 不是正確的JSON格式，字串須加雙引號，陣列要以[ ]包起來，物件要以{ }包起來 ")]):t._e()]:t._e()],2)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:t.$v.form.$touch}},[t._v("上傳")])],1)])],1)],1):t._e()],1),a("b-tab",{attrs:{title:"修改"}},[0==t.items.length?a("h5",{staticClass:"card-title"},[t._v(" 選擇查詢條件 ")]):t._e(),0!=t.items.length?a("b-table",{attrs:{"sticky-header":"430px",responsive:"",hover:"",items:t.items,fields:t.fields,"head-variant":"light"},on:{"row-clicked":t.onRowClicked},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[t._v("Loading...")])],1)]},proxy:!0}],null,!1,2167337275)}):t._e()],1),a("b-tab",{attrs:{title:"刪除"}},[0==t.items.length?a("h5",{staticClass:"card-title"},[t._v(" 選擇查詢條件 ")]):t._e(),0!=t.items.length?a("b-table",{attrs:{"sticky-header":"430px",responsive:"",hover:"",items:t.items,fields:t.fields,"head-variant":"light"},on:{"row-clicked":t.onRowClicked},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[t._v("Loading...")])],1)]},proxy:!0}],null,!1,2167337275)}):t._e()],1)],1)],1),2==t.tabIndex?a("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("確定要刪除此公告嗎？")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.delBulletinModalShow=!t.delBulletinModalShow}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.onDelete()}}},[t._v("確定刪除")])],1)]},proxy:!0}],null,!1,2755207181),model:{value:t.delBulletinModalShow,callback:function(e){t.delBulletinModalShow=e},expression:"delBulletinModalShow"}}):t._e(),1==t.tabIndex?a("b-modal",{attrs:{centered:"",size:"xl","no-close-on-backdrop":"","no-close-on-esc":"","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("公告修改")])]},proxy:!0},{key:"default",fn:function(){return[a("b-form",{on:{submit:t.modifyFormSubmit}},[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("類別:")])]),a("b-col",{attrs:{sm:"5"}},[a("b-form-select",{staticStyle:{display:"inline-block"},attrs:{id:"input-category",options:t.categoryoptions},model:{value:t.modmodalcontent.category,callback:function(e){t.$set(t.modmodalcontent,"category",e)},expression:"modmodalcontent.category"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("公告標題:")])]),a("b-col",{class:{"form-group--error":t.$v.modmodalcontent.title.value.$error},attrs:{sm:"5"}},[a("b-form-input",{staticClass:"input-title",attrs:{type:"text"},model:{value:t.$v.modmodalcontent.title.$model.value,callback:function(e){t.$set(t.$v.modmodalcontent.title.$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                $v.modmodalcontent.title.$model.value\n                            "}}),t.check_required(t.$v.modmodalcontent.title.value.required,t.$v.modmodalcontent.title.$model)?[a("div",{staticClass:"error"},[t._v("Is required")])]:t._e()],2)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("公告內容:")]),a("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{trigger:"hover",title:t.usetableTooltipExample,html:!0,placement:"right",variant:"info"},expression:"{\n                                trigger: 'hover',\n                                title: usetableTooltipExample,\n                                html: true,\n                                placement: 'right',\n                                variant: 'info',\n                            }"}],model:{value:t.modmodalcontentusetable,callback:function(e){t.modmodalcontentusetable=e},expression:"modmodalcontentusetable"}},[t._v("自定義文字格式或使用表格(若兩者都勾選以此優先)")]),a("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{trigger:"hover",title:t.usepreTooltipExample,html:!0,placement:"bottom",variant:"info"},expression:"{\n                                trigger: 'hover',\n                                title: usepreTooltipExample,\n                                html: true,\n                                placement: 'bottom',\n                                variant: 'info',\n                            }"}],model:{value:t.modmodalcontentusepre,callback:function(e){t.modmodalcontentusepre=e},expression:"modmodalcontentusepre"}},[t._v("自定義格式內容(<pre>)")])],1),a("b-col",{class:{"form-group--error":t.seterrorclass(t.$v.modmodalcontent.content.value,t.tabIndex)},attrs:{sm:"10"}},[a("b-form-textarea",{attrs:{id:"textarea-default",size:"lg","no-resize":"",rows:"8"},model:{value:t.$v.modmodalcontent.content.$model.value,callback:function(e){t.$set(t.$v.modmodalcontent.content.$model,"value",e)},expression:"\n                                $v.modmodalcontent.content.$model.value\n                            "}}),t.check_required(t.$v.modmodalcontent.content.value.required,t.$v.modmodalcontent.content.$model)?[a("div",{staticClass:"error"},[t._v("Is required")])]:t.modmodalcontentusetable?[t.check_jsonvalid(t.$v.modmodalcontent.content.value.jsonvalidator,t.$v.modmodalcontent.content.$model)?a("div",{staticClass:"jsonerror"},[t._v(" 不是正確的JSON格式，字串須加雙引號，陣列要以[ ]包起來，物件要以{ }包起來 ")]):t._e()]:t._e()],2)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("是否顯示:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.modmodalcontent.showhide,callback:function(e){t.$set(t.modmodalcontent,"showhide",e)},expression:"modmodalcontent.showhide"}},[t._v("顯示")])],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.onModifyClose()}}},[t._v("Close")])],1),a("div",{staticClass:"text-right"},[a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"5px"},attrs:{type:"submit",variant:"success",size:"sm"},on:{click:t.$v.modmodalcontent.$touch}},[t._v("修改")])],1)])],1)],1)]},proxy:!0}],null,!1,2973971142),model:{value:t.modBulletinModalShow,callback:function(e){t.modBulletinModalShow=e},expression:"modBulletinModalShow"}}):t._e()],1)},Z=[],tt=(a("c975"),a("a15b"),a("a434"),a("b0c0"),a("5319"),a("1dce")),et=a("b5ae"),at=function(t){var e=!0;try{JSON.parse(t)}catch(a){e=!1}return e},ot={name:"BulletinManage",data:function(){return{tabIndex:0,form:{title:{key:"title",value:"",invalid:!1},content:{key:"content",value:"",invalid:!1},category:"system",filename:[],files:[]},formcontentusetable:!1,formcontentusepre:!1,fields:[{key:"category",label:"類別",sortable:!0},{key:"title",label:"標題",sortable:!0},{key:"releasedate",label:"發布日期",sortable:!0},{key:"showhide",label:"顯示/隱藏",sortable:!0}],items:[],categoryoptions:[{value:"system",text:"系統"},{value:"PC",text:"個人電腦"},{value:"network",text:"網路"}],RowClickedIndex:"",modmodalcontent:{seq:"",category:"",title:{key:"title",value:"",invalid:!1},content:{key:"content",value:"",invalid:!1},showhide:"",boardannex:{},files:"",filename:[]},modmodalcontentusetable:!1,modmodalcontentusepre:!1,modBulletinModalShow:!1,delmodalcontent:{seq:"",filename:[]},delBulletinModalShow:!1}},mixins:[tt["validationMixin"]],validations:function(){var t={form:{title:{value:{required:et["required"]}},content:{value:{required:et["required"],jsonvalidator:at}}},modmodalcontent:{title:{value:{required:et["required"]}},content:{value:{required:et["required"],jsonvalidator:at}}}};return 0==this.tabIndex?(this.formcontentusetable||delete t.form.content.value.jsonvalidator,t):1==this.tabIndex?(this.modmodalcontentusetable||delete t.modmodalcontent.content.value.jsonvalidator,t):{}},created:function(){this.SetCommonQueryData()},components:{commonQuery:H},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams"})),watch:{queryResponse:{handler:function(){var t=this;if(t.reset(["tabIndex"]),t.formReset(),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();var e=[],a={};a={network:"網路",PC:"個人電腦",system:"系統"};for(var o=0;o<t.queryResponse.length;o++){var n={};if(n["seq"]=t.queryResponse[o]["seq"],n["category"]=a[t.queryResponse[o]["category"]],n["title"]=t.queryResponse[o]["title"],n["releasedate"]=t.queryResponse[o]["lastUpdateTime"],n["content"]=t.queryResponse[o]["content"],1==t.queryResponse[o]["showhide"]?n["showhide"]=!0:n["showhide"]=!1,n["creatorID"]=t.queryResponse[o]["creatorID"],""!=t.queryResponse[o]["filename"]){var s=t.queryResponse[o]["filename"].split(",");n["annex"]=s}e.push(n)}0!=e.length&&(t.items=e)}},tabIndex:{handler:function(){this.reset(["tabIndex"]),this.formReset()}},formcontentusetable:{handler:function(){this.formcontentusetable?this.form.content["jsonvalid"]=!1:delete this.form.content.jsonvalid}},modmodalcontentusetable:{handler:function(){this.modmodalcontentusetable?this.modmodalcontent.content["jsonvalid"]=!1:delete this.modmodalcontent.content.jsonvalid}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",axiosDeleteAction:"commonaxios/axiosDeleteAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",queryAgain:"commonquery/do_queryAgain",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams"})),{},{SetCommonQueryData:function(){var t=this,e="ALL",a=[{value:"system",text:"系統"},{value:"PC",text:"個人電腦"},{value:"network",text:"網路"},{value:"ALL",text:"全選"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="misBulletin",n.normal.attr="category",n.normal.timeattr="lastUpdateTime",t.setapiParams(n)},uploadFormSubmit:function(t){t.preventDefault();var e=["title","content"],a=this,o=!0;if(e.forEach((function(t){a.form[t].invalid?"content"===t&&a.form["content"].hasOwnProperty("jsonvalid")&&(a.form["content"].jsonvalid||(o=!1)):o=!1})),o){var n;if(n=a.adjustContentData(a.form.content),!n)return;var s={url:"api/YS/1.0/my/CommonUse/misBulletin"};s["postdata"]={seq:[""],category:[a.form.category],title:[a.form.title.value],content:[n],filename:[""],showhide:["1"],creatorID:[a.loginData.account]},a.togglealertModal(!0),a.axiosPostAction(s).then((function(){var t=a.axiosResult;a.togglealertModal(!1),200==t.status?"ok"===t.data["Response"]?a.setTimeOutAlertMsg("上傳成功"):a.setTimeOutAlertMsg(t.data["Response"]):a.setTimeOutAlertMsg(t.data)})).catch((function(t){a.setTimeOutAlertMsg(t)})).finally((function(){a.formReset(),a.settimeoutalertModal()}))}},seterrorclass:function(t,e){return t.$error&&t.required?(0==e&&this.formcontentusetable||!(1!=e||!this.modmodalcontentusetable))&&t.$error:t.$error},check_required:function(t,e){return e.invalid=t,!t},check_jsonvalid:function(t,e){return e.jsonvalid=t,!t},formatNames:function(t){for(var e=this,a=0;a<t.length;a++)0==e.tabIndex?e.form.filename.push(t[a].name):e.modmodalcontent.filename.push(t[a].name);return t.length>3?"".concat(t.length," files selected"):0==e.tabIndex?"".concat(e.form.filename):"".concat(e.modmodalcontent.filename)},fileChange:function(){0==this.tabIndex?this.form.filename.length=0:this.modmodalcontent.filename.length=0},onRowClicked:function(t,e,a){var o=this,n=JSON.parse(JSON.stringify(t)),s={};if(s={"網路":"network","個人電腦":"PC","系統":"system"},1==o.tabIndex){if(o.modmodalcontentusetable=!1,o.modmodalcontentusepre=!1,o.RowClickedIndex=e,o.modmodalcontent.seq=n.seq,o.modmodalcontent.title.value=n.title,o.modmodalcontent.category=s[n.category],o.checkIsJsonData(n.content)){var i=n.content;"[object Object]"!=Object.prototype.toString.call(n.content)&&(i=JSON.parse(i)),i.hasOwnProperty("wordPreUp")&&"string"!=typeof i.wordPreUp.content&&(o.modmodalcontentusepre=!0,i=i.wordPreUp.content.content.replace(/<br\s*[\/]?>/g,"\n")),o.modmodalcontentusepre||(o.modmodalcontentusetable=!0),o.modmodalcontentusepre?o.modmodalcontent.content.value=i:(i.hasOwnProperty("wordUp")&&(i.wordUp.content=i.wordUp.content.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g,"")),i.hasOwnProperty("wordDown")&&(i.wordDown.content=i.wordDown.content.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g,"")),o.modmodalcontent.content.value=JSON.stringify(i))}else n.content=n.content.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g,""),o.modmodalcontent.content.value=n.content;if(o.modmodalcontent.showhide=n.showhide,"undefined"!=typeof n.annex)for(var r=0;r<n.annex.length;r++)o.modmodalcontent.boardannex[n.annex[r]]="./misbulletinfiles/"+n.annex[r];o.modBulletinModalShow=!0}else o.delmodalcontent.seq=t.seq,"undefined"!=typeof t.annex?o.delmodalcontent.filename=t.annex:o.delmodalcontent.filename="",o.delBulletinModalShow=!0},previewfile:function(t){window.open(t,"vueSystem","vueSystem","statusbar=no,scrollbars=yes,status=yes,resizable=yes")},modifyFormSubmit:function(t){var e=this;t.preventDefault();var a=this;if(0!=Object.keys(a.modmodalcontent.boardannex).length){if(a.modmodalcontent.filename.length>Object.keys(a.modmodalcontent.boardannex).length)return a.setTimeOutAlertMsg("上傳附件數量大於原附件數量"),a.settimeoutalertModal(1500),a.modmodalcontent.files="",void(a.modmodalcontent.filename.length=0);for(var o=0;o<a.modmodalcontent.filename.length;o++)if(-1==Object.keys(a.modmodalcontent.boardannex).indexOf(a.modmodalcontent.filename[o]))return a.setTimeOutAlertMsg("上傳附件檔名:"+a.modmodalcontent.filename[o]+"應與原附件名稱相同"),a.settimeoutalertModal(1500),a.modmodalcontent.files="",void(a.modmodalcontent.filename.length=0)}var n=["title","content"],s=!0;if(n.forEach((function(t){a.modmodalcontent[t].invalid?"content"===t&&a.modmodalcontent["content"].hasOwnProperty("jsonvalid")&&(a.modmodalcontent["content"].jsonvalid||(s=!1)):s=!1})),s){var i;if(i=a.adjustContentData(a.modmodalcontent.content),!i)return;var r={url:"api/YS/1.0/my/CommonUse/misBulletin"};r["postdata"]={old_seq:[a.modmodalcontent.seq],category:[a.modmodalcontent.category],title:[a.modmodalcontent.title.value],content:[i],showhide:[a.modmodalcontent.showhide],creatorID:[a.loginData.accoun]},a.togglealertModal(!0),a.axiosPatchAction(r).then((function(){var t=a.axiosResult;a.togglealertModal(!1),200==t.status?"ok"===t.data["Response"]?(a.setTimeOutAlertMsg("修改成功"),a.modmodalcontent=e.$options.data().modmodalcontent,a.modBulletinModalShow=!1):a.setTimeOutAlertMsg(t.data["Response"]):a.setTimeOutAlertMsg(t.data)})).catch((function(t){a.setTimeOutAlertMsg(t)})).finally((function(){a.togglealertModal(!1),a.settimeoutalertModal(),setTimeout((function(){a.queryAgain()}),1200)}))}},onModifyClose:function(){var t=this;t.modmodalcontent=this.$options.data().modmodalcontent,t.modBulletinModalShow=!t.modBulletinModalShow},deletefile:function(t,e){var a=this,o=this,n=Object.keys(o.modmodalcontent.boardannex);n.splice(n.indexOf(t),1);n.join(",");var s={url:"api/YS/1.0/my/CommonUse/misBulletin"};s["postdata"]={seq:[o.modmodalcontent.seq]},o.togglealertModal(!0),o.axiosDeleteAction(s).then((function(){var e=o.axiosResult;if(o.togglealertModal(!1),200==e.status)if("ok"===e.data["Response"]){o.setTimeOutAlertMsg("修改成功");var n=o.modmodalcontent.boardannex;delete n[t],a.$data.modmodalcontent.boardannex=Object.assign({},n);var s=o.RowClickedIndex,i=o.items;i[s].annex.splice(i[s].annex.indexOf(o.items),1)}else o.setTimeOutAlertMsg(e.data["Response"]);else o.setTimeOutAlertMsg(e.data)})).catch((function(t){o.setTimeOutAlertMsg(t)})).finally((function(){o.settimeoutalertModal()}))},onDelete:function(){var t=this,e={url:"api/YS/1.0/my/CommonUse/misBulletin"};e["postdata"]={seq:[t.delmodalcontent.seq]},t.togglealertModal(!0),t.axiosDeleteAction(e).then((function(){var e=t.axiosResult;t.togglealertModal(!1),200==e.status?"ok"===e.data["Response"]?t.setTimeOutAlertMsg("刪除成功"):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),t.delBulletinModalShow=!1,setTimeout((function(){t.queryAgain()}),1200)}))},formReset:function(){var t=this;t.form={title:{key:"title",value:"",invalid:!1},content:{key:"content",value:"",invalid:!1},category:"system",filename:[],files:[]},t.modmodalcontent={seq:"",category:"",title:{key:"title",value:"",invalid:!1},content:{key:"content",value:"",invalid:!1},showhide:"",boardannex:{},files:"",filename:[]},t.formcontentusetable=!1,t.formcontentusepre=!1,t.modmodalcontentusetable=!1,t.modmodalcontentusepre=!1,t.$nextTick((function(){t.$v.$reset()}))},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)},adjustContentData:function(t){var e,a=!1,o=this,n=["wordUp","wordDown","wordPreUp","wordPreDown"];if(t.hasOwnProperty("jsonvalid")){var s=JSON.parse(t.value);if(s.hasOwnProperty("table")){a=!0;for(var i=["fields","items"],r=0;r<i.length;r++){if(!s.table.hasOwnProperty(i[r]))return o.setTimeOutAlertMsg("公告內容若要使用表格顯示，table的value物件必須有key必需有fields、items兩個key"),void o.settimeoutalertModal(1200);if(!Array.isArray(s.table[i[r]]))return o.setTimeOutAlertMsg("key:table -> "+i[r]+"必須為陣列"),o.settimeoutalertModal(1500),!1;s.table[i[r]].forEach((function(t){if("[object Object]"!=Object.prototype.toString.call(t)||0==Object.keys(t))return o.setTimeOutAlertMsg("key->table的的陣列內容必須為物件且不為空物件"),o.settimeoutalertModal(1500),!1}))}}for(var l=0;l<n.length;l++)if(s.hasOwnProperty(n[l])){if(a=!0,"[object Object]"!=Object.prototype.toString.call(s[n[l]])||0==Object.keys(s[n[l]]))return o.setTimeOutAlertMsg("key->"+n[l]+"的value必須為物件且不為空物件"),o.settimeoutalertModal(1500),!1;if(!s[n[l]].hasOwnProperty("content")||"string"!=typeof s[n[l]]["content"])return o.setTimeOutAlertMsg(["key->"+n[l]+"的value物件缺少key:content","且必須為字串"]),o.settimeoutalertModal(1500),!1;"wordPreUp"!=n[l]&&"wordPreDown"!=n[l]&&(s[n[l]]["content"]=o.replaceContentData(s[n[l]]["content"]))}if(!a)return o.setTimeOutAlertMsg(["key:至少要有下列其中一個",'["wordUp", "wordDown", "wordPreUp", "wordPreDown"]']),o.settimeoutalertModal(1500),!1;e=JSON.stringify(s)}else{var c={};e=t.value,o.modmodalcontentusepre||o.formcontentusepre?(c["wordPreUp"]={content:{content:e.replace(/\n/g,"<br/>")}},e=JSON.stringify(c)):e=o.replaceContentData(e)}return e},replaceContentData:function(t){return t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;")},usetableTooltipExample:function(){return'<p>以物件傳入key為<span style="color:black;font-weight:bold;font-size:large">table</span>、<span style="color:black;font-weight:bold;font-size:large">wordUp</span>、<span style="color:black;font-weight:bold;font-size:large">wordDown</span>、<span style="color:black;font-weight:bold;font-size:large">wordPreUp</span>、<span style="color:black;font-weight:bold;font-size:large">wordPreDown</span>(選填)</p>\n            <p>key若為其他，系統則不做判斷顯示，順序為wordPreUp，wordUp，wordDown，wordPreDown</p>\n            <div style="border:1px solid #ccc;padding:5px;border-radius:10px;margin-bottom:5px">\n            <p style="font-size:larger;font-weight:bold;text-decoration:underline">key : table的value為物件且必須有fields、items兩個key</p>\n            <ul style="padding-left:20px;margin-bottom:0">\n            <li><span style="font-size:large;font-weight:bold;text-decoration:underline">fields</span>為表格的表頭，以陣列包物件格式\b傳入</li>\n            <ol style="padding-left:20px;margin-bottom:0">\n            <li>每一筆物件就是\b一個表頭，物件順序跟顯示順序有關係</li>\n            <li>物件的key有：key(須以items內每一筆資料的key相同，必填)、label(顯示的名稱，選填)、sortable(是否排序true/false，選填)</li>\n            <li>格式若錯誤系統無法顯示</li>\n            <li>example:[{"key":"category","label": "類別","sortable": true},{"key":"title","label": "標題","sortable": false}]</li>\n            </ol>\n            <li><span style="font-size:large;font-weight:bold;text-decoration:underline">items</span>為表格的資料內容，以陣列包物件格式\b傳入</li>\n            <ol style="padding-left:20px;margin-bottom:0">\n            <li>每一筆物件就是\b一列資料</li>\n            <li>各物件內的key都要相同</li>\n            <li>若要指定列的顏色</li>\n            <ul style="padding-left:20px">\n            <li>使用參數key : "_rowVariant"</li>\n            <li>value : primary,secondary,success,warning,danger,info,light,dark</li>\n            </ul>\n            <li>若要指定資料格的顏色</li>\n            <ul style="padding-left:20px">\n            <li>使用參數key : "_cellVariants"</li>\n            <li>格式為{"表頭":"color"}，color -> primary,secondary,success,warning,danger,info,light,dark</li>\n            </ul>\n            <li>格式若錯誤系統無法顯示</li>\n            <li>example:{ "category": "值", "title": "值" ,"_rowVariant":"info", "_cellVariants":"danger"}</li>\n            </ol>\n            </ul>\n            </div>\n            <div style="border:1px solid #ccc;padding:5px;border-radius:10px">\n            <p style="font-size:larger;font-weight:bold;text-decoration:underline">key : wordUp、wordDown的value以物件傳入</p>\n            <ol style="padding-left:20px;margin-bottom:0">\n            <li>wordUp代表在表格上方的文字、wordDown代表表格下方的文字</li>\n            <li>物件格式為{"content":"文字內容(必填，若要換行輸入\\n換行符號)","color":"文字顏色","size":"文字大小","align":"文字位置(left,center,right)"}</li>\n            <li>以上參數須符合css才能正常顯示，content為必填，其他參數為選填</li>\n            </ol>\n            </div>\n            <div style="border:1px solid #ccc;padding:5px;border-radius:10px">\n            <p style="font-size:larger;font-weight:bold;text-decoration:underline">key : wordPreUp、wordPreDown的value以物件傳入</p>\n            <ol style="padding-left:20px;margin-bottom:0">\n            <li>wordPreUp代表在表格上方的文字、wordPreDown代表在表格下方的文字</li>\n            <li>物件格式為{"content":"文字內容(必填，若要換行輸入\\n換行符號)","color":"文字顏色","size":"文字大小"}</li>\n            <li>資料內容將以html的&lt;pre&gt;標籤顯示</li>\n            </ol>\n            </div>'},usepreTooltipExample:function(){return"<p>直接輸入文字內容，公告區顯示時的空格換行與格式會與輸入時一致</p>\n            <p>資料內容將以html的&lt;pre&gt;標籤顯示</p>\n            "},checkIsJsonData:function(t){var e=!0;if("[object Object]"!=Object.prototype.toString.call(t))try{JSON.parse(t)}catch(a){e=!1}return e}})},nt=ot,st=(a("3d80"),a("c953"),Object(b["a"])(nt,X,Z,!1,null,"8e1c6648",null)),it=st.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Department container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("部門管理")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"9"}},[a("div",{staticStyle:{opacity:"0.5"}},[t.collapseVisible?[a("b-icon",{attrs:{icon:"arrows-collapse",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]:[a("b-icon",{attrs:{icon:"arrows-expand",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]],2)])],1),a("b-collapse",{model:{value:t.collapseVisible,callback:function(e){t.collapseVisible=e},expression:"collapseVisible"}},[a("b-row",[a("b-col",{attrs:{sm:"10"}},[a("commonQuery")],1),a("b-col",{attrs:{sm:"2"}},[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{pill:"",variant:"success"},on:{click:function(e){return t.toggleAddModal(!0)}}},[t._v("新增")])],1)])],1)],1),a("b-tabs",{model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"查詢",active:""}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("commonTable")],1),a("b-tab",{attrs:{title:"編輯"}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("commonTable")],1)],1),t.addModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",{staticStyle:{margin:"0 auto"}},[t._v("新增部門")])]},proxy:!0},{key:"default",fn:function(){return[a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.toggleAddModal(!1),t.resetSystemForm()}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,780903501)}):t._e(),t.modModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",{staticStyle:{margin:"0 auto"}},[t._v("部門修改")])]},proxy:!0},{key:"default",fn:function(){return[a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.togglecommonModal(!1),t.modModalShow=!1,t.resetSystemForm()}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,3851366695)}):t._e()],1)},lt=[],ct=(a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"systemForm"},[a("b-form",t._l(t.vforData,(function(e,o){return a("b-row",{key:o,class:{"my-4":"button"!=o}},["button"!=o&&"textclass"!=o?[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v(t._s(e[1])+":")])]),a("b-col",{attrs:{sm:"10"}},["readonly"==e[0]?a("b-form-input",{class:{wronginput:t.form.formcontentwrong,"input-text":t.vforData["textclass"]},attrs:{type:"text",readonly:""},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"text"==e[0]?a("b-form-input",{class:{wronginput:t.form.formcontentwrong,"input-text":t.vforData["textclass"]},attrs:{type:"text"},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"email"==e[0]?a("b-form-input",{class:{wronginput:t.form.formcontentwrong,"input-text":t.vforData["textclass"]},attrs:{type:"email"},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"textarea"==e[0]?a("b-form-textarea",{attrs:{rows:"4","max-rows":"12"},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"accesscheckbox"==e[0]?t._l(t.pageAccessConfig,(function(e,n,s){return a("div",{key:s,staticClass:"mt-1"},[a("b-row",[a("b-col",{attrs:{sm:"1"}},[a("b-form-checkbox",{staticClass:"mt-1 fatherCB",attrs:{button:"","button-variant":"outline-secondary"},on:{change:function(e){return t.accessCBFatherClick(e,t.form[o][n])}},model:{value:t.form[o][n]["authority"],callback:function(e){t.$set(t.form[o][n],"authority",e)},expression:"form[key1][key2]['authority']"}},[t._v(" "+t._s(e.label)+" ")])],1),a("b-col",{attrs:{sm:"11"}},[e.hasOwnProperty("children")?t._l(Object.keys(e.children),(function(s,i){return a("div",{key:i,staticStyle:{display:"inline-block","vertical-align":"top"}},[a("b-form-checkbox",{staticClass:"ml-4 mt-2",staticStyle:{display:"inline-block","vertical-align":"top"},on:{change:function(e){return t.accessCBChildrenClick(e,t.form[o][n],s)}},model:{value:t.form[o][n].children[s]["authority"],callback:function(e){t.$set(t.form[o][n].children[s],"authority",e)},expression:"\n                                                form[key1][key2].children[\n                                                    item3\n                                                ]['authority']\n                                            "}},[t._v(" "+t._s(e.children[s].label)+" ")]),e.children[s].hasOwnProperty("remark")?[t._l(Object.keys(e.children[s].remark.commonQueryCondition),(function(i,r){return a("div",{key:r,staticClass:"haveremark",staticStyle:{"margin-right":"10px",height:"28px !important"}},[a("v-select",{staticStyle:{"min-width":"150px !important",height:"28px !important"},attrs:{label:"text",reduce:function(t){return t.value},options:e.children[s].remark.commonQueryCondition[i].options,multiple:e.children[s].remark.commonQueryCondition[i].multiple,placeholder:e.children[s].remark.commonQueryCondition[i].placeholder,searchable:!1,"close-on-select":!e.children[s].remark.commonQueryCondition[i].multiple},model:{value:t.form[o][n].children[s].remark.commonQueryCondition[i],callback:function(e){t.$set(t.form[o][n].children[s].remark.commonQueryCondition,i,e)},expression:"\n                                                        form[key1][key2]\n                                                            .children[item3]\n                                                            .remark\n                                                            .commonQueryCondition[\n                                                            item4\n                                                        ]\n                                                    "}})],1)})),e.children[s].remark.hasOwnProperty("dataHandleAuthority")?[a("v-select",{staticClass:"haveremark",staticStyle:{"min-width":"150px !important",height:"28px !important"},attrs:{label:"text",reduce:function(t){return t.value},options:e.children[s].remark.dataHandleAuthority.options,multiple:e.children[s].remark.dataHandleAuthority.multiple,placeholder:e.children[s].remark.dataHandleAuthority.placeholder,searchable:!1,"close-on-select":!e.children[s].remark.dataHandleAuthority.multiple},model:{value:t.form[o][n].children[s].remark.dataHandleAuthority,callback:function(e){t.$set(t.form[o][n].children[s].remark,"dataHandleAuthority",e)},expression:"\n                                                        form[key1][key2]\n                                                            .children[item3]\n                                                            .remark\n                                                            .dataHandleAuthority\n                                                    "}})]:t._e()]:t._e()],2)})):[e.hasOwnProperty("remark")?[t._l(Object.keys(e.remark.commonQueryCondition),(function(s,i){return a("div",{key:i,staticClass:"haveremark",staticStyle:{"margin-right":"10px",height:"28px !important"}},[a("v-select",{staticStyle:{"min-width":"150px !important",height:"28px !important"},attrs:{label:"text",reduce:function(t){return t.value},options:e.remark.commonQueryCondition[s].options,multiple:e.remark.commonQueryCondition[s].multiple,placeholder:e.remark.commonQueryCondition[s].placeholder,searchable:!1,"close-on-select":!e.remark.commonQueryCondition[s].multiple},model:{value:t.form[o][n][e].remark.commonQueryCondition[s],callback:function(a){t.$set(t.form[o][n][e].remark.commonQueryCondition,s,a)},expression:"\n                                                    form[key1][key2][item2]\n                                                        .remark\n                                                        .commonQueryCondition[\n                                                        item3\n                                                    ]\n                                                "}})],1)})),e.remark.hasOwnProperty("dataHandleAuthority")?[a("v-select",{staticClass:"haveremark",staticStyle:{"min-width":"150px !important",height:"28px !important"},attrs:{label:"text",reduce:function(t){return t.value},options:e.remark.dataHandleAuthority.options,multiple:e.remark.dataHandleAuthority.multiple,placeholder:e.remark.dataHandleAuthority.placeholder,searchable:!1,"close-on-select":!e.remark.dataHandleAuthority.multiple},model:{value:t.form[o][n][e].remark.dataHandleAuthority,callback:function(a){t.$set(t.form[o][n][e].remark,"dataHandleAuthority",a)},expression:"\n                                                    form[key1][key2][item2]\n                                                        .remark\n                                                        .dataHandleAuthority\n                                                "}})]:t._e()]:t._e()]],2)],1)],1)})):"checkbox_switch"==e[0]?a("b-form-checkbox",{class:{wronginput:t.form.formcontentwrong},attrs:{switch:"",size:"lg"},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"depselect"==e[0]?a("b-form-select",{attrs:{options:t.selectOptions},on:{change:function(e){return t.depselectChange(e)}},model:{value:t.form.noumenonID,callback:function(e){t.$set(t.form,"noumenonID",e)},expression:"form.noumenonID"}}):"select"==e[0]?a("b-form-select",{attrs:{options:t.selectOptions},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):"number"==e[0]?a("b-form-input",{attrs:{type:"number",min:"0",step:"20"},model:{value:t.form[o],callback:function(e){t.$set(t.form,o,e)},expression:"form[key1]"}}):t._e()],2)]:"button"==o?[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.submit()}}},[t._v(t._s(e[1]))])],1)])]:t._e()],2)})),1)],1)}),mt=[],dt=(a("99af"),a("07ac"),a("53ca")),ut=a("2ef0"),pt={name:"systemForm",data:function(){return{form:{}}},created:function(){this.createFormData()},computed:Object(l["a"])({},Object(c["c"])({vforData:"systemform/get_vforData",selectOptions:"systemform/get_selectOptions",pageAccessConfig:"getlogin/get_pageAccessConfig",DEFAULT_pageAccess:"getlogin/get_DEFAULT_pageAccess",systemFormResponse:"systemform/get_systemFormResponse"})),watch:{systemFormResponse:{handler:function(t){var e=this;e.reset(),e.createFormData()}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({setcompletedData:"systemform/set_completedData"})),{},{customizer:function(t,e){if(_.isArray(t))return t.concat(e)},createFormData:function(){for(var t=this,e=JSON.parse(JSON.stringify(t.DEFAULT_pageAccess)),a=JSON.parse(JSON.stringify(t.vforData)),o={},n=0;n<Object.keys(a).length;n++)2==Object.values(a)[n].length?"accesscheckbox"==Object.values(a)[n][0]?"accessList"===Object.keys(a)[n]&&(o[Object.keys(a)[n]]=e):"checkbox_switch"==Object.values(a)[n][0]?o[Object.keys(a)[n]]=!1:"number"==Object.values(a)[n][0]?o[Object.keys(a)[n]]=0:o[Object.keys(a)[n]]="":3==Object.values(a)[n].length&&("accesscheckbox"==Object.values(a)[n][0]?"accessList"===Object.keys(a)[n]&&(Object(ut["mergeWith"])(e,Object.values(a)[n][2],t.customizer),o[Object.keys(a)[n]]=e):o[Object.keys(a)[n]]=Object.values(a)[n][2]);t.form=o},depselectChange:function(t){var e=this,a=JSON.parse(JSON.stringify(e.selectOptions)),o=a.map((function(t){return Object.values(t)})).filter((function(e,a){return e[1]==t}));Object(ut["mergeWith"])(e.form.accessList,o[0][2],e.customizer)},accessCBFatherClick:function(t,e){var a=this;e.hasOwnProperty("children")?Object.keys(e.children).map((function(o){e.children[o].authority=t,a.getThisAccessItem(t,e.children[o])})):(e.authority=t,a.getThisAccessItem(t,e))},accessCBChildrenClick:function(t,e,a){var o=this;e.hasOwnProperty("children")&&(t?e.authority=!0:(Object.keys(e.children).map((function(t){e.children[t].authority})),this.$nextTick((function(){var t=Object.keys(e.children).map((function(t){return e.children[t]})).filter((function(t,e){if(t.authority)return t.authority}));0===t.length&&(e.authority=!1)}))),o.getThisAccessItem(t,e.children[a]))},getThisAccessItem:function(t,e){t?e.hasOwnProperty("remark")&&e.remark.hasOwnProperty("dataHandleAuthority")&&(e.remark.dataHandleAuthority=["query"]):e.hasOwnProperty("remark")&&("object"===Object(dt["a"])(e.remark.commonQueryCondition.main)?e.remark.commonQueryCondition.main=[]:e.remark.commonQueryCondition.main=null,e.remark.commonQueryCondition.hasOwnProperty("secondary")&&("object"===Object(dt["a"])(e.remark.commonQueryCondition.secondary)?e.remark.commonQueryCondition.secondary=[]:e.remark.commonQueryCondition.secondary=null),e.remark.hasOwnProperty("dataHandleAuthority")&&(e.remark.dataHandleAuthority=[]))},submit:function(){var t=this;t.setcompletedData(t.form)},reset:function(){var t=this.$options.data();Object.assign(this.$data,t)}})},ft=pt,ht=(a("6770"),Object(b["a"])(ft,ct,mt,!1,null,"b9c21646",null)),gt=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commonTable"},[0!=t.tableDetail.items.length?a("b-table",{ref:"commonTable",staticClass:"mt-2",attrs:{id:"commonTable","sticky-header":"550px",responsive:"",hover:!t.tableSlotConfig.selectable,items:t.tableDetail.items,fields:t.tableDetail.fields,"head-variant":"light",selectable:t.tableSlotConfig.selectable,"select-mode":"multi","selected-variant":"success"},on:{"row-selected":t.onRowSelected},scopedSlots:t._u([t._l(t.tableSlotConfig.slotConfig,(function(e,o,n){return{key:t.getHeaderSlot(o),fn:function(s){return[a("div",{key:n,staticStyle:{position:"relative"}},[t._v(" "+t._s(s.label)+" "),e.hasOwnProperty("removeHeader")&&0==t.tableInWhichTab.index&&t.tableDetail.fields.length>2?a("div",{staticClass:"deletefilebtn",on:{click:function(e){return e.preventDefault(),t.removeHeaderFields(o)}}}):t._e()])]}}})),t._l(t.tableSlotConfig.slotConfig,(function(e,o,n){return{key:t.getCellSlot(o),fn:function(s){return[a("div",{key:String(s.item.seq)+"_"+String(n),class:{hide:null!=s.item.seq&&t.activeItemsSeq==s.item.seq}},[e.hasOwnProperty("conversiontable")?[t._v(" "+t._s(e.conversiontable[s.item[o]])+" ")]:e.hasOwnProperty("v-html")?[a("div",{domProps:{innerHTML:t._s(s.item[e.value])}})]:e.hasOwnProperty("download")?[""==s.item[e.value]?a("div",[t._v("無")]):t._l(s.item[e.value].split(","),(function(o,n){return a("div",{key:n,staticStyle:{display:"inline-block",position:"relative","margin-right":"15px","margin-bottom":"10px"}},[a("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[t._v(t._s(o))]),0==t.tableInWhichTab.index?a("div",{staticClass:"downloadfilebtn"},[a("b-icon",{attrs:{icon:"cloud-download-fill",scale:"1.5",target:"_blank"},on:{click:function(a){return t.download(o,s.item.path,e.download.location)}}})],1):t._e()],1)}))]:[t._v(" "+t._s(s.item[o][e.value])+" ")]],2),t.tableSlotConfig.hasOwnProperty("actionConfig")?[1==t.tableInWhichTab.index&&"self"==t.tableSlotConfig.actionConfig.edit.type?a("div",{key:String(s.item.seq)+"__"+String(n),class:{hide:null!=s.item.seq&&t.activeItemsSeq!=s.item.seq}},["number"==e.edit.type?a("b-form-input",{attrs:{type:"number",min:"0",step:"20"},model:{value:s.item[e.value],callback:function(a){t.$set(s.item,e.value,a)},expression:"row.item[data.value]"}}):"input"==e.edit.type?a("b-form-input",{staticClass:"input-text",attrs:{type:"text"},on:{click:function(e){return t.editLongData(s,o,!0)}},model:{value:s.item[e.value],callback:function(a){t.$set(s.item,e.value,a)},expression:"row.item[data.value]"}}):t._e()],1):t._e()]:t._e()]}}})),{key:"cell(Action)",fn:function(e){return[1==t.tableInWhichTab.index?["self"==t.tableSlotConfig.actionConfig.edit.type?[null!=e.item.seq&&t.activeItemsSeq!=e.item.seq?[a("b-button",{attrs:{disabled:null!=t.activeItemsSeq||!t.tableSlotConfig.actionConfig.edit.authority},on:{click:function(a){t.setactiveItemsSeq(e.item.seq),t.tempOldItemAction(!0,e.item)}}},[t._v("編輯")]),a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:null!=t.activeItemsSeq||!t.tableSlotConfig.actionConfig.del.authority,variant:"danger"},on:{click:function(a){return t.toggleDelModal(!0,e.item,t.tableSlotConfig.actionConfig.del)}}},[t._v("刪除")])]:null!=e.item.seq&&t.activeItemsSeq==e.item.seq?[a("b-button",{on:{click:function(a){return t.modAction(e.item,e.index,t.tableSlotConfig.actionConfig.edit.location)}}},[t._v("完成編輯")]),a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"light"},on:{click:function(a){t.setactiveItemsSeq(null),t.tempOldItemAction(!1,e.item)}}},[t._v("取消")])]:t._e()]:[a("b-button",{attrs:{disabled:!t.tableSlotConfig.actionConfig.edit.authority},on:{click:function(a){return t.modAction(e.item,e.index,t.tableSlotConfig.actionConfig.edit.location)}}},[t._v("編輯")]),a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"danger",disabled:!t.tableSlotConfig.actionConfig.del.authority},on:{click:function(a){return t.toggleDelModal(!0,e.item,t.tableSlotConfig.actionConfig.del)}}},[t._v("刪除")])]]:[t.tableSlotConfig.actionConfig.query.hasOwnProperty(t.tableDetail.which)?a("span",[a("b-button",{attrs:{disabled:0===t.tableDetail.children[e.item[t.tableDetail.which.toLowerCase()]],id:String(e.index)},on:{click:function(a){t.settableResponse({function:t.tableSlotConfig.actionConfig.query.location,params:{data:e.item[t.tableDetail.which.toLowerCase()]}})}}},[t._v(" "+t._s(t.tableSlotConfig.actionConfig.query[t.tableDetail.which].havedata)+" ")]),a("b-tooltip",{attrs:{target:String(e.index)}},[0===t.tableDetail.children[e.item[t.tableDetail.which.toLowerCase()]]?a("span",[t._v(t._s(t.tableSlotConfig.actionConfig.query[t.tableDetail.which].nodata))]):a("span",[t._v("共有"+t._s(t.tableDetail.children[e.item[t.tableDetail.which.toLowerCase()]])+"個")])])],1):a("b-button",{on:{click:function(e){return t.settableResponse({function:t.tableSlotConfig.actionConfig.query.location,params:{data:"backtrack"}})}}},[t._v(" 返回")])]]}}],null,!0)}):t._e(),t.tableSlotConfig.selectable?[a("div",{staticClass:"clearfix"},[a("b-button",{attrs:{size:"sm"},on:{click:t.selectAllRows}},[t._v("全選")]),a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"danger"},on:{click:t.clearSelected}},[t._v("取消全選")]),a("b-button",{staticClass:"float-right",attrs:{variant:"success"},on:{click:t.transferData}},[t._v(t._s(t.tableSlotConfig.selectlebel))])],1)]:t._e(),t.editActionModalShow?a("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("b-form-textarea",{ref:"editlongdata",attrs:{rows:"6","max-rows":"12"},model:{value:t.editActionItems.Data,callback:function(e){t.$set(t.editActionItems,"Data",e)},expression:"editActionItems.Data"}})],1)]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.editActionModalShow=!1,t.togglecommonModal(!1)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.editLongData(null,null,!1)}}},[t._v("確定")])],1)]},proxy:!0}],null,!1,1627839946)}):t._e(),t.delModalShow?a("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("確定要刪除嗎？")])])]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleDelModal(!1,null,null)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.delAction()}}},[t._v("確定刪除")])],1)]},proxy:!0}],null,!1,4058624439)}):t._e()],2)},vt=[],yt={name:"commonTable",data:function(){return{tempThisOldItem:{},editActionModalShow:!1,editActionItems:{seq:null,Data:"",which:""},delItem:{},delModalShow:!1,selected:[]}},mounted:function(){},components:{modal:y},computed:Object(l["a"])({},Object(c["c"])({tableDetail:"commontable/get_tableDetail",tableSlotConfig:"commontable/get_tableSlotConfig",tableInWhichTab:"commontable/get_tableInWhichTab",activeItemsSeq:"commontable/get_activeItemsSeq",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig"})),watch:{"tableInWhichTab.index":{handler:function(t){var e=this;this.$nextTick((function(){0!=e.tableDetail.items.length&&(e.$refs.commonTable.$el.scrollLeft=0===t?0:document.getElementById("commonTable").scrollWidth)}))}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({settableResponse:"commontable/set_tableResponse",setactiveItemsSeq:"commontable/set_activeItemsSeq",setcommonModalConfig:"usemodal/set_commonModalConfig",togglecommonModal:"usemodal/toggle_commonModal"})),{},{getHeaderSlot:function(t){return"head(".concat(t,")")},getCellSlot:function(t){return"cell(".concat(t,")")},tempOldItemAction:function(t,e){var a=this;t?Object.assign(a.tempThisOldItem,e):(Object.assign(e,a.tempThisOldItem),a.tempThisOldItem={})},editLongData:function(t,e,a){var o=this,n=this;if(a){var s=JSON.parse(JSON.stringify(n.DEFAULT_commonModalConfig));s.size="xl",s.hideModalHeader=!0,s.hideModalHeaderClose=!0,n.setcommonModalConfig(s),n.editActionItems.seq=t.item.seq,n.editActionItems.which=e,n.editActionItems.Data=n.replaceContentData(String(t.item[e]),!1)}else n.tableDetail.items.filter((function(t){if(t.seq==n.editActionItems.seq){var e=n.editActionItems.Data;e=n.replaceContentData(String(e),!0),t[n.editActionItems.which]=e}}));n.editActionModalShow=a,n.togglecommonModal(a),a&&setTimeout((function(){o.$nextTick((function(){return o.$refs.editlongdata.focus()}))}),0)},toggleDelModal:function(t,e,a){var o=this;if(t){var n=JSON.parse(JSON.stringify(o.DEFAULT_commonModalConfig));n.hideModalHeader=!0,n.hideModalHeaderClose=!0,o.setcommonModalConfig(n),o.delItem["data"]={},a.delfield.map((function(t){o.delItem["data"][t]=e[t]})),o.delItem["location"]=a.location}o.delModalShow=t,o.togglecommonModal(t)},download:function(t,e,a){var o=this;o.settableResponse({function:a,params:{data:t,data2:e}})},modAction:function(t,e,a){var o=this;o.settableResponse({function:a,params:{data:t,data2:e}})},delAction:function(){var t=this;t.settableResponse({function:t.delItem.location,params:{data:t.delItem.data}}),t.toggleDelModal(!1,null,null)},removeHeaderFields:function(t){var e=this;e.settableResponse({function:"removeHeaderFields",params:{data:t}})},replaceContentData:function(t,e){return e?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):t.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g," ")},onRowSelected:function(t){this.selected=t},selectAllRows:function(){this.$refs.commonTable.selectAllRows()},clearSelected:function(){this.$refs.commonTable.clearSelected()},transferData:function(){var t=this;t.settableResponse({function:"transferData",params:{data:t.selected}})}})},Dt=yt,St=(a("ee89"),Object(b["a"])(Dt,bt,vt,!1,null,"28397ac7",null)),kt=St.exports,xt={name:"Department",data:function(){return{tabIndex:0,fields:[{key:"depID",label:"部門編號",sortable:!0},{key:"depName",label:"部門名稱",sortable:!0},{key:"depInfo",label:"部門介紹",sortable:!0},{key:"Action",label:"編輯按鈕",sortable:!1}],items:[],modDepartmentModalShow:!1,delDepartmentModalShow:!1,collapseVisible:!1,modModalShow:!1,addModalShow:!1}},created:function(){this.SetSystemFormData(null),this.SetDepDetail(),this.SetCommonQueryData();var t=JSON.parse(JSON.stringify(this.DEFAULT_commonModalConfig));t.size="xl",t.modalClassFull=!0,this.setcommonModalConfig(t),this.settableSlotConfig({slotConfig:{depID:{value:"depID","v-html":!0},depName:{value:"depName","v-html":!0},depInfo:{value:"depInfo","v-html":!0}},selectable:!1,actionConfig:{edit:{authority:!0,type:"modal",location:"toggleModModal",goback:!0},del:{authority:!1}}})},mounted:function(){this.queryAgain()},components:{commonQuery:H,systemForm:gt,modal:y,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",systemFormCompletedData:"systemform/get_completedData",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),watch:{queryResponse:{handler:function(){var t=this;if(t.reset(["tabIndex"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.collapseVisible=!1,t.getDepList()}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}},tabIndex:{handler:function(t){this.reset(["tabIndex","items"]),0===t&&this.fields.splice(3,1),this.settableInWhichTab({index:t,which:"department"}),this.settableDetail({items:this.items,fields:this.fields})}},systemFormCompletedData:{handler:function(){var t=this,e=[];if(0!=Object.keys(t.systemFormCompletedData).length){if(""==t.systemFormCompletedData.depID&&e.push("部門編號尚未輸入"),t.systemFormCompletedData.accessList.report.authority&&(t.systemFormCompletedData.accessList.report.children.todolist.authority&&null===t.systemFormCompletedData.accessList.report.children.todolist.remark.commonQueryCondition.main&&e.push("權限:『待辦事項』需選擇指定部門"),t.systemFormCompletedData.accessList.report.children.weeklyreport.authority&&null===t.systemFormCompletedData.accessList.report.children.weeklyreport.remark.commonQueryCondition.main&&e.push("權限:『工作週報』需選擇指定部門"),t.systemFormCompletedData.accessList.report.children.meetingminutes.authority&&(0===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.commonQueryCondition.main.length&&e.push("權限:『會議記錄』需選擇指定查詢條件"),null===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.commonQueryCondition.secondary&&e.push("權限:『會議記錄』需選擇指定員工階級"),0===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.dataHandleAuthority.length?e.push("權限:『會議記錄』需選擇指定執行權限"):t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.dataHandleAuthority.includes("query")||e.push("權限:『會議記錄』- 指定執行權限至少要有查詢"))),0!=e.length)return t.setTimeOutAlertMsg(e),t.settimeoutalertModal(1200),void t.setSystemFormCompletedData({});t.addModalShow?t.DepAdd():t.DepMod()}}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosGetAction:"commonaxios/axiosGetAction",axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",setconditionOptions:"commonquery/set_conditionOptions",queryAgain:"commonquery/do_queryAgain",setvforData:"systemform/set_vforData",setsystemFormResponse:"systemform/set_systemFormResponse",setSystemFormCompletedData:"systemform/set_completedData",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab"})),{},{SetSystemFormData:function(t){var e=this,a={};e.modModalShow?(a["depID"]=["readonly","部門編號",t.depID],a["depName"]=["text","部門名稱",t.depName],a["depInfo"]=["text","部門介紹",t.depInfo],a["accessList"]=["accesscheckbox","部門權限",t.accessList],a["button"]=["Mod","修改"]):(a["depID"]=["text","部門編號"],a["depName"]=["text","部門名稱"],a["depInfo"]=["text","部門介紹"],a["accessList"]=["accesscheckbox","部門權限"],a["button"]=["Add","新增"]),a["textclass"]=!0,e.setvforData(a)},SetCommonQueryData:function(){var t=this,e="ALL",a=[{value:"depID",text:"部門編號"},{value:"depName",text:"部門名稱"},{value:"ALL",text:"全選"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,o.conversiontable={depID:"部門編號",depName:"部門名稱"},t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="department",t.setapiParams(n)},getDepList:function(){var t=this,e=[];t.queryResponse.forEach((function(t){var a={};a["depID"]=t["depID"],a["depName"]=t["depName"],a["depInfo"]=t["depInfo"],a["accessList"]=JSON.parse(t["accessList"]),e.push(a)})),t.items=e,0===t.tabIndex&&t.fields.splice(3,1),t.settableDetail({items:t.items,fields:t.fields,which:"department",children:{}})},SetDepDetail:function(){var t=this,e={url:"api/YS/1.0/my/CommonUse/TableData",urlparams:{table:"department"}},a=!1;t.axiosGetAction(e).then((function(){var e=t.axiosResult;if(200!=e.status)return a=!0,void t.setTimeOutAlertMsg(e.data);if("ok"===e.data["Response"]){for(var o=[],n=0;n<e.data["QueryTableData"].length;n++){var s={};s["text"]=e.data["QueryTableData"][n]["depName"],s["value"]=e.data["QueryTableData"][n]["depName"],o.push(s)}t.setconditionOptions(o)}else a=!0,t.setTimeOutAlertMsg(e.data["Response"])})).catch((function(e){a=!0,t.setTimeOutAlertMsg(e)})).finally((function(){a&&t.settimeoutalertModal()}))},toggleAddModal:function(t){var e=this;t&&e.SetSystemFormData(),e.togglecommonModal(t),e.addModalShow=t},toggleModModal:function(t){var e=this,a=JSON.parse(JSON.stringify(t.data));e.modModalShow=!0,e.SetSystemFormData(a),e.togglecommonModal(!0)},DepMod:function(){var t=this,e={url:"api/YS/1.0/my/department/update_Department"};e["postdata"]={depID:String(t.systemFormCompletedData.depID),depName:String(t.systemFormCompletedData.depName),depInfo:String(t.systemFormCompletedData.depInfo),accessList:t.systemFormCompletedData.accessList},t.axiosPatchAction(e).then((function(){t.setSystemFormCompletedData({});var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?(t.setsystemFormResponse(),t.setTimeOutAlertMsg("修改成功")):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),t.modModalShow=!1,t.togglecommonModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},DepAdd:function(){var t=this,e={url:"api/YS/1.0/my/department/registerDep"};e["postdata"]={depID:String(t.systemFormCompletedData.depID),depName:String(t.systemFormCompletedData.depName),noumenonType:"",noumenonID:"",accessList:t.systemFormCompletedData.accessList,depInfo:String(t.systemFormCompletedData.depInfo),creatorID:String(t.loginData.account),creDB:"no"},t.axiosPostAction(e).then((function(){t.setSystemFormCompletedData({});var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?(t.setsystemFormResponse(),t.setTimeOutAlertMsg("新增成功")):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),t.toggleAddModal(!1),t.SetSystemFormData(null),setTimeout((function(){t.queryAgain()}),1200)}))},resetSystemForm:function(){var t=this;t.SetSystemFormData(null),t.setsystemFormResponse(),t.setSystemFormCompletedData({})},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},_t=xt,Mt=(a("94af"),Object(b["a"])(_t,rt,lt,!1,null,"6367faa6",null)),Tt=Mt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Account container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("帳號管理")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"9"}},[a("div",{staticStyle:{opacity:"0.5"}},[t.collapseVisible?[a("b-icon",{attrs:{icon:"arrows-collapse",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]:[a("b-icon",{attrs:{icon:"arrows-expand",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]],2)])],1),a("b-collapse",{model:{value:t.collapseVisible,callback:function(e){t.collapseVisible=e},expression:"collapseVisible"}},[a("b-row",[a("b-col",{attrs:{sm:"10"}},[a("commonQuery")],1),a("b-col",{attrs:{sm:"2"}},[a("div",{staticClass:"text-right"},[a("b-button",{attrs:{pill:"",variant:"success"},on:{click:function(e){return t.toggleAddModal(!0)}}},[t._v("新增")])],1)])],1)],1),a("b-tabs",{model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"查詢",active:""}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("commonTable")],1),a("b-tab",{attrs:{title:"編輯"}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("commonTable")],1)],1),t.addModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",{staticStyle:{margin:"0 auto"}},[t._v("新增帳號")])]},proxy:!0},{key:"default",fn:function(){return[a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.toggleAddModal(!1),t.resetSystemForm()}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,2364642601)}):t._e(),t.modModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",{staticStyle:{margin:"0 auto"}},[t._v("帳號修改")])]},proxy:!0},{key:"default",fn:function(){return[a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.modModalShow=!1,t.togglecommonModal(!1),t.resetSystemForm()}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,634959427)}):t._e()],1)},wt=[],At={name:"Account",data:function(){return{tabIndex:0,fields:[{key:"uID",label:"帳號",sortable:!0},{key:"uName",label:"姓名",sortable:!0},{key:"uInfo",label:"使用者介紹",sortable:!0},{key:"noumenonID",label:"部門",sortable:!0},{key:"email",label:"公司信箱",sortable:!1},{key:"Action",label:"編輯按鈕",sortable:!1}],items:[],depDetail:[],collapseVisible:!1,modModalShow:!1,addModalShow:!1}},created:function(){this.SetSystemFormSelectOptionsFunc(),this.SetCommonQueryData();var t=JSON.parse(JSON.stringify(this.DEFAULT_commonModalConfig));t.size="xl",t.modalClassFull=!0,this.setcommonModalConfig(t)},mounted:function(){this.queryAgain()},components:{commonQuery:H,systemForm:gt,modal:y,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",systemFormCompletedData:"systemform/get_completedData",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),watch:{queryResponse:{handler:function(){var t=this;if(t.reset(["tabIndex","depDetail"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.collapseVisible=!1,t.getAccountList()}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}},tabIndex:{handler:function(t){this.reset(["tabIndex","depDetail","items"]),0===t&&this.fields.splice(5,1),this.settableInWhichTab({index:t,which:"user"}),this.settableDetail({items:this.items,fields:this.fields})}},systemFormCompletedData:{handler:function(){var t=this,e=[],a=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(0!=Object.keys(t.systemFormCompletedData).length){if(""==t.systemFormCompletedData.uID&&e.push("帳號尚未輸入"),""==t.systemFormCompletedData.noumenonID&&e.push("部門尚未選擇"),""==t.systemFormCompletedData.pwd&&e.push("密碼尚未輸入"),a.test(t.systemFormCompletedData.email)||e.push("公司信箱尚未輸入或格式錯誤"),t.systemFormCompletedData.accessList.report.authority&&(t.systemFormCompletedData.accessList.report.children.todolist.authority&&null===t.systemFormCompletedData.accessList.report.children.todolist.remark.commonQueryCondition.main&&e.push("權限:『待辦事項』需選擇指定部門"),t.systemFormCompletedData.accessList.report.children.weeklyreport.authority&&null===t.systemFormCompletedData.accessList.report.children.weeklyreport.remark.commonQueryCondition.main&&e.push("權限:『工作週報』需選擇指定部門"),t.systemFormCompletedData.accessList.report.children.meetingminutes.authority&&(0===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.commonQueryCondition.main.length&&e.push("權限:『會議記錄』需選擇指定查詢條件"),null===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.commonQueryCondition.secondary&&e.push("權限:『會議記錄』需選擇指定員工階級"),0===t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.dataHandleAuthority.length?e.push("權限:『會議記錄』需選擇指定執行權限"):t.systemFormCompletedData.accessList.report.children.meetingminutes.remark.dataHandleAuthority.includes("query")||e.push("權限:『會議記錄』- 指定執行權限至少要有查詢"))),0!=e.length)return t.setTimeOutAlertMsg(e),t.settimeoutalertModal(1200),void t.setSystemFormCompletedData({});t.togglealertModal(!0),t.addModalShow?t.AccountAdd():t.AccountMod()}}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosGetAction:"commonaxios/axiosGetAction",axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",axiosDeleteAction:"commonaxios/axiosDeleteAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",togglealertModal:"alertmodal/toggle_alertModal",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",setconditionOptions:"commonquery/set_conditionOptions",queryAgain:"commonquery/do_queryAgain",setvforData:"systemform/set_vforData",setsystemFormResponse:"systemform/set_systemFormResponse",setSystemFormCompletedData:"systemform/set_completedData",setSystemFormSelectOptions:"systemform/set_selectOptions",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab"})),{},{SetSystemFormData:function(t){var e=this,a={};e.modModalShow?(a["uID"]=["readonly","帳號",t.uID],a["pwd"]=["text","密碼",t.pwd],a["uName"]=["text","姓名",t.uName],a["uInfo"]=["text","介紹",t.uInfo],a["email"]=["text","公司信箱",t.email],a["noumenonID"]=["depselect","部門",t.noumenonID],a["accessList"]=["accesscheckbox","使用者權限",t.accessList],a["button"]=["Mod","修改"]):(a["uID"]=["text","帳號"],a["pwd"]=["text","密碼"],a["uName"]=["text","姓名"],a["uInfo"]=["text","介紹"],a["email"]=["email","公司信箱"],a["noumenonID"]=["depselect","部門"],a["accessList"]=["accesscheckbox","使用者權限"],a["button"]=["Add","新增"]),a["textclass"]=!0,this.setvforData(a)},SetSystemFormSelectOptionsFunc:function(){var t=this,e={url:"api/YS/1.0/my/CommonUse/TableData",urlparams:{table:"department"}},a=!1;t.axiosGetAction(e).then((function(){var e=t.axiosResult,o=[];if(200!=e.status)return a=!0,void t.setTimeOutAlertMsg(e.data);if("ok"===e.data["Response"]){var n=[];n[0]={};for(var s=0;s<e.data["QueryTableData"].length;s++){var i={};n[0][e.data["QueryTableData"][s]["depID"]]=e.data["QueryTableData"][s]["depName"],i["text"]=e.data["QueryTableData"][s]["depName"],i["value"]=e.data["QueryTableData"][s]["depID"],i["accessList"]=JSON.parse(e.data["QueryTableData"][s]["accessList"]),o.push(i)}t.setSystemFormSelectOptions(o),t.depDetail=n,t.setconditionOptions(o),t.setTableSlotConfig()}else a=!0,t.setTimeOutAlertMsg(e.data["Response"])})).catch((function(e){a=!0,t.setTimeOutAlertMsg(e)})).finally((function(){a&&t.settimeoutalertModal()}))},SetCommonQueryData:function(){var t=this,e="ALL",a=[{value:"uID",text:"帳號"},{value:"uName",text:"姓名"},{value:"noumenonID",text:"部門編號"},{value:"depName",text:"部門名稱"},{value:"ALL",text:"全選"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,o.conversiontable={noumenonID:"部門編號",depName:"部門名稱",uID:"帳號",uName:"姓名"},t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="user",t.setapiParams(n)},setTableSlotConfig:function(){this.settableSlotConfig({slotConfig:{uID:{value:"uID","v-html":!0},uName:{value:"uName","v-html":!0},uInfo:{value:"uInfo","v-html":!0},email:{value:"email","v-html":!0},noumenonID:{value:"uID",conversiontable:this.depDetail[0]}},selectable:!1,actionConfig:{edit:{authority:!0,type:"modal",location:"toggleModModal",goback:!0},del:{authority:!0,location:"AccountDel",delfield:["uID"]}}})},getAccountList:function(){var t=this,e=[];t.queryResponse.forEach((function(t){var a={};a["uID"]=t["uID"],a["uName"]=t["uName"],a["uInfo"]=t["uInfo"],a["email"]=t["email"],a["noumenonID"]=t["noumenonID"],a["accessList"]=JSON.parse(t["accessList"]),e.push(a)})),t.items=e,0===t.tabIndex&&t.fields.splice(5,1),t.settableDetail({items:t.items,fields:t.fields,which:"user",children:{}})},toggleAddModal:function(t){var e=this;if(t){var a=JSON.parse(JSON.stringify(this.DEFAULT_commonModalConfig));a.size="xl",a.modalClassFull=!0,e.setcommonModalConfig(a),e.SetSystemFormData()}e.togglecommonModal(t),e.addModalShow=t},toggleModModal:function(t){var e=this,a=JSON.parse(JSON.stringify(this.DEFAULT_commonModalConfig));a.size="xl",a.modalClassFull=!0,this.setcommonModalConfig(a);var o=JSON.parse(JSON.stringify(t.data)),n={url:"api/YS/1.0/my/CommonUse/Interval/user"};n["urlparams"]={attr:"uID",valueStart:o.uID,valueEnd:o.uID};var s=!1;e.axiosGetAction(n).then((function(){var t=e.axiosResult;if(200!=t.status)return s=!0,void e.setTimeOutAlertMsg(t.data);if("ok"===t.data["Response"]){var a=t.data["QueryTableData"][0].pwd;o["pwd"]=a}else s=!0,e.setTimeOutAlertMsg(t.data["Response"]);e.modModalShow=!0,e.SetSystemFormData(o),e.togglecommonModal(!0)})).catch((function(t){s=!0,e.setTimeOutAlertMsg(t)})).finally((function(){s&&e.settimeoutalertModal()}))},AccountMod:function(){var t=this,e={url:"api/YS/1.0/my/user/update_User"};e["postdata"]={old_uID:String(t.systemFormCompletedData.uID),new_uID:String(t.systemFormCompletedData.uID),pwd:t.systemFormCompletedData.pwd,uName:String(t.systemFormCompletedData.uName),uInfo:String(t.systemFormCompletedData.uInfo),email:String(t.systemFormCompletedData.email),noumenonType:"dep",noumenonID:String(t.systemFormCompletedData.noumenonID),accessList:t.systemFormCompletedData.accessList,creatorID:String(t.loginData.account)};var a=!1;t.axiosPatchAction(e).then((function(){t.togglealertModal(!1),t.setSystemFormCompletedData({});var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?(t.setsystemFormResponse(),t.setTimeOutAlertMsg("修改成功"),a=!0):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),t.modModalShow=!1,t.togglecommonModal(!1),a&&setTimeout((function(){t.queryAgain()}),1200)}))},AccountAdd:function(){var t=this,e={url:"api/YS/1.0/my/user/reg_User"};e["postdata"]={uID:String(t.systemFormCompletedData.uID),pwd:t.systemFormCompletedData.pwd,uName:String(t.systemFormCompletedData.uName),uInfo:String(t.systemFormCompletedData.uInfo),email:String(t.systemFormCompletedData.email),noumenonType:"dep",noumenonID:String(t.systemFormCompletedData.noumenonID),accessList:t.systemFormCompletedData.accessList,creatorID:String(t.loginData.account)};var a=!1;t.axiosPostAction(e).then((function(){t.togglealertModal(!1);var e=t.axiosResult;t.setSystemFormCompletedData({}),200==e.status?"ok"===e.data["Response"]?(t.setsystemFormResponse(),t.setTimeOutAlertMsg("新增成功"),a=!0):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),t.toggleAddModal(!1),t.SetSystemFormData(null),a&&setTimeout((function(){t.queryAgain()}),1200)}))},AccountDel:function(t){var e=this,a={url:"api/YS/1.0/my/user/delete_User"};a["postdata"]={uID:String(t.data.uID)},e.togglealertModal(!0);var o=!1;e.axiosDeleteAction(a).then((function(){var t=e.axiosResult;e.togglealertModal(!1),200==t.status?"ok"===t.data["Response"]?(e.setTimeOutAlertMsg("刪除成功"),o=!0):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.settimeoutalertModal(),e.SetSystemFormData(null),o&&setTimeout((function(){e.queryAgain()}),1200)}))},resetSystemForm:function(){var t=this;t.SetSystemFormData(null),t.setsystemFormResponse(),t.setSystemFormCompletedData({})},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},Ct=At,It=(a("a340"),Object(b["a"])(Ct,Ot,wt,!1,null,"2f418749",null)),Ft=It.exports,qt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"TodoList"},[o("div",{staticClass:"mb-2",attrs:{id:"bluebg"}},[o("b-row",[o("b-col",{attrs:{sm:"1"}},[o("img",{attrs:{src:a("bfa0")}})]),o("b-col",{staticClass:"title",attrs:{sm:"8"}},[t._v("待辦事項清單")]),o("b-col",{attrs:{sm:"3"}},[o("p",{staticClass:"text-right",staticStyle:{color:"oldlace","font-size":"1.05rem",margin:"5px 10px 0 0"}},[t._v(" "+t._s(t.now)+" ")])])],1)],1),o("div",{staticClass:"text-right",staticStyle:{opacity:"0.5"}},[t.collapseVisible?[o("b-icon",{attrs:{icon:"arrows-collapse",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]:[o("b-icon",{attrs:{icon:"arrows-expand",scale:"1.5"},on:{click:function(e){t.collapseVisible=!t.collapseVisible}}})]],2),o("b-collapse",{staticClass:"mt-2",model:{value:t.collapseVisible,callback:function(e){t.collapseVisible=e},expression:"collapseVisible"}},[o("b-row",{staticClass:"mb-3 mt-3"},[o("b-col",{attrs:{sm:"10"}},[o("commonQuery")],1),o("b-col",{attrs:{sm:"2"}},[o("b-table-simple",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{small:"",responsive:"",borderless:""}},[o("b-tbody",[o("b-tr",[o("b-td",{staticClass:"text-right",staticStyle:{width:"100px"},attrs:{variant:"dark"}},[t._v("今天到期：")]),o("b-td",{staticStyle:{width:"100px"},attrs:{variant:"secondary"}},[t._v(t._s(t.dueTodayNum))])],1),o("b-tr",[o("b-td",{staticClass:"text-right",staticStyle:{width:"100px"},attrs:{variant:"dark"}},[t._v("逾期：")]),o("b-td",{staticStyle:{width:"100px"},attrs:{variant:"secondary"}},[t._v(t._s(t.overDueNum))])],1)],1)],1),o("div",{staticClass:"text-right"},[o("b-button",{attrs:{pill:"",variant:"success"},on:{click:function(e){t.addTaskModalShow=!t.addTaskModalShow,t.addTaskDetail.schedDate.time=t.nowFormat,t.addTaskDetail.startDate.time=t.nowFormat}}},[t._v("新增")]),o("b-button",{staticClass:"ml-2",attrs:{pill:""},on:{click:function(e){t.exportModalShow=!t.exportModalShow}}},[t._v("匯出")]),o("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"warning",id:"transfer"},on:{click:function(e){return t.transferDataModal(!0)}}},[t._v("轉移")]),o("b-tooltip",{attrs:{target:"transfer",variant:"warning"}},[o("strong",[t._v("將完成的待辦事項"),o("br"),t._v("轉移至工作週報")])])],1)],1)],1)],1),0==t.items.length?o("h3",[t._v("查無資料")]):t._e(),0!=t.items.length?o("b-table",{staticClass:"mt-2",attrs:{"sticky-header":"550px",responsive:"",items:t.items,fields:t.fields,"head-variant":"light","tbody-tr-attr":t.rowClass},scopedSlots:t._u([{key:"cell(status)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status}},[o("b-form-checkbox",{attrs:{disabled:""},model:{value:e.item.status,callback:function(a){t.$set(e.item,"status",a)},expression:"row.item.status"}}),e.item.status?o("p",[t._v(" 完成日期("+t._s(e.item.completedDate)+") ")]):t._e()],1),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("b-form-checkbox",{attrs:{size:"lg"},model:{value:e.item.status,callback:function(a){t.$set(e.item,"status",a)},expression:"row.item.status"}})],1)]}},{key:"cell(taskInfo)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status},domProps:{innerHTML:t._s(e.item.taskInfo)}}),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("b-form-input",{staticClass:"input-text",attrs:{type:"text"},on:{click:function(a){return t.editLongData(e,"taskInfo",!0)}},model:{value:e.item.taskInfo,callback:function(a){t.$set(e.item,"taskInfo",a)},expression:"row.item.taskInfo"}})],1)]}},{key:"cell(taskDetail)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status},domProps:{innerHTML:t._s(e.item.taskDetail)}}),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("b-form-input",{staticClass:"input-text",attrs:{type:"text"},on:{click:function(a){return t.editLongData(e,"taskDetail",!0)}},model:{value:e.item.taskDetail,callback:function(a){t.$set(e.item,"taskDetail",a)},expression:"row.item.taskDetail"}})],1)]}},{key:"cell(schedDate)",fn:function(e){return[""==e.item.schedDate.time&&t.activeItemsSeq!=e.item.seq?[t._v("尚未指定")]:[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status}},[t._v(" "+t._s(e.item.schedDate.time)+" ")])],o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("datepicker",{attrs:{date:e.item.schedDate,option:t.datepickerOptions}})],1)]}},{key:"cell(priority)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status}},[t._v(" "+t._s(t.priorityConfig[e.item.priority])+" ")]),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("b-form-select",{attrs:{options:t.priorityOptions},model:{value:e.item.priority,callback:function(a){t.$set(e.item,"priority",a)},expression:"row.item.priority"}})],1)]}},{key:"cell(assignTo)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status}},[t._v(" "+t._s(t.staffIDName[e.item.assignTo])+" ")]),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("b-form-select",{attrs:{options:t.getStaffOptions},model:{value:e.item.assignTo,callback:function(a){t.$set(e.item,"assignTo",a)},expression:"row.item.assignTo"}})],1)]}},{key:"cell(startDate)",fn:function(e){return[o("div",{class:{hide:t.activeItemsSeq==e.item.seq,completedTask:e.item.status}},[t._v(" "+t._s(e.item.startDate.time)+" ")]),o("div",{class:{hide:t.activeItemsSeq!=e.item.seq}},[o("datepicker",{attrs:{date:e.item.startDate,option:t.datepickerOptions}})],1)]}},{key:"cell(creatorID)",fn:function(e){return[o("div",{class:{completedTask:e.item.status}},[t._v(" "+t._s(t.staffIDName[e.item.creatorID])+" ")])]}},{key:"cell(Action)",fn:function(e){return[t.activeItemsSeq!=e.item.seq?[null!=t.activeItemsSeq||e.item.status?o("b-button",{attrs:{disabled:""}},[t._v("編輯")]):o("b-button",{on:{click:function(a){t.activeItemsSeq=e.item.seq,t.tempOldItemAction(!0,e.item)}}},[t._v("編輯")]),null!=t.activeItemsSeq||e.item.status?o("b-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:"",variant:"danger"}},[t._v("刪除")]):o("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"danger"},on:{click:function(a){t.delTaskModalShow=!t.delTaskModalShow,t.delItemSeq=e.item.seq}}},[t._v("刪除")])]:t.activeItemsSeq==e.item.seq?[o("b-button",{on:{click:function(a){return t.modTask(e.item)}}},[t._v("完成編輯")]),o("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"light"},on:{click:function(a){t.activeItemsSeq=null,t.tempOldItemAction(!1,e.item)}}},[t._v("取消")])]:t._e()]}}],null,!1,432914277)}):t._e(),o("b-modal",{attrs:{centered:"","hide-footer":"",size:"lg","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[o("h5",[t._v("新增待辦事項")])]},proxy:!0},{key:"default",fn:function(){return[o("b-form",{on:{submit:t.addTask}},[o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"input-default"}},[t._v("發起日:")])]),o("b-col",{attrs:{sm:"10"}},[o("datepicker",{attrs:{date:t.addTaskDetail.startDate,option:t.datepickerOptions}})],1)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"input-default"}},[t._v("描述:")])]),o("b-col",{class:{"form-group--error":t.$v.addTaskDetail.taskInfo.value.$error},attrs:{sm:"10"}},[o("b-form-input",{staticClass:"input-title",attrs:{type:"text"},model:{value:t.$v.addTaskDetail.taskInfo.$model.value,callback:function(e){t.$set(t.$v.addTaskDetail.taskInfo.$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                $v.addTaskDetail.taskInfo.$model.value\n                            "}}),t.check_required(t.$v.addTaskDetail.taskInfo.value.required,t.$v.addTaskDetail.taskInfo.$model)?[o("div",{staticClass:"error"},[t._v("Is required")])]:t._e()],2)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"input-default"}},[t._v("執行細項:")])]),o("b-col",{attrs:{sm:"10"}},[o("b-form-input",{staticClass:"input-title",attrs:{type:"text"},model:{value:t.addTaskDetail.taskDetail,callback:function(e){t.$set(t.addTaskDetail,"taskDetail","string"===typeof e?e.trim():e)},expression:"addTaskDetail.taskDetail"}})],1)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"input-default"}},[t._v("預計完成日期:")])]),o("b-col",{attrs:{sm:"10"}},[o("datepicker",{attrs:{date:t.addTaskDetail.schedDate,option:t.datepickerOptions}})],1)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"textarea-large"}},[t._v("優先順序:")])]),o("b-col",{class:{"form-group--error":t.$v.addTaskDetail.priority.value.$error},attrs:{sm:"5"}},[o("b-form-select",{attrs:{options:t.priorityOptions,size:"sm"},scopedSlots:t._u([{key:"first",fn:function(){return[o("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an option --")])]},proxy:!0}]),model:{value:t.$v.addTaskDetail.priority.$model.value,callback:function(e){t.$set(t.$v.addTaskDetail.priority.$model,"value",e)},expression:"$v.addTaskDetail.priority.$model.value"}}),t.check_required(t.$v.addTaskDetail.priority.value.required,t.$v.addTaskDetail.priority.$model)?[o("div",{staticClass:"error"},[t._v("Is required")])]:t._e()],2)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"textarea-large"}},[t._v("指派對象:")])]),o("b-col",{class:{"form-group--error":t.$v.addTaskDetail.assignTo.value.$error},attrs:{sm:"5"}},[o("b-form-select",{attrs:{options:t.getStaffOptions,size:"sm"},scopedSlots:t._u([{key:"first",fn:function(){return[o("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an option --")])]},proxy:!0}]),model:{value:t.$v.addTaskDetail.assignTo.$model.value,callback:function(e){t.$set(t.$v.addTaskDetail.assignTo.$model,"value",e)},expression:"$v.addTaskDetail.assignTo.$model.value"}}),t.check_required(t.$v.addTaskDetail.assignTo.value.required,t.$v.addTaskDetail.assignTo.$model)?[o("div",{staticClass:"error"},[t._v("Is required")])]:t._e()],2)],1),o("b-row",{staticClass:"my-4"},[o("b-col",{attrs:{sm:"2"}},[o("label",{attrs:{for:"textarea-large"}},[t._v("Email提醒:")])]),o("b-col",{attrs:{sm:"10"}},[o("b-form-checkbox",{attrs:{switch:"",disabled:""},model:{value:t.addTaskDetail.email,callback:function(e){t.$set(t.addTaskDetail,"email",e)},expression:"addTaskDetail.email"}})],1)],1),o("b-row",[o("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.addTaskClose()}}},[t._v("Close")])],1),o("div",{staticClass:"text-right"},[o("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"5px"},attrs:{type:"submit",variant:"success",size:"sm"},on:{click:t.$v.addTaskDetail.$touch}},[t._v("送出")])],1)])],1)],1)]},proxy:!0}]),model:{value:t.addTaskModalShow,callback:function(e){t.addTaskModalShow=e},expression:"addTaskModalShow"}}),o("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"default",fn:function(){return[o("div",{staticClass:"d-block text-center"},[o("h3",[t._v("確定要刪除此事項嗎？")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.delTaskModalShow=!t.delTaskModalShow}}},[t._v("Close")]),o("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.delTask()}}},[t._v("確定刪除")])],1)]},proxy:!0}]),model:{value:t.delTaskModalShow,callback:function(e){t.delTaskModalShow=e},expression:"delTaskModalShow"}}),o("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",size:"sm"},scopedSlots:t._u([{key:"default",fn:function(){return[o("div",{staticClass:"d-block text-center"},[o("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"success"},on:{click:function(e){return t.exportfile("CSV")}}},[t._v("匯出CSV")]),o("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"warning",disabled:t.ttfStatus},on:{click:function(e){return t.exportfile("PDF")}}},[t._v("匯出PDF")])],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.exportModalShow=!t.exportModalShow}}},[t._v("Close")])],1)]},proxy:!0}]),model:{value:t.exportModalShow,callback:function(e){t.exportModalShow=e},expression:"exportModalShow"}}),t.transferDataModalShow?o("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[o("h5",{staticStyle:{margin:"0 auto"}},[t._v("轉移資料")])]},proxy:!0},{key:"default",fn:function(){return[o("commonTable")]},proxy:!0},{key:"modalfooter",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.transferDataModal(!1)}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,3487122536)}):t._e(),t.editActionModalShow?o("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[o("div",{staticClass:"d-block text-center"},[o("b-form-textarea",{ref:"editlongdata",attrs:{rows:"6","max-rows":"12"},model:{value:t.editActionItems.Data,callback:function(e){t.$set(t.editActionItems,"Data",e)},expression:"editActionItems.Data"}})],1)]},proxy:!0},{key:"modalfooter",fn:function(){return[o("div",{staticClass:"w-100"},[o("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.editActionModalShow=!t.editActionModalShow}}},[t._v("Close")]),o("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.editLongData(null,null,!1)}}},[t._v("確定")])],1)]},proxy:!0}],null,!1,3747053822)}):t._e(),o("exportFile")],1)},Pt=[],jt=(a("96cf"),a("1da1")),Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"export"})},Rt=[],Et=a("9b82"),$t=a.n(Et),Nt=(a("0da4"),{name:"export",data:function(){return{isInit:!0,exportStart:"",exportEnd:"",exportCost:"",exportStatus:!1}},computed:Object(l["a"])({},Object(c["c"])({thisautoTable:"exportfile/get_autoTable",exportModalShow:"exportfile/get_exportModalShow",autoTableStatus:"exportfile/get_autoTableStatus"})),watch:{thisautoTable:{handler:function(){var t=this;"PDF"==t.thisautoTable.exportfiletype?(t.exportStatus||(t.exportStart=new Date),t.exportStatus=!0,t.exportPDF()):t.exportCSV()}}},mounted:function(){this.createScriptMSJHcdn()},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({setttfStatus:"exportfile/set_ttfStatus",seterrorFormat:"exportfile/set_errorFormat",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",togglealertModal:"alertmodal/toggle_alertModal"})),{},{createScriptMSJHcdn:function(){var t=this,e=document.createElement("script");e.src="./font/msjh.js",document.getElementsByClassName("export")[0].appendChild(e),setTimeout((function(){t.setttfStatus(!1)}),8e3)},exportPDF:function(){var t=this;try{t.isInit&&($t.a.API.events.push(["addFonts",callAddFont]),t.isInit=!1);var e=new $t.a("p","pt");e.setFont("msjh","normal");e.internal.pageSize.height||e.internal.pageSize.getHeight();var a=e.internal.pageSize.width||e.internal.pageSize.getWidth();t.seterrorFormat([]),e.text(t.thisautoTable.text[0],a/2,30,"center"),e.setFontSize(10),e.text(t.thisautoTable.text[1],a-10,30,"right");var o=e.autoTable({theme:t.thisautoTable.theme,body:t.thisautoTable.body,showHead:"firstPage",columns:t.thisautoTable.columns,columnStyles:t.thisautoTable.columnStyles,headStyles:t.thisautoTable.headStyles,margin:40});Array.isArray(o)?t.seterrorFormat(o):t.autoTableStatus&&(e.save(t.thisautoTable.exportfilename+".pdf"),t.exportStatus=!1,t.togglealertModal(!1))}catch(n){return t.setTimeOutAlertMsg("中文字體尚未加載完成，請稍後再匯出PDF"),t.settimeoutalertModal(1200),void t.togglealertModal(!1)}finally{t.exportEnd=new Date,t.exportCost=Number(t.exportEnd)-Number(t.exportStart)}},exportCSV:function(){var t=this,e=t.thisautoTable.body.map((function(t){return t.join(",")})).join("\n"),a=document.createElement("a");a.setAttribute("href","data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURI(e)),a.style="visibility:hidden",a.download=t.thisautoTable.exportfilename+".csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})}),Ut=Nt,zt=Object(b["a"])(Ut,Lt,Rt,!1,null,null,null),Qt=zt.exports,Bt=(a("24f8"),N.a.create({baseURL:"https://yishan-paas.herokuapp.com/"})),Jt={send:function(t){return new Promise((function(e,a){JSON.stringify(t);Jt.ajaxPost("api/PaaS/1.0/email/todoListSendEmails?uid=@YS@PaaS",t,(function(t){e(t)}),(function(t){a(t)}))}))},ajaxPost:function(t,e,o,n){var s=this;return Object(jt["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Bt.post(t,e,{httpsAgent:new a("24f8").Agent({rejectUnauthorized:!1})}).then(function(t){o(t.data)}.bind(s)).catch((function(t){n(t)}));case 2:case"end":return i.stop()}}),i)})))()},ajax:function(t,e){var a=Jt.createCORSRequest("GET",t);a.onload=function(){var t=a.responseText;null!=e&&e(t)},a.send()},createCORSRequest:function(t,e){var a=new XMLHttpRequest;return"withCredentials"in a?a.open(t,e,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest).open(t,e):a=null,a}},Vt=Jt,Ht={name:"TodoList",data:function(){return{now:"",nowFormat:"",thisweekday:[],dueTodayNum:0,overDueNum:0,fields:[{key:"status",label:"完成",sortable:!0,tdClass:"w100px",thClass:"w100px"},{key:"taskInfo",label:"描述",sortable:!1},{key:"schedDate",label:"預計完成日期",sortable:!0},{key:"priority",label:"優先順序",sortable:!0,tdClass:"w100px",thClass:"w100px"},{key:"assignTo",label:"指派對象",sortable:!0,tdClass:"w100px",thClass:"w100px"},{key:"taskDetail",label:"執行細項",sortable:!1},{key:"startDate",label:"發起日",sortable:!0},{key:"creatorID",label:"發起人",sortable:!0,tdClass:"w100px",thClass:"w100px"},{key:"Action",label:"編輯按鈕",sortable:!1}],items:[],activeItemsSeq:null,tempThisOldItem:{status:null,completedDate:null,taskInfo:null,taskDetail:null,schedDate:{time:null},priority:null,assignTo:null,startDate:{time:null}},delItemSeq:null,datepickerOptions:{type:"day",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD",placeholder:"",inputStyle:{display:"inline-block",padding:"5px","line-height":"22px","font-size":"16px","text-align":"center",border:"2px solid #fff","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.2)","border-radius":"2px",color:"#5F5F5F",width:"150px"},color:{header:"#ccc",headerText:"#f00"},overlayOpacity:.5,dismissible:!0},depConfig:{1001:"資訊通訊部",1002:"系統研發部",1003:"平台部",1020:"智能製造事業處"},priorityOptions:[{value:"low",text:"低"},{value:"medium",text:"中"},{value:"hight",text:"高"}],priorityConfig:{low:"低",medium:"中",hight:"高"},addTaskModalShow:!1,addTaskDetail:{taskInfo:{key:"taskInfo",value:null,invalid:!1},taskDetail:"",schedDate:{time:""},startDate:{time:""},priority:{key:"priority",value:null,invalid:!1},assignTo:{key:"assignTo",value:null,invalid:!1},email:!1},getStaffOptions:[],staffIDName:{},staffIDEmail:{},depStaffRelation:{},delTaskModalShow:!1,exportModalShow:!1,collapseVisible:!0,transferDataModalShow:!1,editActionModalShow:!1,editActionItems:{seq:null,Data:"",which:""}}},mixins:[tt["validationMixin"]],validations:function(){var t={addTaskDetail:{taskInfo:{value:{required:et["required"]}},priority:{value:{required:et["required"]}},assignTo:{value:{required:et["required"]}}}};return t},components:{modal:y,datepicker:Q["a"],commonQuery:H,exportFile:Qt,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({alertModalShow:"alertmodal/get_alertModalShow",partitionStatus:"home/get_getpartitionStatus",loginData:"getlogin/get_loginData",axiosResult:"commonaxios/get_axiosResult",pageAccess:"getlogin/get_pageAccess",queryResponse:"commonquery/get_queryResponse",thisQueryTimeInterval:"commonquery/get_thisQueryTimeInterval",inputData:"commonquery/get_inputData",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",ttfStatus:"exportfile/get_ttfStatus",getDate:"getdate/get_Date",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse",contentData:"adjustdata/get_contentData"})),created:function(){var t=this;t.now=t.getDate.now,t.nowFormat=t.getDate.nowFormat,t.thisweekday=t.getDate.thisweekday,t.SetCommonQueryData(),t.getBelongDepStaff()},mounted:function(){},watch:{queryResponse:{handler:function(){var t=this;if(t.reset(["getStaffOptions","staffIDName","staffIDEmail","depStaffRelation","now","nowFormat","thisweekday"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.getTodoList()}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",axiosDeleteAction:"commonaxios/axiosDeleteAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",changesetPartitionStatus:"home/change_setPartitionStatus",setinputData:"commonquery/set_inputData",setconditionOptions:"commonquery/set_conditionOptions",setapiParams:"commonquery/set_apiParams",queryAgain:"commonquery/do_queryAgain",setautoTable:"exportfile/set_autoTable",setautoTableStatus:"exportfile/set_autoTableStatus",setcommonModalConfig:"usemodal/set_commonModalConfig",togglecommonModal:"usemodal/toggle_commonModal",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab",adjustContentData:"adjustdata/adjust_ContentData"})),{},{SetCommonQueryData:function(){var t=this,e=[],a="ALL";"ALL"==t.pageAccess.report.children.todolist.remark.commonQueryCondition.main?e=[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}]:(e=[{text:t.depConfig[t.pageAccess.report.children.todolist.remark.commonQueryCondition.main],value:String(t.pageAccess.report.children.todolist.remark.commonQueryCondition.main)}],a=t.pageAccess.report.children.todolist.remark.commonQueryCondition.main);var o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=e,o.selected=a,o.label="部門",o.childcondition="select",o.secondcondition=[!0,{label:"狀態",condition:"select",attr:"status"}],o.second_selected=[1,0],t.setinputData(o),t.setconditionOptions([{text:"完成",value:[1]},{text:"未完成",value:[0]},{text:"全選",value:[1,0]}]);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="todoList",n.normal.attr="depID",n.normal.timeattr="schedDate",n.normal.intervaltime={schedDate:[[t.thisweekday[0]+" 00:00:00",t.thisweekday[1]+" 23:59:59"]]},n.customized={condition_1:{union:["condition_2",!0]},condition_2:{table:"todoListComplt",fields:"",orderby:"",limit:"",where:"condition_1",symbols:"condition_1",intervaltime:"condition_1",subquery:"",union:""}},t.setapiParams(n)},getTodoList:function(){var t=this;t.togglealertModal(!0),t.collapseVisible=!1,t.queryResponse.forEach((function(e){var a=!1;e.status&&(a=!0);var o={seq:e.seq,depID:e.depID,status:a,completedDate:e.completedDate,taskInfo:e.taskInfo,taskDetail:e.taskDetail,schedDate:{time:e.schedDate},priority:e.priority,assignTo:e.assignTo,startDate:{time:e.startDate},creatorID:e.creatorID};"2496"==t.loginData.account&&"ALL"==t.inputData.selected?"2496"==e.creatorID&&t.items.push(o):t.items.push(o)})),t.checkDueNum(),t.togglealertModal(!1)},getBelongDepStaff:function(){var t=this,e={url:"api/YS/2.0/my/CommonUse/SqlSyntax",urlparams:{getSqlSyntax:"yes"}},a=[],o=[];"ALL"==t.pageAccess.report.children.todolist.remark.commonQueryCondition.main?(a=Object.keys(t.depConfig),Object.keys(t.depConfig).map((function(t){o.push("equal")}))):(a.push(t.pageAccess.report.children.todolist.remark.commonQueryCondition.main),o.push("equal")),e["postdata"]={condition_1:{table:"user",fields:["uID","uName","noumenonID","noumenonType","email"],where:{noumenonID:a},orderby:["desc","lastUpdateTime"],limit:["ALL"],symbols:{noumenonID:o},intervaltime:"",union:"",subquery:""}};var n=!1;t.axiosPostAction(e).then((function(){var e=t.axiosResult;if(200!=e.status)return n=!0,void t.setTimeOutAlertMsg(e.data);if("ok"==e.data["Response"])if(0==e.data["QueryTableData"].length)t.setTimeOutAlertMsg("查無資料"),n=!0;else{"ALL"!=t.pageAccess.report.children.todolist.remark.commonQueryCondition.main&&(t.togglealertModal(!0),t.queryAgain());var a={},o={},s={};e.data["QueryTableData"].forEach((function(e){var n={value:e.uID,text:e.uName};("1020"!=e.noumenonID||"ALL"==t.pageAccess.report.children.todolist.remark.commonQueryCondition.main)&&t.getStaffOptions.push(n),a[e.uID]=String(e.uName),s[e.uID]=String(e.email),o[e.uID]=String(e.noumenonID)})),t.staffIDName=a,t.staffIDEmail=s,t.depStaffRelation=o}else t.setTimeOutAlertMsg(e.data["Response"]),n=!0})).catch((function(e){t.setTimeOutAlertMsg(e),n=!0})).finally((function(){n&&t.settimeoutalertModal(),"ALL"!=t.pageAccess.report.children.todolist.remark.commonQueryCondition.main&&t.togglealertModal(!1)}))},checkDueNum:function(){var t=this;t.dueTodayNum=0,t.overDueNum=0,0!=t.items.length&&t.items.forEach((function(e){Date.parse(t.nowFormat).valueOf()==Date.parse(e.schedDate.time).valueOf()&&(t.dueTodayNum+=1),Date.parse(t.nowFormat).valueOf()>Date.parse(e.schedDate.time).valueOf()&&!e.status&&(t.overDueNum+=1)}))},tempOldItemAction:function(t,e){var a=this;t?(a.tempThisOldItem.status=e.status,a.tempThisOldItem.completedDate=e.completedDate,a.tempThisOldItem.taskInfo=e.taskInfo,a.tempThisOldItem.taskDetail=e.taskDetail,a.tempThisOldItem.schedDate.time=e.schedDate.time,a.tempThisOldItem.priority=e.priority,a.tempThisOldItem.assignTo=e.assignTo,a.tempThisOldItem.startDate.time=e.startDate.time):(e.status=a.tempThisOldItem.status,e.completedDate=a.tempThisOldItem.completedDate,e.taskInfo=a.tempThisOldItem.taskInfo,e.taskDetail=a.tempThisOldItem.taskDetail,e.schedDate.time=a.tempThisOldItem.schedDate.time,e.priority=a.tempThisOldItem.priority,e.assignTo=a.tempThisOldItem.assignTo,e.startDate.time=a.tempThisOldItem.startDate.time)},addTask:function(t){t.preventDefault();var e=this,a=["taskInfo","priority","assignTo"],o=!0;a.forEach((function(t){e.addTaskDetail[t].invalid||(o=!1)}));var n={assignTo:e.addTaskDetail.assignTo.value,taskInfo:e.addTaskDetail.taskInfo.value,schedDate:e.addTaskDetail.schedDate.time,startDate:e.addTaskDetail.startDate.time,creatorID:e.loginData.account};if(o){e.togglealertModal(!0);var s={url:"api/YS/1.0/my/CommonUse/todoList"};s["postdata"]={seq:[""],depID:[e.depStaffRelation[e.addTaskDetail.assignTo.value]],taskInfo:[e.addTaskDetail.taskInfo.value],taskDetail:[e.addTaskDetail.taskDetail],schedDate:[e.addTaskDetail.schedDate.time],priority:[e.addTaskDetail.priority.value],assignTo:[e.addTaskDetail.assignTo.value],status:[!1],completedDate:[""],creatorID:[e.loginData.account],startDate:[e.addTaskDetail.startDate.time]};var i=function(){var t=Object(jt["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.addTaskFunc(s);case 2:if(a=t.sent,o="ok",!e.addTaskDetail.email){t.next=8;break}return t.next=7,e.sendEmail(n);case 7:o=t.sent;case 8:if("ok"!==a||"ok"!==o){t.next=12;break}return t.abrupt("return","ok");case 12:return t.abrupt("return","".concat(a,", ").concat(o));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();i().then((function(t){"ok"==t?e.addTaskDetail.email?e.setTimeOutAlertMsg("新增完成並發送email給指派對象"):e.setTimeOutAlertMsg("新增完成"):e.setTimeOutAlertMsg(t)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.togglealertModal(!1),e.settimeoutalertModal(),e.formReset(),setTimeout((function(){e.queryAgain()}),1200),e.addTaskModalShow=!e.addTaskModalShow}))}},addTaskFunc:function(t){var e=this;return new Promise((function(a,o){e.axiosPostAction(t).then((function(){var t=e.axiosResult;200!=t.status&&o(t.data),"ok"==t.data["Response"]?a("ok"):o(t.data["Response"])})).catch((function(t){o(t)}))}))},addTaskClose:function(){var t=this;t.addTaskDetail=this.$options.data().addTaskDetail,t.formReset(),t.addTaskModalShow=!t.addTaskModalShow},sendEmail:function(t){var e=this;return new Promise((function(a,o){Vt.send({assignTo:e.staffIDName[t["assignTo"]],assignToEmail:e.staffIDEmail[t["assignTo"]],status:"新發起",taskInfo:t["taskInfo"],creatorIDName:e.staffIDName[t["creatorID"]],creatorIDEmail:e.staffIDEmail[t["creatorID"]],schedDate:t["schedDate"],startDate:t["startDate"]}).then((function(t){a(t.Response)})).catch((function(t){return o(t)}))}))},modTask:function(t){var e=this,a="";t.status&&(a=e.nowFormat);for(var o=["taskInfo"],n=0;n<o.length;n++)if(""==t[o[n]])return e.setTimeOutAlertMsg("尚有未輸入的值"),void e.settimeoutalertModal();var s={url:"api/YS/1.0/my/CommonUse/todoList"};s["postdata"]={old_seq:[t.seq],status:[t.status],taskInfo:[t.taskInfo],taskDetail:[t.taskDetail],schedDate:[t.schedDate.time],priority:[t.priority],assignTo:[t.assignTo],completedDate:[a],startDate:[t.startDate.time]},e.activeItemsSeq=null,e.axiosPatchAction(s).then((function(){var t=e.axiosResult;200==t.status?"ok"==t.data["Response"]?e.setTimeOutAlertMsg("修改成功"):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.settimeoutalertModal(),setTimeout((function(){e.queryAgain()}),1200)}))},delTask:function(){var t=this,e={url:"api/YS/1.0/my/CommonUse/todoList"};e["postdata"]={seq:[t.delItemSeq]},t.togglealertModal(!0),t.axiosDeleteAction(e).then((function(){var e=t.axiosResult;t.togglealertModal(!1),200==e.status?"ok"==e.data["Response"]?t.setTimeOutAlertMsg("刪除成功"):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),setTimeout((function(){t.queryAgain()}),1200),t.delTaskModalShow=!t.delTaskModalShow}))},editLongData:function(t,e,a){var o=this,n=this;if(a){var s=JSON.parse(JSON.stringify(n.DEFAULT_commonModalConfig));s.size="xl",s.hideModalHeader=!0,s.hideModalHeaderClose=!0,n.setcommonModalConfig(s),n.editActionItems.seq=t.item.seq,n.editActionItems.which=e,n.adjustContentData({content:String(t.item[e]),status:!1}),n.editActionItems.Data=n.contentData}else n.items.filter((function(t){if(t.seq==n.editActionItems.seq){var e=n.editActionItems.Data;n.adjustContentData({content:String(e),status:!0}),t[n.editActionItems.which]=n.contentData}}));n.editActionModalShow=!n.editActionModalShow,n.togglecommonModal(a),a&&setTimeout((function(){o.$nextTick((function(){return o.$refs.editlongdata.focus()}))}),0)},dateDisabled:function(t,e){var a=e.getDay();e.getDate();return 0===a||6===a},rowClass:function(t,e){if(t&&"row"===e)return t.status?{style:"background-color:rgba(0, 0, 0, 0.144)"}:void 0},check_required:function(t,e){return e.invalid=t,!t},formReset:function(){var t=this;t.addTaskDetail={taskInfo:{key:"taskInfo",value:null,invalid:!1},taskDetail:"",schedDate:{time:""},startDate:{time:""},priority:{key:"priority",value:null,invalid:!1},assignTo:{key:"assignTo",value:null,invalid:!1},email:!1},t.$nextTick((function(){t.$v.$reset()}))},transferDataModal:function(t){var e=this;if(t){e.togglealertModal(!0);var a=JSON.parse(JSON.stringify(e.DEFAULT_commonModalConfig));a.size="xl",a.modalClassFull=!0,e.setcommonModalConfig(a),e.settableSlotConfig({slotConfig:{completedDate:{value:"completedDate","v-html":!0},taskInfo:{value:"taskInfo","v-html":!0},taskDetail:{value:"taskDetail","v-html":!0},schedDate:{value:"schedDate","v-html":!0},priority:{value:"priority",conversiontable:e.priorityConfig},assignTo:{value:"assignTo",conversiontable:e.staffIDName},startDate:{value:"startDate","v-html":!0},creatorID:{value:"creatorID",conversiontable:e.staffIDName}},selectable:!0,selectlebel:"轉移"});var o={url:"api/YS/2.0/my/CommonUse/SqlSyntax",urlparams:{getSqlSyntax:"yes"}},n=[],s=[];"ALL"==e.pageAccess.report.children.todolist.remark.commonQueryCondition.main?(n=Object.keys(e.depConfig),Object.keys(e.depConfig).map((function(t){s.push("equal")}))):(n.push(e.pageAccess.report.children.todolist.remark.commonQueryCondition.main),s=["equal"]),o["postdata"]={condition_1:{table:"todoList",fields:"",where:{depID:n,status:[1]},orderby:["desc","lastUpdateTime"],limit:["ALL"],symbols:{depID:s,status:["equal"]},intervaltime:"",union:"",subquery:""}};var i=!1;e.axiosPostAction(o).then((function(){var t=e.axiosResult;if(200!=t.status)return i=!0,void e.setTimeOutAlertMsg(t.data);var a=[];t.data["QueryTableData"].forEach((function(t){var e=!1;t.status&&(e=!0);var o={seq:t.seq,depID:t.depID,status:e,completedDate:t.completedDate,taskInfo:t.taskInfo,taskDetail:t.taskDetail,schedDate:t.schedDate,priority:t.priority,assignTo:t.assignTo,startDate:t.startDate,creatorID:t.creatorID};a.push(o)})),e.settableDetail({items:a,fields:[{key:"completedDate",label:"完成日期",sortable:!1},{key:"taskInfo",label:"描述",sortable:!1},{key:"taskDetail",label:"執行細項",sortable:!1},{key:"schedDate",label:"預計完成日期",sortable:!0},{key:"priority",label:"優先順序",sortable:!0},{key:"assignTo",label:"指派對象",sortable:!0},{key:"startDate",label:"發起日",sortable:!0},{key:"creatorID",label:"發起人",sortable:!0}],which:"todoList",children:{}})})).catch((function(t){e.setTimeOutAlertMsg(t),i=!0})).finally((function(){i&&e.settimeoutalertModal()}))}e.transferDataModalShow=t,e.togglecommonModal(t),e.togglealertModal(!1)},transferData:function(t){var e=this,a={seq:[],depID:[],status:[],completedDate:[],taskInfo:[],taskDetail:[],schedDate:[],priority:[],assignTo:[],startDate:[],creatorID:[]},o={seq:[],depID:[],groupID:[],item:[],date:[],status:[],progress:[],action:[],remark:[],priority:[],owner:[],creatorID:[]},n=[];t.data.map((function(t){n.push(t.seq),a.seq.push(""),a.depID.push(t.depID),a.status.push(t.status),a.completedDate.push(t.completedDate),a.taskInfo.push(t.taskInfo),a.taskDetail.push(t.taskDetail),a.schedDate.push(t.schedDate),a.priority.push(t.priority),a.assignTo.push(t.assignTo),a.startDate.push(t.startDate),a.creatorID.push(t.creatorID),o.seq.push(""),o.depID.push(t.depID),o.groupID.push(""),o.item.push(""),o.date.push(t.completedDate),o.status.push(t.taskInfo),o.progress.push(100),o.action.push(t.taskDetail),o.remark.push(""),o.priority.push(1),o.owner.push(t.assignTo),o.creatorID.push(t.creatorID)}));var s=function(){var t=Object(jt["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.transferDataAddFunc("todoListComplt",a,o);case 2:return s=t.sent,t.next=5,e.transferDataDelFunc(n);case 5:if(i=t.sent,"ok"!==s||"ok"!==i){t.next=10;break}return t.abrupt("return","ok");case 10:return t.abrupt("return","".concat(s,", ").concat(i));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();s().then((function(t){"ok"==t&&(e.setTimeOutAlertMsg("轉移成功"),e.settimeoutalertModal(),e.transferDataModal(!1),setTimeout((function(){e.queryAgain()}),1200))})).catch((function(t){}))},transferDataAddFunc:function(t,e,a){var o=this,n={};"todoListComplt"===t?(n["url"]="api/YS/1.0/my/CommonUse/todoListComplt",n["postdata"]=e):(n["url"]="api/YS/1.0/my/CommonUse/weeklyReport",n["postdata"]=a);var s=!1;return new Promise((function(e,i){o.axiosPostAction(n).then((function(){var n=o.axiosResult;200!=n.status&&i("新增失敗"),"ok"==n.data["Response"]?"todoListComplt"===t?o.transferDataAddFunc("weeklyReport",{},a).then((function(t){e(t)})):e("ok"):(o.setTimeOutAlertMsg(n.data["Response"]),s=!0,i("新增失敗"))})).catch((function(t){o.setTimeOutAlertMsg(t),s=!0,i("新增失敗")})).finally((function(){s&&o.settimeoutalertModal()}))}))},transferDataDelFunc:function(t){var e=this,a={url:"api/YS/1.0/my/CommonUse/todoList"};t["postdata"]={seq:t};var o=!1;return new Promise((function(t,n){e.axiosDeleteAction(a).then((function(){var a=e.axiosResult;200!=a.status&&(e.setTimeOutAlertMsg(a.data),o=!0,n("刪除失敗")),"ok"==a.data["Response"]?t("ok"):(e.setTimeOutAlertMsg(a.data["Response"]),o=!0,n("刪除失敗"))})).catch((function(t){e.setTimeOutAlertMsg(t),o=!0,n("刪除失敗")})).finally((function(){o&&e.settimeoutalertModal()}))}))},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)},exportfile:function(t){var e=this;if(0==e.items.length)return e.setTimeOutAlertMsg("無資料可匯出"),void e.settimeoutalertModal();var a=JSON.parse(JSON.stringify(e.items));a.map((function(t){delete t.seq,t.status?t.status="完成":t.status="尚未完成",t.taskInfo=e.adjustContentData({content:String(t.taskInfo),status:!1}),t.taskDetail=e.adjustContentData({content:String(t.taskDetail),status:!1}),t.schedDate=t.schedDate.time,t.startDate=t.startDate.time,t.depID=e.depConfig[t.depID],t.assignTo=e.staffIDName[t.assignTo],t.priority=e.priorityConfig[t.priority]}));var o="全部門";"ALL"!=e.inputData.selected&&(o=e.depConfig[e.inputData.selected]);var n=o+"的待辦事項_"+e.nowFormat,s=a.map((function(t){return Object.values(t)}));if("CSV"===t)s.forEach((function(t){t[0]=" "+t[0]})),s.unshift(["部門","完成","完成日期","描述","預計完成日期","優先順序","指派對象","發起日"]),e.setautoTable({body:s,exportfilename:n,exportfiletype:t});else{var i="";i="DEFAULT"==e.thisQueryTimeInterval?e.thisweekday.join(" ~ "):"ALL"==e.thisQueryTimeInterval?"資料表內所有資料":e.thisQueryTimeInterval.join(" ~ "),e.setautoTableStatus(!0),e.setautoTable({body:s,columns:[{header:"部門",dataKey:"depID"},{header:"完成",dataKey:"status"},{header:"完成日期",dataKey:"completedDate"},{header:"描述",dataKey:"taskInfo"},{header:"執行細項",dataKey:"taskDetail"},{header:"預計完成日期",dataKey:"schedDate"},{header:"優先順序",dataKey:"priority"},{header:"指派對象",dataKey:"assignTo"},{header:"發起日",dataKey:"startDate"}],columnStyles:{depID:{font:"msjh"},status:{font:"msjh"},completedDate:{font:"msjh"},taskInfo:{font:"msjh"},taskDetail:{font:"msjh"},schedDate:{font:"msjh"},priority:{font:"msjh"},assignTo:{font:"msjh"},startDate:{font:"msjh"}},headStyles:{font:"msjh",fillColor:[160,215,255],valign:"middle",halign:"center",textColor:10,lineWidth:1,cellPadding:3,minCellWidth:50},exportfilename:n,exportfiletype:t,text:[o,i]})}setTimeout((function(){e.exportModalShow=!1}),1e3)}})},Wt=Ht,Gt=(a("960f"),a("b042"),Object(b["a"])(Wt,qt,Pt,!1,null,"243de855",null)),Yt=Gt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WeeklyReport"},[a("h4",[t._v("工作週報")]),a("b-modal",{attrs:{centered:"","hide-footer":"",size:"xl","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[0==t.tabIndex?a("h5",[t._v("新增本週事項")]):1==t.tabIndex?a("h5",[t._v("新增下週重點事項")]):t._e()]},proxy:!0},{key:"default",fn:function(){return[null!=t.addTaskWhich?a("b-form",{on:{submit:t.addTask}},[t._l(t.addTaskDetail,(function(e,o,n){return a("b-row",{key:n,staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-"+o}},[t._v(t._s(o)+":")])]),t.$v.addTaskDetail.hasOwnProperty(o)?[a("b-col",{class:{"form-group--error":t.$v.addTaskDetail[o].value.$error},attrs:{sm:"10"}},["Progress"==o||"Priority"==o?a("b-form-input",{staticClass:"input-title",attrs:{id:"input-"+o,type:"number",min:"0",max:"100"},model:{value:t.$v.addTaskDetail[o].$model.value,callback:function(e){t.$set(t.$v.addTaskDetail[o].$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                    $v.addTaskDetail[index].$model.value\n                                "}}):"Dep"==o?a("b-form-select",{attrs:{id:"input-"+o,options:t.depOptions,size:"sm"},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.$v.addTaskDetail.Dep.$model.value,callback:function(e){t.$set(t.$v.addTaskDetail.Dep.$model,"value",e)},expression:"$v.addTaskDetail.Dep.$model.value"}}):"Owner"==o?a("b-form-select",{attrs:{id:"input-"+o,options:t.getStaffOptions,size:"sm",multiple:""},model:{value:t.$v.addTaskDetail.Owner.$model.value,callback:function(e){t.$set(t.$v.addTaskDetail.Owner.$model,"value",e)},expression:"\n                                    $v.addTaskDetail.Owner.$model.value\n                                "}}):"Group"==o||"Item"==o?[a("b-form-input",{attrs:{id:"input-"+o,list:"input-list"+o},model:{value:t.$v.addTaskDetail[o].$model.value,callback:function(e){t.$set(t.$v.addTaskDetail[o].$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                        $v.addTaskDetail[index].$model.value\n                                    "}}),a("b-form-datalist",{attrs:{id:"input-list"+o,options:t.getDataListFromDBTable[o][t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main]},model:{value:t.$v.addTaskDetail[o].$model.value,callback:function(e){t.$set(t.$v.addTaskDetail[o].$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                        $v.addTaskDetail[index].$model.value\n                                    "}})]:a("b-form-input",{staticClass:"input-title",attrs:{id:"input-"+o,type:"text"},model:{value:t.$v.addTaskDetail[o].$model.value,callback:function(e){t.$set(t.$v.addTaskDetail[o].$model,"value","string"===typeof e?e.trim():e)},expression:"\n                                    $v.addTaskDetail[index].$model.value\n                                "}}),t.check_required(t.$v.addTaskDetail[o].value.required,t.$v.addTaskDetail[o].$model)?[a("div",{staticClass:"error"},[t._v("Is required")])]:"Progress"==o||"Priority"==o?[t.check_positivenumvalid(t.$v.addTaskDetail[o].value.positivenumvalidator,t.$v.addTaskDetail[o].$model)?a("div",{staticClass:"jsonerror"},[t._v(" 必須是正整數 ")]):t._e()]:t._e()],2)]:[a("b-col",{attrs:{sm:"10"}},["Date"==o?[a("datepicker",{attrs:{date:t.addTaskDetail[o],option:t.datepickerOptions}})]:"Action"==o||"Status"==o?[a("b-form-textarea",{attrs:{id:"input-"+o,rows:"4","max-rows":"12"},model:{value:t.addTaskDetail[o],callback:function(e){t.$set(t.addTaskDetail,o,e)},expression:"addTaskDetail[index]"}})]:[a("b-form-input",{staticClass:"input-title",attrs:{id:"input-"+o,type:"text"},model:{value:t.addTaskDetail[o],callback:function(e){t.$set(t.addTaskDetail,o,"string"===typeof e?e.trim():e)},expression:"addTaskDetail[index]"}})]],2)]],2)})),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.addTaskClose()}}},[t._v("Close")])],1),a("div",{staticClass:"text-right"},[a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"5px"},attrs:{type:"submit",variant:"success",size:"sm"},on:{click:t.$v.addTaskDetail.$touch}},[t._v("送出")])],1)])],1)],2):t._e()]},proxy:!0}]),model:{value:t.addTaskModalShow,callback:function(e){t.addTaskModalShow=e},expression:"addTaskModalShow"}}),a("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("確定要刪除此事項嗎？")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.delTaskModalShow=!t.delTaskModalShow}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.delTask()}}},[t._v("確定刪除")])],1)]},proxy:!0}]),model:{value:t.delTaskModalShow,callback:function(e){t.delTaskModalShow=e},expression:"delTaskModalShow"}}),a("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",size:"sm"},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("b-row",[a("b-col",{attrs:{sm:"6"}},[a("b-button",{staticStyle:{position:"relative",transform:"translateY(50%)"},attrs:{pill:"",variant:"success"},on:{click:function(e){return t.exportFile("CSV")}}},[t._v("CSV")])],1),a("b-col",{staticStyle:{"border-left":"1px solid"},attrs:{sm:"6"}},[a("b-form-select",{attrs:{options:t.exportPDFoptions,size:"sm"},model:{value:t.exportPDFselected,callback:function(e){t.exportPDFselected=e},expression:"exportPDFselected"}}),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mt-2",attrs:{pill:"",variant:"warning",disabled:t.ttfStatus,title:"合併儲存格會因資料長度太長可能出現排版問題(大約50chars、115bytes左右)，此時可以下載不合併的版本或分成多筆資料"},on:{click:function(e){return t.exportFile("PDF")}}},[t._v("PDF")])],1)],1)],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.exportModalShow=!t.exportModalShow}}},[t._v("Close")])],1)]},proxy:!0}]),model:{value:t.exportModalShow,callback:function(e){t.exportModalShow=e},expression:"exportModalShow"}}),a("b-modal",{attrs:{centered:"","hide-header":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",size:"xl"},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},["Owner"==t.editActionItems.which?a("b-form-select",{attrs:{options:t.getStaffOptions,multiple:""},model:{value:t.editActionItems.Data,callback:function(e){t.$set(t.editActionItems,"Data",e)},expression:"editActionItems.Data"}}):a("b-form-textarea",{attrs:{rows:"6","max-rows":"12"},model:{value:t.editActionItems.Data,callback:function(e){t.$set(t.editActionItems,"Data",e)},expression:"editActionItems.Data"}})],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.editActionModalShow=!t.editActionModalShow}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.editLongData(null,null,!1)}}},[t._v("確定")])],1)]},proxy:!0}]),model:{value:t.editActionModalShow,callback:function(e){t.editActionModalShow=e},expression:"editActionModalShow"}})],1)},Xt=[],Zt=(a("fb6a"),function(t){var e=function(t){return/^[0-9]+$/.test(t)};return e(t)}),te={name:"WeeklyReport",data:function(){return{now:"",nowFormat:"",thisweekday:[],tabIndex:0,fields:[{key:"Group",sortable:!0},{key:"Item",sortable:!0},{key:"Date",sortable:!0},{key:"Status",sortable:!1},{key:"Progress",sortable:!0},{key:"Action",sortable:!1},{key:"Remark",sortable:!1},{key:"Priority",sortable:!0},{key:"Dep",sortable:!0},{key:"Owner",sortable:!0},{key:"Edit",sortable:!1}],items:[],tempData:[],nextWeekData:[],activeItemsSeq:null,tempThisOldItem:{},delItemSeq:null,datepickerOptions:{type:"day",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD",placeholder:"",inputStyle:{display:"inline-block",padding:"5px","line-height":"22px","font-size":"16px","text-align":"center",border:"2px solid #fff","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.2)","border-radius":"2px",color:"#5F5F5F",width:"150px"},color:{header:"#ccc",headerText:"#f00"},overlayOpacity:.5,dismissible:!0},depConfig:{1001:"資訊通訊部",1002:"系統研發部",1003:"平台部"},depOptions:[],addTaskModalShow:!1,addTaskDetail:{Group:{key:"Group",value:null,invalid:!1},Date:{time:""},Item:{key:"Item",value:null,invalid:!1},Status:"",Progress:{key:"Progress",value:null,invalid:!1},Action:"",Remark:"",Priority:{key:"Priority",value:null,invalid:!1},Dep:{key:"Dep",value:null,invalid:!1},Owner:{key:"Owner",value:[],invalid:!1}},addTaskWhich:null,getStaffOptions:[],staffConfig:{},depStaffRelation:{},getDataListFromDBTable:{Group:{1001:[],1002:[],1003:[],ALL:[]},Item:{1001:[],1002:[],1003:[],ALL:[]}},delTaskModalShow:!1,collapseVisible:!0,exportModalShow:!1,exportPDFoptions:[{value:!0,text:"合併儲存格"},{value:!1,text:"不合併儲存格"}],exportPDFselected:!0,exportTitle:"",exportDate:"",exportColumns:[{header:"Group",dataKey:"Group"},{header:"Item",dataKey:"Item"},{header:"Date",dataKey:"Date"},{header:"Status",dataKey:"Status"},{header:"Progress%",dataKey:"Progress"},{header:"Action",dataKey:"Action"},{header:"Remark",dataKey:"Remark"},{header:"Owner",dataKey:"Owner"}],exportColumnStyles:{Group:{font:"msjh"},Item:{font:"msjh"},Date:{font:"msjh"},Status:{font:"msjh"},Progress:{font:"msjh",fontSize:12},Action:{font:"msjh"},Remark:{font:"msjh"},Owner:{font:"msjh"}},exportHeadStyles:{font:"msjh",fillColor:[160,215,255],valign:"middle",halign:"center",textColor:10,lineWidth:1,cellPadding:3,minCellWidth:50},editActionModalShow:!1,editActionItems:{seq:null,Data:"",which:""}}},mixins:[tt["validationMixin"]],validations:function(){var t={addTaskDetail:{Group:{value:{required:et["required"]}},Item:{value:{required:et["required"]}},Progress:{value:{required:et["required"],positivenumvalidator:Zt}},Priority:{value:{required:et["required"],positivenumvalidator:Zt}},Dep:{value:{required:et["required"]}},Owner:{value:{required:et["required"]}}}};return 1==this.addTaskWhich?(delete t.addTaskDetail.Progress,delete t.addTaskDetail.Owner,delete t.addTaskDetail.Priority,t):t},components:{modal:y,datepicker:Q["a"],commonQuery:H,exportFile:Qt},computed:Object(l["a"])({},Object(c["c"])({loginData:"getlogin/get_loginData",axiosResult:"commonaxios/get_axiosResult",pageAccess:"getlogin/get_pageAccess",queryResponse:"commonquery/get_queryResponse",thisQueryTimeInterval:"commonquery/get_thisQueryTimeInterval",inputData:"commonquery/get_inputData",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",ttfStatus:"exportfile/get_ttfStatus",errorFormat:"exportfile/get_errorFormat",isInit:"commonquery/get_isInit",getDate:"getdate/get_Date"})),created:function(){},mounted:function(){},watch:{tabIndex:{handler:function(t){var e=this,a=["tabIndex","getStaffOptions","staffConfig","depStaffRelation","depOptions","now","nowFormat","thisweekday","collapseVisible","exportModalShow"];a.push("items","tempData"),e.reset(a);var o=e.items.slice(),n=e.tempData.slice();e.tempData=o,e.items=n;var s=JSON.parse(JSON.stringify(e.DEFAULT_apiParams));0==e.tabIndex?(s.normal.table="weeklyReport",s.normal.attr="depID",s.normal.timeattr="date",s.normal.intervaltime={date:[[e.thisweekday[0]+" 00:00:00",e.thisweekday[1]+" 23:59:59"]]},e.setapiParams(s)):(s.normal.table="workedKey",s.normal.attr="depID",s.normal.timeattr="date",s.normal.intervaltime={date:[[e.thisweekday[0]+" 00:00:00",e.thisweekday[1]+" 23:59:59"]]},e.setapiParams(s),e.fields.splice(2,1),e.fields.splice(3,4),e.fields.splice(4,1),0==e.items.length&&e.queryAgain())}},queryResponse:{handler:function(){var t=this,e=["fields","tabIndex","getStaffOptions","staffConfig","depStaffRelation","depOptions","now","nowFormat","thisweekday","collapseVisible","exportModalShow"];if(1==t.tabIndex&&e.push("tempData"),t.reset(e),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.getTaskList()}},addTaskWhich:{handler:function(){var t=this;1==t.addTaskWhich?(delete t.addTaskDetail.Date,delete t.addTaskDetail.Progress,delete t.addTaskDetail.Action,delete t.addTaskDetail.Remark,delete t.addTaskDetail.Priority,delete t.addTaskDetail.Owner):0==t.addTaskWhich&&(t.addTaskDetail.Date.time=t.nowFormat)}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])((n={axiosAction:"commonaxios/axiosAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg"},Object(u["a"])(n,"setTimeOutAlertMsg","alertmodal/set_setTimeOutAlertMsg"),Object(u["a"])(n,"togglealertModal","alertmodal/toggle_alertModal"),Object(u["a"])(n,"settimeoutalertModal","alertmodal/settimeout_alertModal"),Object(u["a"])(n,"changesetPartitionStatus","home/change_setPartitionStatus"),Object(u["a"])(n,"setinputData","commonquery/set_inputData"),Object(u["a"])(n,"setapiParams","commonquery/set_apiParams"),Object(u["a"])(n,"queryAgain","commonquery/do_queryAgain"),Object(u["a"])(n,"setautoTable","exportfile/set_autoTable"),Object(u["a"])(n,"seterrorFormat","exportfile/set_errorFormat"),Object(u["a"])(n,"setautoTableStatus","exportfile/set_autoTableStatus"),n))),{},{dataSorted:function(t){var e={asc:{greater:1,less:-1},desc:{greater:-1,less:1}};return function(a,o){var n=0;while(n<t.length){if(n==t.length)return-1;if(a[t[n][0]]>o[t[n][0]])return e[t[n][1]]["greater"];if(a[t[n][0]]<o[t[n][0]])return e[t[n][1]]["less"];n++}}},SetCommonQueryData:function(){var t=this,e=[],a="ALL";"ALL"==t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main?(e=[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}],t.depOptions=[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"}]):(e=[{text:t.depConfig[t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main],value:String(t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main)}],a=t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main,t.depOptions=[{text:t.depConfig[t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main],value:String(t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main)}]);var o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=e,o.selected=a,o.label="部門",t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="weeklyReport",n.normal.attr="depID",n.normal.timeattr="date",n.normal.intervaltime={date:[[t.thisweekday[0]+" 00:00:00",t.thisweekday[1]+" 23:59:59"]]},t.setapiParams(n)},getTaskList:function(){var t=this;t.togglealertModal(!0),t.collapseVisible=!1;var e={};t.queryResponse.forEach((function(a){t.getDataListFromDBTable.Group[a.depID].includes(a.groupID)||(t.getDataListFromDBTable.Group[a.depID].push(a.groupID),t.getDataListFromDBTable.Group["ALL"].includes(a.groupID)||t.getDataListFromDBTable.Group["ALL"].push(a.groupID)),t.getDataListFromDBTable.Item[a.depID].includes(a.item)||(t.getDataListFromDBTable.Item[a.depID].push(a.item),t.getDataListFromDBTable.Item["ALL"].includes(a.item)||t.getDataListFromDBTable.Item["ALL"].push(a.item)),e=0==t.tabIndex?{seq:a.seq,depID:a.depID,Group:a.groupID,Item:a.item,Date:{time:a.date},Status:a.status,Progress:a.progress,Action:a.action,Remark:a.remark,Priority:a.priority,Owner:String(a.owner)}:{seq:a.seq,depID:a.depID,Group:a.groupID,Item:a.item,Status:a.detail},t.items.push(e)})),t.togglealertModal(!1)},getBelongDepStaff:function(){var t=this,e={methods:"POST",whichFunction:"CommonSqlSyntaxQuery"},a=[],o=[];"ALL"==t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main?(a=Object.keys(t.depConfig),o=["equal","equal","equal"]):(a.push(t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main),o=["equal"]),e["condition"]={condition_1:{table:"user",fields:["uID","uName","noumenonID","noumenonType"],where:{noumenonID:a},orderby:["desc","lastUpdateTime"],limit:["ALL"],symbols:{noumenonID:o}}};var n=!1;t.axiosAction(e).then((function(){var e=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(e))return t.setTimeOutAlertMsg(e),void t.settimeoutalertModal(2e3);if("ok"==e["Response"])if(0==e["QueryTableData"].length)t.setTimeOutAlertMsg("查無資料"),n=!0;else{"ALL"!=t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main&&(t.togglealertModal(!0),t.queryAgain());var a={},o={};e["QueryTableData"].forEach((function(e){var n={value:e.uID,text:e.uName};a[e.uID]=String(e.uName),o[e.uID]=String(e.noumenonID),t.getStaffOptions.push(n)})),t.staffConfig=a,t.depStaffRelation=o}else t.setTimeOutAlertMsg(e["Response"]),n=!0})).catch((function(e){t.setTimeOutAlertMsg(e),n=!0})).finally((function(){n&&t.settimeoutalertModal(),"ALL"==t.pageAccess.report.children.weeklyreport.remark.commonQueryCondition.main&&t.togglealertModal(!1)}))},tempOldItemAction:function(t,e){var a=this;t?Object.assign(a.tempThisOldItem,e):Object.assign(e,a.tempThisOldItem)},editLongData:function(t,e,a){var o=this;a?(o.editActionItems.seq=t.item.seq,o.editActionItems.which=e,o.editActionItems.Data="Owner"===e?t.item.Owner.split(","):o.replaceContentData(String(t.item[e]),!1)):o.items.filter((function(t){if(t.seq==o.editActionItems.seq){var e=o.editActionItems.Data;e=Array.isArray(e)?e.join(","):o.replaceContentData(String(e),!0),t[o.editActionItems.which]=e}})),o.editActionModalShow=!o.editActionModalShow},addTask:function(t){t.preventDefault();var e=this,a=!0,o=["Group","Item","Progress","Priority","Owner","Dep"];if(1==e.tabIndex&&(o=["Group","Item","Dep"]),o.forEach((function(t){e.addTaskDetail[t].invalid||(a=!1)})),a){var n={};1==e.tabIndex?n={methods:"POST",whichFunction:"CommonRegister",table:"workedKey",postdata:{seq:[""],depID:[e.addTaskDetail.Dep.value],groupID:[e.addTaskDetail.Group.value],date:[e.thisweekday[0]],item:[e.addTaskDetail.Item.value],detail:[e.addTaskDetail.Status],creatorID:[e.loginData.account]}}:0==e.tabIndex&&(n={methods:"POST",whichFunction:"CommonRegister",table:"weeklyReport",postdata:{seq:[""],depID:[e.addTaskDetail.Dep.value],groupID:[e.addTaskDetail.Group.value],item:[e.addTaskDetail.Item.value],date:[e.addTaskDetail.Date.time],status:[e.replaceContentData(String(e.addTaskDetail.Status),!0)],progress:[e.addTaskDetail.Progress.value],action:[e.replaceContentData(String(e.addTaskDetail.Action),!0)],remark:[e.addTaskDetail.Remark],priority:[e.addTaskDetail.Priority.value],owner:[e.addTaskDetail.Owner.value.join(",")],creatorID:[e.loginData.account]}}),e.axiosAction(n).then((function(){var t=e.axiosResult;if("[object Object]"!=Object.prototype.toString.call(t))return e.setTimeOutAlertMsg(t),void e.settimeoutalertModal(2e3);"ok"==t["Response"]?e.setTimeOutAlertMsg("新增成功"):e.setTimeOutAlertMsg(t["Response"])})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.settimeoutalertModal(),e.formReset(),setTimeout((function(){e.queryAgain()}),1200),e.addTaskModalShow=!e.addTaskModalShow,e.addTaskWhich=null}))}},addTaskClose:function(){var t=this;t.addTaskDetail=this.$options.data().addTaskDetail,t.formReset(),t.addTaskModalShow=!t.addTaskModalShow,t.addTaskWhich=null},modTask:function(t){var e=this;t.status&&e.nowFormat;var a={},o=[];if(0==e.tabIndex){o=["Group","Item","Progress","Priority","Owner","Dep"];for(var n=0;n<o.length;n++){if(""==t[o[n]])return e.setTimeOutAlertMsg("尚有未輸入的值"),void e.settimeoutalertModal();if("Progress"==o[n]||"Priority"==o[n]){if(!Zt(t[o[n]]))return e.setTimeOutAlertMsg("數字必須為正整數"),void e.settimeoutalertModal();if(t[o[n]]>100)return e.setTimeOutAlertMsg("數字必須小於100"),void e.settimeoutalertModal()}}a={methods:"PATCH",whichFunction:"CommonUpdate",table:"weeklyReport",postdata:{old_seq:[t.seq],depID:[t.depID],groupID:[t.Group],item:[t.Item],date:[t.Date.time],status:[e.replaceContentData(String(t.Status),!0)],progress:[t.Progress],action:[e.replaceContentData(String(t.Action),!0)],remark:[t.Remark],priority:[t.Priority],owner:[String(t.Owner)]}}}else{o=["Group","Item","Dep"];for(var s=0;s<o.length;s++)if(""==t[o[s]])return e.setTimeOutAlertMsg("尚有未輸入的值"),void e.settimeoutalertModal();a={methods:"PATCH",whichFunction:"CommonUpdate",table:"workedKey",postdata:{old_seq:[t.seq],depID:[t.depID],groupID:[t.Group],item:[t.Item],detail:[t.Status]}}}e.activeItemsSeq=null,e.axiosAction(a).then((function(){var t=e.axiosResult;if("[object Object]"!=Object.prototype.toString.call(t))return e.setTimeOutAlertMsg(t),void e.settimeoutalertModal(2e3);"ok"==t["Response"]?e.setTimeOutAlertMsg("修改成功"):e.setTimeOutAlertMsg(t["Response"])})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.settimeoutalertModal(),setTimeout((function(){e.queryAgain()}),1200)}))},delTask:function(){var t=this,e={};e=0==t.tabIndex?{methods:"DELETE",whichFunction:"CommonDelete",table:"weeklyReport",postdata:{seq:[t.delItemSeq]}}:{methods:"DELETE",whichFunction:"CommonDelete",table:"workedKey",postdata:{seq:[t.delItemSeq]}},t.axiosAction(e).then((function(){var e=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(e))return t.setTimeOutAlertMsg(e),void t.settimeoutalertModal(2e3);"ok"==e["Response"]?t.setTimeOutAlertMsg("刪除成功"):t.setTimeOutAlertMsg(e["Response"])})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal(),setTimeout((function(){t.items=[],t.queryAgain()}),1200),t.delTaskModalShow=!t.delTaskModalShow}))},dateDisabled:function(t,e){var a=e.getDay();e.getDate();return 0===a||6===a},rowClass:function(t,e){if(t&&"row"===e)return t.status?{style:"background-color:rgba(0, 0, 0, 0.144)"}:void 0},check_required:function(t,e){return e.invalid=t,!t},check_positivenumvalid:function(t,e){return e.positivenumvalid=t,!t},formReset:function(){var t=this;t.addTaskDetail={Group:{key:"Group",value:null,invalid:!1},Date:{time:""},Item:{key:"Item",value:null,invalid:!1},Status:"",Progress:{key:"Progress",value:null,invalid:!1},Action:"",Remark:"",Priority:{key:"Priority",value:null,invalid:!1},Dep:{key:"Dep",value:null,invalid:!1},Owner:{key:"Owner",value:[],invalid:!1}},t.$nextTick((function(){t.$v.$reset()}))},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)},shuffle:function(t,e){var a=Math.random()>.5?-1:1;return a},checkExportFileLegal:function(){var t=this;if(0==t.items.length)return t.setTimeOutAlertMsg("無資料可匯出"),void t.settimeoutalertModal();0==t.tabIndex?(t.setTimeOutAlertMsg("系統將自動查詢該時間區段的『下週重點』資料"),t.settimeoutalertModal(),t.tabIndex=1,setTimeout((function(){t.exportModalShow=!0}),200)):t.exportModalShow=!0},exportFile:function(t){var e=this;e.togglealertModal(!0),setTimeout((function(){var a=JSON.parse(JSON.stringify(e.tempData));a.map((function(t){delete t.seq,delete t.depID,t.Date=t.Date.time,t.Status=e.replaceContentData(String(t.Status),!1),t.Action=e.replaceContentData(String(t.Action),!1);for(var a=t.Owner.split(","),o=0;o<a.length;o++)a[o]=e.staffConfig[a[o]],o==a.length-1&&(t.Owner=a.join(","))}));var o=JSON.parse(JSON.stringify(e.items)),n=["人事","困難與問題","會議","拜訪","測試"],s=["人事","困難與問題","會議","拜訪","測試"],i=[],r=[];o.map((function(t){delete t.seq,delete t.depID,t.Status=e.replaceContentData(String(t.Status),!1)})),o.filter((function(t){n.includes(t.Group)?(s.splice(s.indexOf(t.Group),1),r.push(t)):i.push(t)})),0==r.length?n.forEach((function(t){var e={Group:t,Item:"",Status:""};r.push(e)})):r.length<5&&s.forEach((function(t){var e={Group:t,Item:"",Status:""};r.push(e)}));var l="全部門";"ALL"!=e.inputData.selected&&(l=e.depConfig[e.inputData.selected]);var c="Weekly Report_"+e.thisQueryTimeInterval[0].replace(/-/g,"")+"-"+e.thisQueryTimeInterval[1].split("-")[1]+e.thisQueryTimeInterval[1].split("-")[2]+"_"+l+"_"+e.loginData.username;if(e.exportTitle=l,"CSV"===t){a.map((function(t){delete t.priority}));var m=a.map((function(t){return Object.values(t)}));m.forEach((function(t){t[0]=" "+t[0]})),m.unshift(["Group","Item","Date","Status","Progress%","Action","Remark","Owner"]),e.setautoTable({body:m,exportfilename:c,exportfiletype:t})}else{var d="";d="DEFAULT"==e.thisQueryTimeInterval?e.thisweekday.join(" ~ "):"ALL"==e.thisQueryTimeInterval?"資料表內所有資料":e.thisQueryTimeInterval.join(" ~ "),e.exportDate=d;var u={};e.exportPDFselected&&(u={rowSpan:["Group"],rowSpanOrderBy:["asc"]});var p=function(){var t=Object(jt["a"])(regeneratorRuntime.mark((function t(){var o,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.adjustExportDataFormat(a,u,{halign:"left"},[!1],!0,[["Priority","asc"]]);case 2:return o=t.sent,t.next=5,e.adjustExportDataFormat(i,Object.assign(u,{colSpan:{Status:6,Separate:8}}),{halign:"left"},[!0,{Separate:"下週工作重點"}],!0,[["Item","desc"]]);case 5:return n=t.sent,t.next=8,e.adjustExportDataFormat(r,Object.assign(u,{colSpan:{Status:6,Separate:8}}),{halign:"left"},[!0,{Separate:"Others"}],!1,[["Item","desc"]]);case 8:return s=t.sent,t.abrupt("return",o.concat(n).concat(s));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();p().then((function(t){e.setautoTableStatus(!0),e.setautoTable({body:t,columns:e.exportColumns,columnStyles:e.exportColumnStyles,headStyles:e.exportHeadStyles,exportfilename:c,exportfiletype:"PDF",text:[e.exportTitle,e.exportDate]})})).catch((function(t){}))}e.exportModalShow=!1}),100)},adjustExportDataFormat:function(t,e,a,o,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],i=this,r={};if(e.hasOwnProperty("rowSpan")){var l=e.rowSpan.map((function(t,a){return[t,e.rowSpanOrderBy[a]]})).concat(s);t=t.sort(i.dataSorted(l)),t.map((function(t){delete t.Priority}));for(var c=e.rowSpan,m=0;m<t.length;m++)for(var d=0;d<c.length;d++){0==d&&(r[c[d]]||(r[c[d]]={}));var u=m;o[0]&&(u+=1),r=i.adjustCheckDuplicateObj(t[m],c[d],c,r,u)}}else 0!=s.length&&(t=t.sort(i.dataSorted(s)));return 0!=t.length&&o[0]&&t.unshift(o[1]),new Promise((function(o,s){i.adjustPDFbody(t,a,e,r,n).then((function(t){o(t)}))}))},adjustPDFbody:function(t,e,a,o,n){var s=this;return new Promise((function(i,r){for(var l=s,c=JSON.parse(JSON.stringify(o)),m=[[238,174,145],[221,160,221],[244,164,96],[222,184,135],[144,238,144],[240,230,140],[210,180,140],[255,182,193],[255,222,173],[143,188,143]],d=[],u=0;u<t.length;u++){var p=[];for(var f in t[u]){var h=0,g=e.halign,b=[255,255,255],v=[0,0,0],y=t[u][f];if(a.hasOwnProperty("colSpan")&&a.colSpan.hasOwnProperty(f)&&(h=a.colSpan[f]),a.hasOwnProperty("rowSpan")&&a.rowSpan.includes(f)){var D=0,S=0,k=o;if(!o[f]){var x=a.rowSpan.slice();x.splice(x.indexOf(f),x.length-x.indexOf(f));for(var _=0;_<x.length;_++)k=l.catchFather(t[u],x[_],k)}var M=k[f][y]["INDEX"],T=k[f][y]["COUNT"];if(D=M[0],S=T[0],u==D&&(T.splice(0,1),M.splice(0,1)),n&&"Group"===f){var O=Object.keys(o[f]);b=m[O.indexOf(y)%10]}u==D&&(g="center",p.push({colSpan:h,rowSpan:S,content:t[u][f],styles:{textColor:v,valign:"middle",halign:g,fillColor:b}}))}else"Progress"===f&&(Number(y)>=100&&(v=[0,179,60]),y+="%",g="center"),"Separate"===f&&(b=[211,211,211],g="center"),p.push({colSpan:h,content:y,styles:{textColor:v,valign:"middle",halign:g,fillColor:b}})}d.push(p)}var w={body:d,columns:l.exportColumns,columnStyles:l.exportColumnStyles,headStyles:l.exportHeadStyles,exportfiletype:"PDF",text:[l.exportTitle,l.exportDate]};l.setautoTableStatus(!1),l.setautoTable(w).then((function(){0==l.errorFormat.length?i(d):(l.errorFormat.forEach((function(e){var a=l.getDivideNumber(c.Group[t[e.index].Group]["COUNT"],c.Group[t[e.index].Group]["INDEX"],e.division,e.index);c.Group[t[e.index].Group]["COUNT"]=a[1],c.Group[t[e.index].Group]["INDEX"]=a[0]})),l.adjustPDFbody(t,e,a,c,n).then((function(t){i(t)})))})).catch((function(t){}))}))},getDivideNumber:function(t,e,a,o){var n=[],s=[];t.length>1&&(s=e.slice(0,e.indexOf(o)),n=t.slice(0,e.indexOf(o)));for(var i=Math.ceil(t[e.indexOf(o)]/a),r=0;r<a;r++)s.push(o+i*r),t[e.indexOf(o)]%a==0?n.push(i):r==a-1?n.push(t[e.indexOf(o)]-i*r):n.push(i);return[s,n]},catchFather:function(t,e,a){return a[e][t[e]]},adjustCheckDuplicateObj:function(t,e,a,o,n){var s=this,i=a.slice();i.splice(i.indexOf(e),i.length-i.indexOf(e));var r=o;if(0!=i.length)for(var l=0;l<i.length;l++)r=s.catchFather(t,i[l],r);return r=s.adjustCheckDuplicateObj2(r,e,t,n),o},adjustCheckDuplicateObj2:function(t,e,a,o){return t[e]||(t[e]={}),t[e][a[e]]?t[e][a[e]]["COUNT"][0]+=1:(t[e][a[e]]={},t[e][a[e]]["COUNT"]=[1]),"undefined"==typeof t[e][a[e]]["INDEX"]&&(t[e][a[e]]["INDEX"]=[o]),t},replaceContentData:function(t,e){return e?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):t.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g," ")}})},ee=te,ae=(a("1be0"),a("b265"),Object(b["a"])(ee,Kt,Xt,!1,null,"359c50a8",null)),oe=ae.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MeetingMinutes container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("會議記錄")])])],1),a("b-modal",{attrs:{centered:"","no-close-on-backdrop":"","no-close-on-esc":"",scrollable:"",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("新增會議記錄")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("會議日期:")])]),a("b-col",{attrs:{sm:"5"}},[a("datepicker",{attrs:{date:t.form.date,option:t.datepickerOptions}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("會議標題:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"===typeof e?e.trim():e)},expression:"form.title"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 儲存路徑: "),a("br"),a("span",{staticStyle:{"font-style":"italic","font-size":"15px"}},[t._v("根目錄:")]),a("b-form-select",{staticStyle:{width:"100px !important"},attrs:{options:t.form.rootTree,size:"sm"},on:{change:function(e){return t.rootChange(e)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("選擇根目錄")])]},proxy:!0}]),model:{value:t.form.root,callback:function(e){t.$set(t.form,"root",e)},expression:"form.root"}})],1)]),a("b-col",{attrs:{sm:"8"}},t._l(t.form.pathTree,(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block","margin-right":"10px"}},[a("b-form-select",{attrs:{options:e},on:{change:function(e){return t.pathChange(!0,e,o)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("無選擇則放在此層目錄下")])]},proxy:!0}],null,!0),model:{value:t.form.path[o],callback:function(e){t.$set(t.form.path,o,e)},expression:"form.path[key]"}}),t._v(" / ")],1)})),0),a("b-col",{staticClass:"text-right",attrs:{sm:"2"}},[a("b-button",{attrs:{id:"addFolder",pill:""},on:{click:function(e){return t.toggleAddSMBFolderModal(!0)}}},[t._v("新建資料夾")]),a("b-tooltip",{attrs:{target:"addFolder"}},[a("span",[t._v("將會建在左側選單中的最後一層資料夾下")])])],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 附件: "),a("br"),t._v("(小於1000MB) ")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-file",{ref:"file",staticClass:"mb-2",attrs:{multiple:"",type:"file","file-name-formatter":t.formatNames,accept:"image/*, .pdf, .zip, audio/*"},on:{change:t.fileChange},model:{value:t.form.files,callback:function(e){t.$set(t.form,"files",e)},expression:"form.files"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("機密:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}})],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.addAction()}}},[t._v("上傳")])],1),a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.addModalShow=!1,t.reset(["tabIndex","depStaffRelation","items"])}}},[t._v("Close")])],1)])],1)]},proxy:!0},{key:"modal-footer",fn:function(){},proxy:!0}]),model:{value:t.addModalShow,callback:function(e){t.addModalShow=e},expression:"addModalShow"}}),a("b-modal",{attrs:{centered:"","no-close-on-backdrop":"","no-close-on-esc":"",scrollable:"",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("修改會議記錄")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("會議日期:")])]),a("b-col",{attrs:{sm:"5"}},[a("datepicker",{attrs:{date:t.modfrom.date,option:t.datepickerOptions}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("會議標題:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.modfrom.title,callback:function(e){t.$set(t.modfrom,"title",e)},expression:"modfrom.title"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("原附件: "),a("br"),a("div",{staticStyle:{"font-style":"italic","font-size":"15px"}},[a("span",[t._v("根目錄: ")]),""!=t.modfrom.path?a("span",[t._v(t._s(t.modfrom.path))]):a("span",[t._v("無設定根目錄，無法新增檔案")])])])]),a("b-col",{attrs:{sm:"10"}},[""==t.modfrom.old_filename?a("p",[t._v("無")]):t._l(t.modfrom.old_filename.split(","),(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block",position:"relative","margin-right":"15px","margin-bottom":"10px"}},[a("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[t._v(t._s(e))]),a("div",{staticClass:"deletefilebtn",on:{click:function(a){return a.preventDefault(),t.deletefile(e)}}})],1)}))],2)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 附件: "),a("br"),t._v("(小於1000MB) ")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-file",{ref:"file",staticClass:"mb-2",attrs:{disabled:""===t.modfrom.path,multiple:"",type:"file","file-name-formatter":t.formatNames,accept:"image/*, .pdf, .zip, audio/*"},on:{change:t.fileChange},model:{value:t.modfrom.files,callback:function(e){t.$set(t.modfrom,"files",e)},expression:"modfrom.files"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("機密:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.modfrom.level,callback:function(e){t.$set(t.modfrom,"level",e)},expression:"modfrom.level"}})],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.modAction()}}},[t._v("送出")])],1),a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.reset(["tabIndex","depStaffRelation","items"])}}},[t._v("Close")])],1)])],1)]},proxy:!0},{key:"modal-footer",fn:function(){},proxy:!0}]),model:{value:t.modModalShow,callback:function(e){t.modModalShow=e},expression:"modModalShow"}}),t.addFolderModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",[t._v("新增資料夾")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"8"}},t._l(t.addFolderItem.pathTree,(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block","margin-top":"10px"}},[a("b-form-select",{attrs:{options:e},on:{change:function(e){return t.pathChange(!1,e,o)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("無選擇則放在此層目錄下")])]},proxy:!0}],null,!0),model:{value:t.addFolderItem.path[o],callback:function(e){t.$set(t.addFolderItem.path,o,e)},expression:"addFolderItem.path[key]"}}),t._v(" / ")],1)})),0)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"3"}},[a("label",{attrs:{for:"input-default"}},[t._v("資料夾名稱:")])]),a("b-col",{attrs:{sm:"7"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.addFolderItem.name,callback:function(e){t.$set(t.addFolderItem,"name","string"===typeof e?e.trim():e)},expression:"addFolderItem.name"}})],1)],1)]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleAddSMBFolderModal(!1)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.addFolder()}}},[t._v("送出")])],1)]},proxy:!0}],null,!1,2579662435)}):t._e()],1)},se=[],ie={name:"MeetingMinutes",data:function(){return{tabIndex:0,addModalShow:!1,modModalShow:!1,addFolderModalShow:!1,commonqueryCollapseShow:!1,form:{date:{time:""},title:"",filename:[],files:[],level:!1,root:null,rootTree:[],path:[],pathTree:[]},slotList:["title","filename"],fields:[{key:"depID",label:"部門",sortable:!0},{key:"title",label:"會議標題",sortable:!0},{key:"date",label:"會議日期",sortable:!0},{key:"filename",label:"檔案列表",sortable:!1},{key:"Action",label:"Action",sortable:!1}],items:[],datepickerOptions:{type:"day",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD",placeholder:"",inputStyle:{display:"inline-block",padding:"5px","line-height":"22px","font-size":"16px","text-align":"center",border:"2px solid #fff","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.2)","border-radius":"2px",color:"#5F5F5F",width:"150px"},color:{header:"#ccc",headerText:"#f00"},overlayOpacity:.5,dismissible:!0},depStaffRelation:null,modfrom:{index:"",date:{time:""},title:"",old_filename:"",filename:[],files:[],level:!1,path:""},smbPathList:[],addFolderItem:{name:null,path:[],pathTree:[]}}},created:function(){},mounted:function(){},components:{datepicker:Q["a"],commonQuery:H,modal:y,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",pageAccess:"getlogin/get_pageAccess",loginData:"getlogin/get_loginData",depDetail:"getlogin/get_depDetail",queryResponse:"commonquery/get_queryResponse",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",getDate:"getdate/get_Date",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),watch:{queryResponse:{handler:function(){var t=this;if(t.togglealertModal(!1),t.reset(["tabIndex","depStaffRelation"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.getDataList()}},tabIndex:{handler:function(t){this.reset(["tabIndex","depStaffRelation","items"]),0===t&&this.fields.splice(4,1),this.settableInWhichTab({index:t,which:"MeetingMinutes"}),this.settableDetail({items:this.items,fields:this.fields})}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosAction:"commonaxios/axiosAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",alertProgressModal:"alertmodal/toggle_alertProgressModal",setalertMsgProgressValue:"alertmodal/set_alertMsgProgressValue",queryAgain:"commonquery/do_queryAgain",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",setSystemFormCompletedData:"systemform/set_completedData",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab"})),{},{SetCommonQueryData:function(){var t=this,e=[],a="";t.pageAccess.report.children.meetingminutes.remark.commonQueryCondition.main.map((function(a){var o="";o=t.depDetail.config.hasOwnProperty(a)?t.depDetail.config[a]:"共用",e.push({text:o,value:String(a)})})),4===t.pageAccess.report.children.meetingminutes.remark.commonQueryCondition.main.length?(e.push({text:"全選",value:"ALL"}),a="ALL"):a=String(t.pageAccess.report.children.meetingminutes.remark.commonQueryCondition.main[0]);var o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=e,o.selected=a,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));if(n.normal.table="meetingMinutes",n.normal.attr="depID",n.normal.timeattr="date",n.normal.intervaltime={date:[[t.getDate.thisweekday[0]+" 00:00:00",t.getDate.thisweekday[1]+" 23:59:59"]]},"employee"===t.pageAccess.report.children.meetingminutes.remark.commonQueryCondition.secondary){var s=0;n.customized={condition_1:{where:{level:[s]},symbols:{level:["equal"]}}}}t.setapiParams(n)},getBelongDepStaff:function(){var t=this,e={methods:"POST",whichFunction:"CommonSqlSyntaxQuery"};e["condition"]={condition_1:{table:"user",fields:["noumenonID"],where:{uID:[t.loginData.account]},symbols:{uID:["equal"]}}};var a=!1;t.axiosAction(e).then((function(){var e=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(e))return t.setTimeOutAlertMsg(e),void(a=!0);"ok"==e["Response"]?0==e["QueryTableData"].length?(t.setTimeOutAlertMsg("查無資料"),a=!0):t.depStaffRelation=e["QueryTableData"][0]["noumenonID"]:(t.setTimeOutAlertMsg(e["Response"]),a=!0)})).catch((function(e){t.setTimeOutAlertMsg(e),a=!0})).finally((function(){a&&t.settimeoutalertModal()}))},getDataList:function(){var t=this;t.togglealertModal(!0);var e={};t.queryResponse.forEach((function(a){e={seq:a.seq,depID:a.depID,date:{time:a.date},title:a.title,filename:a.filename,path:a.path};var o=!1;a.level&&(o=!0),e["level"]=o,"query"==t.pageAccess.report.children.meetingminutes.remark.dataHandleAuthority&&a.level||t.items.push(e)})),0===t.tabIndex&&t.fields.splice(4,1),t.settableDetail({items:t.items,fields:t.fields,which:"meetingMinutes",children:{}}),t.togglealertModal(!1)},addAction:function(){var t=this,e=t.form.root;if(0!=this.form.files.length){if(null===e)return t.setTimeOutAlertMsg("尚未選擇根目錄"),void t.settimeoutalertModal();for(var a=0;a<t.form.path.length;a++){var o=t.form.path[a];null!=o&&(e+="/"+o)}}else e="";for(var n=new FormData,s=0;s<this.form.files.length;s++){var i=this.form.files[s];if(i.size>1048576e3)return t.setTimeOutAlertMsg("檔名:"+i.name+"檔案太大"),void t.settimeoutalertModal(1200);n.append("fileToUpload["+s+"]",i)}var r=0;t.form.level&&(r=1);var l=t.depStaffRelation;"共用"===t.form.root&&(l="common"),n.append("title",t.form.title),n.append("date",t.form.date.time),n.append("filename",t.form.filename),n.append("depID",l),n.append("level",r),n.append("path",e),n.append("account",t.loginData.account);var c={headers:{"Content-Type":"multipart/form-data"}};t.alertProgressModal(!0);var m=N.a.create({withCredentials:!0,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setalertMsgProgressValue(a)}});m.post("/php/views/meetingminutes/meetingMinutesAdd.php",n,c).then(function(e){var a=e.data;t.setTimeOutAlertMsg(a);var o=0;o=1==a.length?1200:a.length<4?1500:2500,t.settimeoutalertModal(o),t.reset(["tabIndex","depStaffRelation","items"])}.bind(this)).catch((function(e){413===e.response.status?t.setTimeOutAlertMsg("Error 413: Request entity too large，檔案太大"):t.setTimeOutAlertMsg(e),t.settimeoutalertModal()})).finally((function(){t.alertProgressModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},formatNames:function(t){for(var e=this,a=0;a<t.length;a++)e.addModalShow?e.form.filename.push(t[a].name):e.modModalShow&&e.modfrom.filename.push(t[a].name);return t.length>3?"".concat(t.length," files selected"):e.addModalShow?"".concat(e.form.filename):e.modModalShow?"".concat(e.modfrom.filename):void 0},fileChange:function(){var t=this;t.addModalShow?t.form.filename.length=0:t.modModalShow&&(t.modfrom.filename.length=0)},onDownload:function(t){var e=t.data,a=t.data2,o=this,n=!1;N()({url:"/php/views/meetingminutes/meetingMinutesSMBAction.php",method:"POST",data:{whichFunction:"downloadFromSMB",data:{file:e,path:a}}}).then((function(t){"ok"==t.data?s(e):(o.setTimeOutAlertMsg(t.data),n=!0)})).catch((function(t){o.setTimeOutAlertMsg(t),n=!0})).finally((function(){n&&o.settimeoutalertModal(1500)}));var s=function(t){o.alertProgressModal(!0),N()({url:"./tempfiles/"+t,method:"GET",responseType:"blob",onDownloadProgress:function(t){var e=Math.round(100*t.loaded/t.total);o.setalertMsgProgressValue(e)}}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n),o.alertProgressModal(!1),i(t)})).catch((function(t){o.alertProgressModal(!1),o.setTimeOutAlertMsg(t),o.settimeoutalertModal(1500)}))},i=function(t){N()({url:"/php/views/meetingminutes/meetingMinutesSMBAction.php",method:"POST",data:{whichFunction:"deleteFileFromLocalhost",data:t}}).then((function(t){})).catch((function(t){}))}},modAction:function(){var t=this;if(0!=t.modfrom.files.length&&""!=t.modfrom.old_filename){if(t.modfrom.filename.length>t.modfrom.old_filename.split(",").length)return t.setTimeOutAlertMsg("上傳附件數量大於原附件數量"),t.settimeoutalertModal(1500),t.modfrom.files="",void(t.modfrom.filename.length=0);for(var e=0;e<t.modfrom.filename.length;e++)if(-1==t.modfrom.old_filename.split(",").indexOf(t.modfrom.filename[e]))return t.setTimeOutAlertMsg("上傳附件檔名:"+t.modfrom.filename[e]+"應與原附件名稱相同"),t.settimeoutalertModal(1500),t.modfrom.files="",void(t.modfrom.filename.length=0)}var a=new FormData;for(e=0;e<t.modfrom.files.length;e++){var o=t.modfrom.files[e];if(o.size>1048576e3)return t.setTimeOutAlertMsg("檔名:"+o.name+"檔案太大"),void t.settimeoutalertModal(1200);a.append("fileToUpload["+e+"]",o)}a.append("deletefile",""),a.append("seq",t.modfrom.seq),a.append("title",t.modfrom.title),a.append("date",t.modfrom.date.time);var n=0;t.modfrom.level&&(n=1),a.append("level",n),a.append("path",t.modfrom.path),""==t.modfrom.old_filename?a.append("filename",t.modfrom.filename):a.append("filename",t.modfrom.old_filename),a.append("account",t.loginData.account);var s={headers:{"Content-Type":"multipart/form-data"}};t.alertProgressModal(!0);var i=N.a.create({withCredentials:!0,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setalertMsgProgressValue(a)}});i.post("/php/views/meetingminutes/meetingMinutesMod.php",a,s).then(function(e){var a=e.data;t.setTimeOutAlertMsg(a);var o=0;o=1==a.length?1e3:a.length<4?1500:2500,t.settimeoutalertModal(o),t.reset(["tabIndex","depStaffRelation","items"])}.bind(this)).catch((function(t){})).finally((function(){t.alertProgressModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},deletefile:function(t){var e=this,a=e.modfrom.old_filename.split(",");a.splice(a.indexOf(t),1);var o=a.join(","),n=new FormData;n.append("seq",e.modfrom.seq),n.append("deletefile",t),n.append("path",e.modfrom.path),n.append("remainfile",o);var s={headers:{"Content-Type":"multipart/form-data"}};e.togglealertModal(!0);var i=N.a.create({withCredentials:!0});i.post("/php/views/meetingminutes/meetingMinutesMod.php",n,s).then(function(t){var a=t.data;e.modfrom.old_filename=o,e.items[e.modfrom.index].filename=o,e.setTimeOutAlertMsg(a),e.settimeoutalertModal(1e3)}.bind(this)).catch((function(t){})).finally((function(){e.togglealertModal(!1)}))},delAction:function(t){var e=t.data.filename;""!=e&&(e=e.split(","));var a=t.data.seq,o=t.data.path,n=this;n.togglealertModal(!0);var s={};s["filename"]=e,s["seq"]=a,s["path"]=o,N.a.post("/php/views/meetingminutes/meetingMinutesDel.php",s).then(function(t){var e=t.data;n.setTimeOutAlertMsg(e),n.settimeoutalertModal()}.bind(this)).catch((function(t){})).finally((function(){n.togglealertModal(!1),n.togglecommonModal(!1),setTimeout((function(){n.queryAgain()}),1200)}))},toggleAddModal:function(){var t=this;t.pageAccess.report.children.meetingminutes.remark.commonQueryCondition.main.map((function(e){var a="";a=t.depDetail.config.hasOwnProperty(e)?t.depDetail.config[e]:"共用",t.form.rootTree.push({text:a,value:a})})),t.addModalShow=!0,t.form.date.time=t.getDate.nowFormat},addFolder:function(){var t=this,e=t.form.root;if(""==t.addFolderItem.name||null===t.addFolderItem.name)return t.setTimeOutAlertMsg("資料夾名稱不可為空"),void t.settimeoutalertModal();for(var a=0;a<t.addFolderItem.path.length;a++){var o=t.addFolderItem.path[a];if(null===o){if(-1!=t.smbPathList.indexOf(t.addFolderItem.name))return t.setTimeOutAlertMsg("資料夾名稱不可重複"),void t.settimeoutalertModal()}else e+="/"+o}var n=!1;N()({url:"/php/views/meetingminutes/meetingMinutesSMBAction.php",method:"POST",data:{whichFunction:"addNewSMBFolder",data:{path:e,foldername:t.addFolderItem.name}}}).then((function(e){if(t.setTimeOutAlertMsg(e.data),"ok"==e.data){t.form.path.length=0,t.form.pathTree.length=0,t.smbPathList.length=0;var a=t.form.root,o=function(){var e=Object(jt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getSMBFolderList(a,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o().then((function(e){"ok"==e?t.setTimeOutAlertMsg("新增資料夾成功"):t.setTimeOutAlertMsg(e)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal()}))}else n=!0,t.setTimeOutAlertMsg(e.data)})).catch((function(e){n=!0,t.setTimeOutAlertMsg(e)})).finally((function(){n&&t.settimeoutalertModal(1500),t.toggleAddSMBFolderModal(!1)}))},toggleAddSMBFolderModal:function(t){var e=this;if(null===e.form.root)return e.setTimeOutAlertMsg("請先選擇根目錄"),void e.settimeoutalertModal();t?(e.addFolderItem.path=JSON.parse(JSON.stringify(e.form)).path.map((function(){return null})),e.addFolderItem.pathTree=JSON.parse(JSON.stringify(e.form)).pathTree):(e.addFolderItem.name=null,e.addFolderItem.path=[],e.addFolderItem.pathTree=[]),e.addFolderModalShow=t,e.togglecommonModal(t)},getSMBFolderList:function(t,e){var a=this;return new Promise((function(o,n){N()({url:"/php/views/meetingminutes/meetingMinutesSMBAction.php",method:"POST",data:{whichFunction:"getSMBFoldersList",data:t}}).then((function(t){if("ok"==t.data.Response){for(var s=[],i=2;i<t.data.data.length-2;i++){var r=t.data.data[i].filter((function(t){if(""!=t)return t}));if(r.splice(r.length-6,r.length),"D"==r[r.length-1])if(2!=r.length){r[r.length-1];r.splice(r.length-1,1);var l=r.join(" ");s.push({text:l,value:l}),a.smbPathList.push(l)}else s.push({text:r[0],value:r[0]}),a.smbPathList.push(r[0])}0!=s.length&&(e?(a.form.path.push(null),a.form.pathTree.push(s)):(a.addFolderItem.path.push(null),a.addFolderItem.pathTree.push(s))),o("ok")}else"無資料夾"==t.data.Response?o("ok"):n(t.data.Response)})).catch((function(t){n(t)}))}))},rootChange:function(t){var e=this;e.form.path=[],e.form.pathTree=[],e.smbPathList=[];var a=function(){var a=Object(jt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getSMBFolderList(t,!0);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a().then((function(t){})).catch((function(t){e.setTimeOutAlertMsg(t),e.settimeoutalertModal()}))},pathChange:function(t,e,a){var o=this,n=[],s=[],i=o.form.root;t?(n=o.form.path,s=o.form.pathTree):(n=o.addFolderItem.path,s=o.addFolderItem.pathTree),n.splice(a+1,n.length-a),s.splice(a+1,s.length-a);for(var r=0;r<n.length;r++){var l=n[r];null!=l&&(i+="/"+l)}var c=function(){var e=Object(jt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.getSMBFolderList(i,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c().then((function(t){})).catch((function(t){}))},toggleModModal:function(t){var e=t.data,a=t.data2,o=JSON.parse(JSON.stringify(e)),n=this;n.modfrom.index=a,n.modfrom.seq=o.seq,n.modfrom.title=o.title,n.modfrom.date=o.date,n.modfrom.old_filename=o.filename;var s=!1;o.level&&(s=!0),n.modfrom.level=s,n.modfrom.path=o.path,n.modModalShow=!0},getCellSlot:function(t){return"cell(".concat(t,")")},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},re=ie,le=(a("0bea"),Object(b["a"])(re,ne,se,!1,null,"f47f8a2e",null)),ce=le.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SOP container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("SOP文件")])])],1),a("b-modal",{attrs:{centered:"","no-close-on-backdrop":"","no-close-on-esc":"",scrollable:"",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("新增SOP文件")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("大綱")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"===typeof e?e.trim():e)},expression:"form.title"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("用途")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.application,callback:function(e){t.$set(t.form,"application","string"===typeof e?e.trim():e)},expression:"form.application"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 儲存路徑: "),a("br"),a("span",{staticStyle:{"font-style":"italic","font-size":"15px"}},[t._v("根目錄:")]),a("b-form-select",{staticStyle:{width:"100px !important"},attrs:{options:t.form.rootTree,size:"sm"},on:{change:function(e){return t.rootChange(e)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("選擇根目錄")])]},proxy:!0}]),model:{value:t.form.root,callback:function(e){t.$set(t.form,"root",e)},expression:"form.root"}})],1)]),a("b-col",{attrs:{sm:"8"}},t._l(t.form.pathTree,(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block","margin-right":"10px"}},[a("b-form-select",{attrs:{options:e},on:{change:function(e){return t.pathChange(!0,e,o)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("無選擇則放在此層目錄下")])]},proxy:!0}],null,!0),model:{value:t.form.path[o],callback:function(e){t.$set(t.form.path,o,e)},expression:"form.path[key]"}}),t._v(" / ")],1)})),0),a("b-col",{staticClass:"text-right",attrs:{sm:"2"}},[a("b-button",{attrs:{id:"addFolder",pill:""},on:{click:function(e){return t.toggleAddSMBFolderModal(!0)}}},[t._v("新建資料夾")]),a("b-tooltip",{attrs:{target:"addFolder"}},[a("span",[t._v("將會建在左側選單中的最後一層資料夾下")])])],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 附件: "),a("br"),t._v("(小於1000MB) ")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-file",{ref:"file",staticClass:"mb-2",attrs:{multiple:"",type:"file","file-name-formatter":t.formatNames,accept:"image/*, .pdf, .zip, audio/*"},on:{change:t.fileChange},model:{value:t.form.files,callback:function(e){t.$set(t.form,"files",e)},expression:"form.files"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("機密:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}})],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.addAction()}}},[t._v("上傳")])],1),a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.addModalShow=!1,t.reset(["tabIndex","depStaffRelation","items"])}}},[t._v("Close")])],1)])],1)]},proxy:!0},{key:"modal-footer",fn:function(){},proxy:!0}]),model:{value:t.addModalShow,callback:function(e){t.addModalShow=e},expression:"addModalShow"}}),a("b-modal",{attrs:{centered:"","no-close-on-backdrop":"","no-close-on-esc":"",scrollable:"",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("修改SOP文件")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("大綱:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.modfrom.title,callback:function(e){t.$set(t.modfrom,"title",e)},expression:"modfrom.title"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"input-default"}},[t._v("用途:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.modfrom.application,callback:function(e){t.$set(t.modfrom,"application",e)},expression:"modfrom.application"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("原附件: "),a("br"),a("div",{staticStyle:{"font-style":"italic","font-size":"15px"}},[a("span",[t._v("根目錄: ")]),""!=t.modfrom.path?a("span",[t._v(t._s(t.modfrom.path))]):a("span",[t._v("無設定根目錄，無法新增檔案")])])])]),a("b-col",{attrs:{sm:"10"}},[""==t.modfrom.old_filename?a("p",[t._v("無")]):t._l(t.modfrom.old_filename.split(","),(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block",position:"relative","margin-right":"15px","margin-bottom":"10px"}},[a("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[t._v(t._s(e))]),a("div",{staticClass:"deletefilebtn",on:{click:function(a){return a.preventDefault(),t.deletefile(e)}}})],1)}))],2)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 附件: "),a("br"),t._v("(小於1000MB) ")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-file",{ref:"file",staticClass:"mb-2",attrs:{disabled:""===t.modfrom.path,multiple:"",type:"file","file-name-formatter":t.formatNames,accept:"image/*, .pdf, .zip, audio/*"},on:{change:t.fileChange},model:{value:t.modfrom.files,callback:function(e){t.$set(t.modfrom,"files",e)},expression:"modfrom.files"}})],1)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v("機密:")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:t.modfrom.level,callback:function(e){t.$set(t.modfrom,"level",e)},expression:"modfrom.level"}})],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.modAction()}}},[t._v("送出")])],1),a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.reset(["tabIndex","depStaffRelation","items"])}}},[t._v("Close")])],1)])],1)]},proxy:!0},{key:"modal-footer",fn:function(){},proxy:!0}]),model:{value:t.modModalShow,callback:function(e){t.modModalShow=e},expression:"modModalShow"}}),t.addFolderModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",[t._v("新增資料夾")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"8"}},t._l(t.addFolderItem.pathTree,(function(e,o){return a("div",{key:o,staticStyle:{display:"inline-block","margin-top":"10px"}},[a("b-form-select",{attrs:{options:e},on:{change:function(e){return t.pathChange(!1,e,o)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("無選擇則放在此層目錄下")])]},proxy:!0}],null,!0),model:{value:t.addFolderItem.path[o],callback:function(e){t.$set(t.addFolderItem.path,o,e)},expression:"addFolderItem.path[key]"}}),t._v(" / ")],1)})),0)],1),a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"3"}},[a("label",{attrs:{for:"input-default"}},[t._v("資料夾名稱:")])]),a("b-col",{attrs:{sm:"7"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.addFolderItem.name,callback:function(e){t.$set(t.addFolderItem,"name","string"===typeof e?e.trim():e)},expression:"addFolderItem.name"}})],1)],1)]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleAddSMBFolderModal(!1)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.addFolder()}}},[t._v("送出")])],1),t._v(" "+t._s(t.addFolderItem)+" ")]},proxy:!0}],null,!1,17512104)}):t._e()],1)},de=[],ue={name:"SOP",data:function(){return{tabIndex:0,addModalShow:!1,modModalShow:!1,addFolderModalShow:!1,commonqueryCollapseShow:!1,form:{title:"",application:"",filename:[],files:[],level:!1,root:null,rootTree:[],path:[],pathTree:[]},fields:[{key:"depID",label:"部門",sortable:!0},{key:"title",label:"大綱",sortable:!1},{key:"application",label:"用途",sortable:!1},{key:"filename",label:"檔案列表",sortable:!1},{key:"Action",label:"Action",sortable:!1}],items:[],depStaffRelation:null,modfrom:{index:"",title:"",application:"",old_filename:"",filename:[],files:[],level:!1,path:""},smbPathList:[],addFolderItem:{name:null,path:[],pathTree:[]}}},created:function(){},mounted:function(){},components:{commonQuery:H,modal:y,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",pageAccess:"getlogin/get_pageAccess",loginData:"getlogin/get_loginData",depDetail:"getlogin/get_depDetail",pageAccessConfig:"getlogin/get_pageAccessConfig",queryResponse:"commonquery/get_queryResponse",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",getDate:"getdate/get_Date",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),watch:{queryResponse:{handler:function(){var t=this;if(t.togglealertModal(!1),t.reset(["tabIndex","depStaffRelation"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.getDataList()}},tabIndex:{handler:function(t){this.reset(["tabIndex","depStaffRelation","items"]),0===t&&this.fields.splice(4,1),this.settableInWhichTab({index:t,which:"SOP"}),this.settableDetail({items:this.items,fields:this.fields})}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosAction:"commonaxios/axiosAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",alertProgressModal:"alertmodal/toggle_alertProgressModal",setalertMsgProgressValue:"alertmodal/set_alertMsgProgressValue",queryAgain:"commonquery/do_queryAgain",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",setSystemFormCompletedData:"systemform/set_completedData",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab"})),{},{SetCommonQueryData:function(){var t=this,e=[],a=t.pageAccess.report.children.sop.remark.commonQueryCondition.main;e="ALL"==t.pageAccess.report.children.sop.remark.commonQueryCondition.main?t.pageAccessConfig.report.children.sop.remark.commonQueryCondition.main.options:[{text:t.depDetail.config[t.pageAccess.report.children.sop.remark.commonQueryCondition.main],value:String(t.pageAccess.report.children.sop.remark.commonQueryCondition.main)}];var o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=e,o.selected=a,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));if(n.normal.table="SOP",n.normal.attr="depID",n.normal.intervaltime={lastUpdateTime:[[t.getDate.thisweekday[0]+" 00:00:00",t.getDate.thisweekday[1]+" 23:59:59"]]},"employee"===t.pageAccess.report.children.sop.remark.commonQueryCondition.secondary){var s=0;n.customized={condition_1:{where:{level:[s]},symbols:{level:["equal"]}}}}t.setapiParams(n)},getBelongDepStaff:function(){var t=this,e={methods:"POST",whichFunction:"CommonSqlSyntaxQuery"};e["condition"]={condition_1:{table:"user",fields:["noumenonID"],where:{uID:[t.loginData.account]},symbols:{uID:["equal"]}}};var a=!1;t.axiosAction(e).then((function(){var e=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(e))return t.setTimeOutAlertMsg(e),void(a=!0);"ok"==e["Response"]?0==e["QueryTableData"].length?(t.setTimeOutAlertMsg("查無資料"),a=!0):t.depStaffRelation=e["QueryTableData"][0]["noumenonID"]:(t.setTimeOutAlertMsg(e["Response"]),a=!0)})).catch((function(e){t.setTimeOutAlertMsg(e),a=!0})).finally((function(){a&&t.settimeoutalertModal()}))},getDataList:function(){var t=this;t.togglealertModal(!0);var e={};t.queryResponse.forEach((function(a){e={seq:a.seq,depID:a.depID,title:a.title,application:a.application,filename:a.filename,path:a.path};var o=!1;a.level&&(o=!0),e["level"]=o,"query"==t.pageAccess.report.children.sop.remark.dataHandleAuthority&&a.level||t.items.push(e)})),0===t.tabIndex&&t.fields.splice(4,1),t.settableDetail({items:t.items,fields:t.fields,which:"SOP",children:{}}),t.togglealertModal(!1)},addAction:function(){var t=this,e=t.form.root;if(0!=this.form.files.length){if(null===e)return t.setTimeOutAlertMsg("尚未選擇根目錄"),void t.settimeoutalertModal();for(var a=0;a<t.form.path.length;a++){var o=t.form.path[a];null!=o&&(e+="/"+o)}}else e="";for(var n=new FormData,s=0;s<this.form.files.length;s++){var i=this.form.files[s];if(i.size>1048576e3)return t.setTimeOutAlertMsg("檔名:"+i.name+"檔案太大"),void t.settimeoutalertModal(1200);n.append("fileToUpload["+s+"]",i)}var r=0;t.form.level&&(r=1),n.append("title",t.form.title),n.append("application",t.form.application),n.append("filename",t.form.filename),n.append("depID",t.depStaffRelation),n.append("level",r),n.append("path",e),n.append("account",t.loginData.account);var l={headers:{"Content-Type":"multipart/form-data"}};t.alertProgressModal(!0);var c=N.a.create({withCredentials:!0,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setalertMsgProgressValue(a)}});c.post("/php/views/sop/SOPAdd.php",n,l).then(function(e){var a=e.data;t.setTimeOutAlertMsg(a);var o=0;o=1==a.length?1200:a.length<4?1500:2500,t.settimeoutalertModal(o),t.reset(["tabIndex","depStaffRelation","items"])}.bind(this)).catch((function(e){413===e.response.status?t.setTimeOutAlertMsg("Error 413: Request entity too large，檔案太大"):t.setTimeOutAlertMsg(e),t.settimeoutalertModal()})).finally((function(){t.alertProgressModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},formatNames:function(t){for(var e=this,a=0;a<t.length;a++)e.addModalShow?e.form.filename.push(t[a].name):e.modModalShow&&e.modfrom.filename.push(t[a].name);return t.length>3?"".concat(t.length," files selected"):e.addModalShow?"".concat(e.form.filename):e.modModalShow?"".concat(e.modfrom.filename):void 0},fileChange:function(){var t=this;t.addModalShow?t.form.filename.length=0:t.modModalShow&&(t.modfrom.filename.length=0)},onDownload:function(t){var e=t.data,a=t.data2,o=this,n=!1;N()({url:"/php/views/sop/SOPSMBAction.php",method:"POST",data:{whichFunction:"downloadFromSMB",data:{file:e,path:a}}}).then((function(t){"ok"==t.data?s(e):(o.setTimeOutAlertMsg(t.data),n=!0)})).catch((function(t){o.setTimeOutAlertMsg(t),n=!0})).finally((function(){n&&o.settimeoutalertModal(1500)}));var s=function(t){o.alertProgressModal(!0),N()({url:"./tempfiles/"+t,method:"GET",responseType:"blob",onDownloadProgress:function(t){var e=Math.round(100*t.loaded/t.total);o.setalertMsgProgressValue(e)}}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n),o.alertProgressModal(!1),i(t)})).catch((function(t){o.alertProgressModal(!1),o.setTimeOutAlertMsg(t),o.settimeoutalertModal(1500)}))},i=function(t){N()({url:"/php/views/sop/SOPSMBAction.php",method:"POST",data:{whichFunction:"deleteFileFromLocalhost",data:t}}).then((function(t){})).catch((function(t){}))}},modAction:function(){var t=this;if(0!=t.modfrom.files.length&&""!=t.modfrom.old_filename){if(t.modfrom.filename.length>t.modfrom.old_filename.split(",").length)return t.setTimeOutAlertMsg("上傳附件數量大於原附件數量"),t.settimeoutalertModal(1500),t.modfrom.files="",void(t.modfrom.filename.length=0);for(var e=0;e<t.modfrom.filename.length;e++)if(-1==t.modfrom.old_filename.split(",").indexOf(t.modfrom.filename[e]))return t.setTimeOutAlertMsg("上傳附件檔名:"+t.modfrom.filename[e]+"應與原附件名稱相同"),t.settimeoutalertModal(1500),t.modfrom.files="",void(t.modfrom.filename.length=0)}var a=new FormData;for(e=0;e<t.modfrom.files.length;e++){var o=t.modfrom.files[e];if(o.size>1048576e3)return t.setTimeOutAlertMsg("檔名:"+o.name+"檔案太大"),void t.settimeoutalertModal(1200);a.append("fileToUpload["+e+"]",o)}a.append("deletefile",""),a.append("seq",t.modfrom.seq),a.append("title",t.modfrom.title),a.append("application",t.modfrom.application);var n=0;t.modfrom.level&&(n=1),a.append("level",n),a.append("path",t.modfrom.path),""==t.modfrom.old_filename?a.append("filename",t.modfrom.filename):a.append("filename",t.modfrom.old_filename),a.append("account",t.loginData.account);var s={headers:{"Content-Type":"multipart/form-data"}};t.alertProgressModal(!0);var i=N.a.create({withCredentials:!0,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setalertMsgProgressValue(a)}});i.post("/php/views/sop/SOPMod.php",a,s).then(function(e){var a=e.data;t.setTimeOutAlertMsg(a);var o=0;o=1==a.length?1e3:a.length<4?1500:2500,t.settimeoutalertModal(o),t.reset(["tabIndex","depStaffRelation","items"])}.bind(this)).catch((function(t){})).finally((function(){t.alertProgressModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},deletefile:function(t){var e=this,a=e.modfrom.old_filename.split(",");a.splice(a.indexOf(t),1);var o=a.join(","),n=new FormData;n.append("seq",e.modfrom.seq),n.append("deletefile",t),n.append("path",e.modfrom.path),n.append("remainfile",o);var s={headers:{"Content-Type":"multipart/form-data"}};e.togglealertModal(!0);var i=N.a.create({withCredentials:!0});i.post("/php/views/sop/SOPMod.php",n,s).then(function(t){var a=t.data;e.modfrom.old_filename=o,e.items[e.modfrom.index].filename=o,e.setTimeOutAlertMsg(a),e.settimeoutalertModal(1e3)}.bind(this)).catch((function(t){})).finally((function(){e.togglealertModal(!1)}))},delAction:function(t){var e=t.data.filename;""!=e&&(e=e.split(","));var a=t.data.seq,o=t.data.path,n=this;n.togglealertModal(!0);var s={};s["filename"]=e,s["seq"]=a,s["path"]=o,N.a.post("/php/views/sop/SOPDel.php",s).then(function(t){var e=t.data;n.setTimeOutAlertMsg(e),n.settimeoutalertModal()}.bind(this)).catch((function(t){})).finally((function(){n.togglealertModal(!1),n.togglecommonModal(!1),setTimeout((function(){n.queryAgain()}),1200)}))},toggleAddModal:function(){var t=this;"ALL"===t.pageAccess.report.children.sop.remark.commonQueryCondition.main?Object.values(t.depDetail.config).map((function(e){t.form.rootTree.push({text:e,value:e})})):(t.form.rootTree.push({text:t.depDetail.config[t.pageAccess.report.children.sop.remark.commonQueryCondition.main],value:t.depDetail.config[t.pageAccess.report.children.sop.remark.commonQueryCondition.main]}),t.form.root=t.depDetail.config[t.pageAccess.report.children.sop.remark.commonQueryCondition.main],t.rootChange(t.depDetail.config[t.pageAccess.report.children.sop.remark.commonQueryCondition.main])),t.addModalShow=!0},addFolder:function(){var t=this,e=t.form.root;if(""==t.addFolderItem.name||null===t.addFolderItem.name)return t.setTimeOutAlertMsg("資料夾名稱不可為空"),void t.settimeoutalertModal();for(var a=0;a<t.addFolderItem.path.length;a++){var o=t.addFolderItem.path[a];if(null===o){if(-1!=t.smbPathList.indexOf(t.addFolderItem.name))return t.setTimeOutAlertMsg("資料夾名稱不可重複"),void t.settimeoutalertModal()}else e+="/"+o}var n=!1;N()({url:"/php/views/sop/SOPSMBAction.php",method:"POST",data:{whichFunction:"addNewSMBFolder",data:{path:e,foldername:t.addFolderItem.name}}}).then((function(e){if(t.setTimeOutAlertMsg(e.data),"ok"==e.data){t.form.path.length=0,t.form.pathTree.length=0,t.smbPathList.length=0;var a=t.form.root,o=function(){var e=Object(jt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getSMBFolderList(a,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o().then((function(e){"ok"==e?t.setTimeOutAlertMsg("新增資料夾成功"):t.setTimeOutAlertMsg(e)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.settimeoutalertModal()}))}else n=!0,t.setTimeOutAlertMsg(e.data)})).catch((function(e){n=!0,t.setTimeOutAlertMsg(e)})).finally((function(){n&&t.settimeoutalertModal(1500),t.toggleAddSMBFolderModal(!1)}))},toggleAddSMBFolderModal:function(t){var e=this;if(null===e.form.root)return e.setTimeOutAlertMsg("請先選擇根目錄"),void e.settimeoutalertModal();t?(e.addFolderItem.path=JSON.parse(JSON.stringify(e.form)).path.map((function(){return null})),e.addFolderItem.pathTree=JSON.parse(JSON.stringify(e.form)).pathTree):(e.addFolderItem.name=null,e.addFolderItem.path=[],e.addFolderItem.pathTree=[]),e.addFolderModalShow=t,e.togglecommonModal(t)},getSMBFolderList:function(t,e){var a=this;return new Promise((function(o,n){N()({url:"/php/views/sop/SOPSMBAction.php",method:"POST",data:{whichFunction:"getSMBFoldersList",data:t}}).then((function(t){if("ok"==t.data.Response){for(var s=[],i=2;i<t.data.data.length-2;i++){var r=t.data.data[i].filter((function(t){if(""!=t)return t}));if(r.splice(r.length-6,r.length),"D"==r[r.length-1])if(2!=r.length){r[r.length-1];r.splice(r.length-1,1);var l=r.join(" ");s.push({text:l,value:l}),a.smbPathList.push(l)}else s.push({text:r[0],value:r[0]}),a.smbPathList.push(r[0])}0!=s.length&&(e?(a.form.path.push(null),a.form.pathTree.push(s)):(a.addFolderItem.path.push(null),a.addFolderItem.pathTree.push(s))),o("ok")}else"無資料夾"==t.data.Response?o("ok"):n(t.data.Response)})).catch((function(t){n(t)}))}))},rootChange:function(t){var e=this;e.form.path=[],e.form.pathTree=[],e.smbPathList=[];var a=function(){var a=Object(jt["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getSMBFolderList(t,!0);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a().then((function(t){})).catch((function(t){e.setTimeOutAlertMsg(t),e.settimeoutalertModal()}))},pathChange:function(t,e,a){var o=this,n=[],s=[],i=o.form.root;t?(n=o.form.path,s=o.form.pathTree):(n=o.addFolderItem.path,s=o.addFolderItem.pathTree),n.splice(a+1,n.length-a),s.splice(a+1,s.length-a);for(var r=0;r<n.length;r++){var l=n[r];null!=l&&(i+="/"+l)}var c=function(){var e=Object(jt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.getSMBFolderList(i,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c().then((function(t){})).catch((function(t){}))},toggleModModal:function(t){var e=t.data,a=t.data2,o=JSON.parse(JSON.stringify(e)),n=this;n.modfrom.index=a,n.modfrom.seq=o.seq,n.modfrom.title=o.title,n.modfrom.application=o.application,n.modfrom.old_filename=o.filename;var s=!1;o.level&&(s=!0),n.modfrom.level=s,n.modfrom.path=o.path,n.modModalShow=!0},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},pe=ue,fe=(a("a9f8"),Object(b["a"])(pe,me,de,!1,null,"009d743a",null)),he=fe.exports,ge=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Structure"},[a("h4",[t._v("架構圖")])])}],ve={name:"Structure",data:function(){return{img:!0}},components:{},computed:Object(l["a"])({},Object(c["c"])({})),created:function(){},methods:Object(l["a"])({},Object(c["b"])({}))},ye=ve,De=(a("d149"),Object(b["a"])(ye,ge,be,!1,null,"40a2054e",null)),Se=De.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Server container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("伺服器狀態")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"9"}},[a("b-button",{attrs:{pill:"",variant:"success"},on:{click:function(e){return t.toggleAddModal(!0)}}},[t._v("新增")]),a("b-button",{staticClass:"ml-1",attrs:{pill:""},on:{click:function(e){return t.toggleVMListModal(!0)}}},[t._v("虛擬機列表")]),a("commonQuery",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1),a("b-breadcrumb",t._l(t.breadcrumbList,(function(e,o){return a("b-breadcrumb-item",{key:o,attrs:{active:e.active},on:{click:function(a){return t.breadcrumbClick(e.text,e.active,o)}}},[t._v(t._s(e.text))])})),1),a("b-tabs",{model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"查詢",active:""}},[0==t.items.length?a("h5",{staticClass:"mt-2"},[t._v("查無資料")]):a("b-table",{ref:"queryTable",staticClass:"mt-2",attrs:{id:"queryTable","sticky-header":"650px",responsive:"",items:t.items,fields:t.fields,"head-variant":"light"},scopedSlots:t._u([t._l(t.slotList,(function(e,o){return{key:t.getHeaderSlot(e),fn:function(e){return[a("div",{key:o,staticStyle:{position:"relative"}},[t._v(" "+t._s(e.label)+" "),t.fields.length>2?a("div",{staticClass:"deletefilebtn",on:{click:function(a){return a.preventDefault(),t.removeHeaderFields(o,e.column)}}}):t._e()])]}}})),t._l(t.slotList,(function(e,o){return{key:t.getCellSlot(e),fn:function(n){return["status"==e?a("div",{key:String(n.item.seq)+"_"+String(o)},[t._v(" "+t._s(t.statusConfig[t.breadcrumbWhich][String(n.item.status)])+" ")]):a("div",{key:String(n.item.seq)+"_"+String(o),domProps:{innerHTML:t._s(n.item[e])}})]}}})),{key:"cell(Action)",fn:function(e){return["Server"==t.breadcrumbWhich?a("span",{attrs:{id:String(e.item.seq)+"_"+String(e.index),tabindex:"0"}},[a("b-button",{attrs:{disabled:0==t.VMItems[e.item.seq].length},on:{click:function(a){return t.onRowClicked(e.item)}}},[t._v("查看VM")]),a("b-tooltip",{attrs:{target:String(e.item.seq)+"_"+String(e.index)}},[0==t.VMItems[e.item.seq].length?a("span",[t._v("此Server查無VM")]):a("span",[t._v("共有"+t._s(t.VMItems[e.item.seq].length)+"個VM")])])],1):a("b-button",{on:{click:function(a){return t.onRowClicked(e.item)}}},[t._v("返回")])]}}],null,!0)})],1),a("b-tab",{attrs:{title:"編輯"}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("b-table",{ref:"editTable",staticClass:"mt-2",attrs:{id:"editTable","sticky-header":"550px",responsive:"",items:t.items,fields:t.fields,"head-variant":"light"},scopedSlots:t._u([t._l(t.slotList,(function(e,o){return{key:t.getCellSlot(e),fn:function(n){return[[a("div",{key:String(n.item.seq)+"_"+String(o),class:{hide:t.activeItemsSeq==n.item.seq}},[a("span","status"==e?[t._v(t._s(t.statusConfig[t.breadcrumbWhich][String(n.item.status)]))]:{domProps:{innerHTML:t._s(n.item[e])}})])],[a("div",{key:String(n.item.seq)+"__"+String(o),class:{hide:t.activeItemsSeq!=n.item.seq}},["status"==e?a("b-form-checkbox",{attrs:{switch:"",size:"lg"},model:{value:n.item.status,callback:function(e){t.$set(n.item,"status",e)},expression:"row.item.status"}}):"noumenonID"==e?a("b-form-select",{attrs:{options:t.serverIDList},model:{value:n.item[e],callback:function(a){t.$set(n.item,e,a)},expression:"row.item[data]"}}):a("b-form-input",{staticClass:"input-text",attrs:{type:"text"},on:{click:function(a){return t.editLongData(n,e,!0)}},model:{value:n.item[e],callback:function(a){t.$set(n.item,e,a)},expression:"row.item[data]"}})],1)]]}}})),{key:"cell(Action)",fn:function(e){return[t.activeItemsSeq!=e.item.seq?[null==t.activeItemsSeq?a("b-button",{on:{click:function(a){t.activeItemsSeq=e.item.seq,t.tempOldItemAction(!0,e.item)}}},[t._v("編輯")]):a("b-button",{attrs:{disabled:""}},[t._v("編輯")]),null==t.activeItemsSeq?a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"danger"},on:{click:function(a){return t.toggleDelModal(!0,e.item.seq)}}},[t._v("刪除")]):a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:"",variant:"danger"}},[t._v("刪除")])]:t.activeItemsSeq==e.item.seq?[a("b-button",{on:{click:function(a){return t.modAction(e.item)}}},[t._v("完成編輯")]),a("b-button",{staticStyle:{"margin-left":"10px"},attrs:{variant:"light"},on:{click:function(a){t.activeItemsSeq=null,t.tempOldItemAction(!1,e.item)}}},[t._v("取消")])]:t._e()]}}],null,!0)})],1)],1),t.vmListModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",[t._v("VM列表")])]},proxy:!0},{key:"default",fn:function(){return[0==t.vmList.length?a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("查無資料")])]):a("b-table",{staticClass:"mt-2",attrs:{"sticky-header":"650px",responsive:"",items:t.vmList,fields:t.VMFields,"head-variant":"light"},scopedSlots:t._u([t._l(t.slotList,(function(e,o){return{key:t.getCellSlot(e),fn:function(n){return["status"==e?a("div",{key:String(n.item.seq)+"_"+String(o)},[t._v(" "+t._s(t.statusConfig[t.breadcrumbWhich][String(n.item.status)])+" ")]):a("div",{key:String(n.item.seq)+"_"+String(o),domProps:{innerHTML:t._s(n.item[e])}})]}}}))],null,!0)})]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleVMListModal(!1)}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,1605781514)}):t._e(),t.addModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[null==t.addWhich?a("h5",[t._v("新增")]):t.addWhich?a("h5",[t._v("新增Server")]):a("h5",[t._v("新增VM")])]},proxy:!0},{key:"default",fn:function(){return[null==t.addWhich?a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"info"},on:{click:function(e){return e.preventDefault(),t.setSystemFormData(!0)}}},[t._v("Server")]),a("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.setSystemFormData(!1)}}},[t._v("VM")])],1):a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleAddModal(!1)}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,2924045969)}):t._e(),t.editActionModalShow?a("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("b-form-textarea",{ref:"editlongdata",attrs:{rows:"6","max-rows":"12"},model:{value:t.editActionItems.Data,callback:function(e){t.$set(t.editActionItems,"Data",e)},expression:"editActionItems.Data"}})],1)]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.editActionModalShow=!1,t.togglecommonModal(!1)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.editLongData(null,null,!1)}}},[t._v("確定")])],1)]},proxy:!0}],null,!1,1627839946)}):t._e(),t.delModalShow?a("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("確定要刪除嗎？")])])]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleDelModal(!1,null)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.delAction(null)}}},[t._v("確定刪除")])],1)]},proxy:!0}],null,!1,1407535451)}):t._e()],1)},xe=[],_e={name:"Server",data:function(){return{tabIndex:0,commonqueryCollapseShow:!1,addModalShow:!1,delModalShow:!1,vmListModalShow:!1,addWhich:null,breadcrumbWhich:"Server",breadcrumbList:[{text:"伺服器",active:!0}],statusConfig:{Server:{1:"運作中",0:"非運作中"},VM:{1:"已開啟電源",0:"已關閉電源"}},fields:[],items:[],slotList:["seq","status","type","manufacturer","model","cpu","memory","HDD","NIC","OS","PM","note","noumenonID","name","provisionedSpace","usedSpace","application","property","installtionService","computerName","systemLocation","privateIP","publicIP","port","DM","remark"],serverFields:[{key:"seq",label:"編號",sortable:!0,tdClass:"w67px",thClass:"w67px"},{key:"status",label:"狀態",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"manufacturer",label:"製造商",sortable:!1},{key:"model",label:"型號",sortable:!1},{key:"cpu",label:"CPU",sortable:!1},{key:"memory",label:"記憶體",sortable:!1},{key:"HDD",label:"HDD",sortable:!1},{key:"NIC",label:"網卡",sortable:!1},{key:"OS",label:"作業系統",sortable:!1},{key:"PM",label:"實體機",sortable:!1},{key:"note",label:"Note",sortable:!1},{key:"Action",label:"功能",sortable:!1}],serverItems:[],VMFields:[{key:"name",label:"VM名稱",sortable:!1},{key:"application",label:"用途",sortable:!1},{key:"OS",label:"作業系統",sortable:!1},{key:"privateIP",label:"內部IP",sortable:!0},{key:"publicIP",label:"對外IP",sortable:!0},{key:"port",label:"Port",sortable:!1},{key:"status",label:"狀態",sortable:!0},{key:"provisionedSpace",label:"佈建的空間",sortable:!1},{key:"usedSpace",label:"已使用的空間",sortable:!1},{key:"memory",label:"記憶體",sortable:!1},{key:"property",label:"性質",sortable:!1},{key:"installtionService",label:"安裝服務",sortable:!1},{key:"computerName",label:"電腦名稱",sortable:!1},{key:"systemLocation",label:"系統位置",sortable:!1},{key:"DM",label:"Disk保護機制",sortable:!1},{key:"remark",label:"備註",sortable:!1},{key:"Action",label:"功能",sortable:!1}],VMItems:{},vmList:[],activeItemsSeq:null,serverIDList:[],thisVMBelong:null,delItemSeq:null,tempThisOldItem:{},editActionModalShow:!1,editActionItems:{seq:null,Data:"",which:""},commonApiParams:{type:"join",customized:{condition_1:{tables:["server","virtualMachine"],fields:"",orderby:"",limit:"",where:"",symbols:"",join:{server:[{virtualMachine:{seq:"noumenonID"}}]},jointype:{server_virtualMachine:"left"},subquery:""}}}}},created:function(){this.setCommonQueryData()},mounted:function(){this.togglealertModal(!0),this.queryAgain()},components:{commonQuery:H,systemForm:gt,modal:y},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",systemFormCompletedData:"systemform/get_completedData",inputData:"commonquery/get_inputData",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",apiParams:"commonquery/get_apiParams",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",isInit:"commonquery/get_isInit",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",thisSortData:"sort/get_thisSortData"})),watch:{tabIndex:{handler:function(t){var e=this;this.reset(["tabIndex","breadcrumbWhich","breadcrumbList","serverIDList","thisVMBelong","items","serverItems","VMItems","vmList"]),"Server"===this.breadcrumbWhich?this.fields=this.serverFields:this.fields=this.VMFields,1===t&&this.slotList.splice(0,1),this.$nextTick((function(){0!=e.items.length&&(0===t?e.$refs.queryTable.$el.scrollLeft=0:e.$refs.editTable.$el.scrollLeft=document.getElementById("editTable").scrollWidth)}))}},systemFormCompletedData:{handler:function(){var t=this;if(0!=Object.keys(t.systemFormCompletedData).length)if(t.addWhich)t.togglealertModal(!0),t.serverAdd();else{if(""===t.systemFormCompletedData.noumenonID)return t.setTimeOutAlertMsg("未選擇隸屬server編號!!!"),t.settimeoutalertModal(),void t.setSystemFormCompletedData({});t.togglealertModal(!0),t.VMAdd()}}},queryResponse:{handler:function(){var t=this;if(t.reset(["tabIndex","breadcrumbWhich","breadcrumbList","serverIDList","thisVMBelong"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),t.settimeoutalertModal(),void t.togglealertModal(!1);t.getDataList()}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",axiosDeleteAction:"commonaxios/axiosDeleteAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",togglealertModal:"alertmodal/toggle_alertModal",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",queryAgain:"commonquery/do_queryAgain",setvforData:"systemform/set_vforData",setsystemFormResponse:"systemform/set_systemFormResponse",setSystemFormCompletedData:"systemform/set_completedData",setSystemFormSelectOptions:"systemform/set_selectOptions",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",setthisSortData:"sort/set_thisSortData"})),{},{setSystemFormData:function(t){var e={};t?(e["status"]=["checkbox_switch","狀態"],e["type"]=["text","Type"],e["manufacturer"]=["text","製造商"],e["model"]=["text","型號"],e["cpu"]=["text","CPU"],e["memory"]=["text","記憶體"],e["HDD"]=["text","HDD"],e["NIC"]=["text","網卡"],e["OS"]=["text","作業系統"],e["PM"]=["text","實體機"],e["note"]=["textarea","Note"],e["button"]=["Add","新增"],e["textclass"]=!1):(e["noumenonID"]=["select","隸屬server編號"],e["name"]=["text","VM名稱"],e["status"]=["checkbox_switch","狀態"],e["provisionedSpace"]=["text","佈建的空間"],e["usedSpace"]=["text","已使用的空間"],e["memory"]=["text","記憶體"],e["application"]=["text","用途"],e["property"]=["text","性質"],e["installtionService"]=["text","安裝服務"],e["computerName"]=["text","電腦名稱"],e["OS"]=["text","作業系統"],e["systemLocation"]=["text","系統位置"],e["privateIP"]=["text","內部IP"],e["publicIP"]=["text","對外IP"],e["port"]=["text","Port"],e["DM"]=["text","Disk保護機制"],e["remark"]=["textarea","備註"],e["button"]=["Add","新增"],e["textclass"]=!1),this.setvforData(e),this.addWhich=t},setCommonQueryData:function(){var t=this,e="ALL",a=[{value:"ALL",text:"Server+VM"},{value:"server",text:"Server"},{value:"virtualMachine",text:"VM"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,o.usetime=!1,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n=Object.assign({},n,t.commonApiParams),t.setapiParams(n)},serverAdd:function(){var t=this;Object.keys(t.systemFormCompletedData).map((function(e){"status"!=e&&(t.systemFormCompletedData[e]=t.replaceContentData(String(t.systemFormCompletedData[e]),!0))}));var e={url:"api/YS/1.0/my/CommonUse/server"};e["postdata"]={seq:[""],status:[t.systemFormCompletedData.status],type:[t.systemFormCompletedData.type],manufacturer:[t.systemFormCompletedData.manufacturer],model:[t.systemFormCompletedData.model],cpu:[t.systemFormCompletedData.cpu],memory:[t.systemFormCompletedData.memory],HDD:[t.systemFormCompletedData.HDD],NIC:[t.systemFormCompletedData.NIC],OS:[t.systemFormCompletedData.OS],PM:[t.systemFormCompletedData.PM],note:[t.systemFormCompletedData.note],creatorID:[t.loginData.account]},t.axiosPostAction(e).then((function(){var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?t.setTimeOutAlertMsg("新增成功"):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.togglealertModal(!1),t.settimeoutalertModal(),t.toggleAddModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},VMAdd:function(){var t=this;Object.keys(t.systemFormCompletedData).map((function(e){"status"!=e&&"noumenonID"!=e&&(t.systemFormCompletedData[e]=t.replaceContentData(String(t.systemFormCompletedData[e]),!0))}));var e={url:"api/YS/1.0/my/CommonUse/virtualMachine"};e["postdata"]={seq:[""],noumenonID:[t.systemFormCompletedData.noumenonID],name:[t.systemFormCompletedData.name],status:[t.systemFormCompletedData.status],provisionedSpace:[t.systemFormCompletedData.provisionedSpace],usedSpace:[t.systemFormCompletedData.usedSpace],memory:[t.systemFormCompletedData.memory],application:[t.systemFormCompletedData.application],property:[t.systemFormCompletedData.property],installtionService:[t.systemFormCompletedData.installtionService],computerName:[t.systemFormCompletedData.computerName],OS:[t.systemFormCompletedData.OS],systemLocation:[t.systemFormCompletedData.systemLocation],privateIP:[t.systemFormCompletedData.privateIP],publicIP:[t.systemFormCompletedData.publicIP],port:[t.systemFormCompletedData.port],DM:[t.systemFormCompletedData.DM],remark:[t.systemFormCompletedData.remark],creatorID:[t.loginData.account]},t.axiosPostAction(e).then((function(){var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?t.setTimeOutAlertMsg("新增成功"):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.togglealertModal(!1),t.settimeoutalertModal(),t.toggleAddModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},modAction:function(t){var e=this;e.togglealertModal(!0),Object.keys(t).map((function(a){"seq"!=a&&"status"!=a&&"noumenonID"!=a&&(t[a]=e.replaceContentData(String(t[a]),!0))}));var a={};"Server"==e.breadcrumbWhich?(a["url"]="api/YS/1.0/my/CommonUse/server",a["postdata"]={old_seq:[t.seq],status:[t.status],type:[t.type],manufacturer:[t.manufacturer],model:[t.model],cpu:[t.cpu],memory:[t.memory],HDD:[t.HDD],NIC:[t.NIC],OS:[t.OS],PM:[t.PM],note:[t.note]}):(a["url"]="api/YS/1.0/my/CommonUse/virtualMachine",a["postdata"]={old_seq:[t.seq],noumenonID:[t.noumenonID],name:[t.name],status:[t.status],provisionedSpace:[t.provisionedSpace],usedSpace:[t.usedSpace],memory:[t.memory],application:[t.application],property:[t.property],installtionService:[t.installtionService],computerName:[t.computerName],OS:[t.OS],systemLocation:[t.systemLocation],privateIP:[t.privateIP],publicIP:[t.publicIP],port:[t.port],DM:[t.DM],remark:[t.remark]}),e.activeItemsSeq=null,e.axiosPatchAction(a).then((function(){var t=e.axiosResult;200==t.status?"ok"===t.data["Response"]?e.setTimeOutAlertMsg("修改成功"):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.togglealertModal(!1),e.settimeoutalertModal(),setTimeout((function(){e.queryAgain()}),1200)}))},delAction:function(t){var e=this,a={};if(e.togglealertModal(!0),null!=t)a=t;else if("Server"==e.breadcrumbWhich){var o=e.VMItems[String(e.delItemSeq)];if(a["url"]="api/YS/1.0/my/CommonUse/server",a["postdata"]={seq:[e.delItemSeq]},0!=o.length){var n=o.map((function(t){return t.seq}));e.delAction({url:"api/YS/1.0/my/CommonUse/virtualMachine",postdata:{seq:n}})}}else a["url"]="api/YS/1.0/my/CommonUse/virtualMachine",a["postdata"]={seq:[e.delItemSeq]};e.axiosDeleteAction(a).then((function(){var t=e.axiosResult;200==t.status?"ok"===t.data["Response"]?e.setTimeOutAlertMsg("刪除成功"):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.togglealertModal(!1),e.settimeoutalertModal(),e.toggleDelModal(!1,null),setTimeout((function(){e.queryAgain()}),1200)}))},getDataList:function(){var t=this,e={},a=[],o={},n=[];t.togglealertModal(!0),t.queryResponse.forEach((function(t){if(!Object.keys(e).includes(String(t["server$seq"]))){var s={seq:t["server$seq"],status:t["server$status"],type:t["server$type"],manufacturer:t["server$manufacturer"],model:t["server$model"],cpu:t["server$cpu"],memory:t["server$memory"],HDD:t["server$HDD"],NIC:t["server$NIC"],OS:t["server$OS"],PM:t["server$PM"],note:t["server$note"]};e[String(t["server$seq"])]=s,a.push(t["server$seq"]),o[String(t["server$seq"])]=[]}if(null!=t["virtualMachine$seq"]){var i={seq:t["virtualMachine$seq"],noumenonID:t["virtualMachine$noumenonID"],name:t["virtualMachine$name"],status:t["virtualMachine$status"],provisionedSpace:t["virtualMachine$provisionedSpace"],usedSpace:t["virtualMachine$usedSpace"],memory:t["virtualMachine$memory"],application:t["virtualMachine$application"],property:t["virtualMachine$property"],installtionService:t["virtualMachine$installtionService"],computerName:t["virtualMachine$computerName"],OS:t["virtualMachine$OS"],systemLocation:t["virtualMachine$systemLocation"],privateIP:t["virtualMachine$privateIP"],publicIP:t["virtualMachine$publicIP"],port:t["virtualMachine$port"],DM:t["virtualMachine$DM"],remark:t["virtualMachine$remark"]};o[String(t["server$seq"])].push(i),n.push(i)}})),a.sort((function(t,e){return t-e})),Object.values(o).forEach((function(e){t.setthisSortData({data:e,sortKey:[["privateIP","asc"]]})})),t.serverItems=JSON.parse(JSON.stringify(Object.values(e))),t.VMItems=JSON.parse(JSON.stringify(o)),t.setSystemFormSelectOptions(a),t.serverIDList=a,t.setthisSortData({data:n,sortKey:[["noumenonID","asc"]]}),t.vmList=JSON.parse(JSON.stringify(n)),"Server"==t.breadcrumbWhich?(t.items=t.serverItems,t.fields=t.serverFields):(t.items=t.VMItems[String(t.thisVMBelong)],0===this.tabIndex&&(t.VMFields.splice(0,1),-1!=t.slotList.indexOf("noumenonID")&&t.slotList.splice(t.slotList.indexOf("noumenonID"),1)),t.fields=t.VMFields),t.togglealertModal(!1)},onRowClicked:function(t){var e=this,a=this;if("Server"==a.breadcrumbWhich){var o=t.seq;a.thisVMBelong=o,a.items=a.VMItems[String(o)],a.VMFields.splice(0,1),-1!=a.slotList.indexOf("noumenonID")&&a.slotList.splice(a.slotList.indexOf("noumenonID"),1),a.fields=a.VMFields,a.breadcrumbList[0]["active"]=!1,a.breadcrumbList[0]["text"]="伺服器_"+o,a.breadcrumbList.push({text:"VM",active:!0}),a.breadcrumbWhich="VM"}else a.items=a.serverItems,a.fields=a.serverFields,a.breadcrumbList[0]["active"]=!0,a.breadcrumbList[0]["text"]="伺服器",a.breadcrumbList.splice(1,1),a.breadcrumbWhich="Server",a.thisVMBelong=null;this.$nextTick((function(){e.$refs.queryTable.$el.scrollLeft=0}))},breadcrumbClick:function(t,e,a){var o=this,n=this;"伺服器"==t.split("_")[0]&&(n.items=n.serverItems,n.fields=n.serverFields,n.breadcrumbList[0]["active"]=!0,n.breadcrumbList[0]["text"]="伺服器",n.breadcrumbList.splice(1,1),n.breadcrumbWhich="Server",n.thisVMBelong=null,this.$nextTick((function(){o.$refs.queryTable.$el.scrollLeft=0})))},rowClass:function(t,e){if(t&&"row"===e)return t.status?{style:"background-color:rgba(0, 0, 0, 0.144)"}:void 0},getHeaderSlot:function(t){return"head(".concat(t,")")},getCellSlot:function(t){return"cell(".concat(t,")")},tempOldItemAction:function(t,e){var a=this;t?(1===e.status?e.status=!0:e.status=!1,Object.assign(a.tempThisOldItem,e)):(a.tempThisOldItem.status?a.tempThisOldItem.status=1:a.tempThisOldItem.status=0,Object.assign(e,a.tempThisOldItem),a.tempThisOldItem={})},editLongData:function(t,e,a){var o=this,n=this;if(a){var s=JSON.parse(JSON.stringify(n.DEFAULT_commonModalConfig));s.size="xl",s.hideModalHeader=!0,s.hideModalHeaderClose=!0,n.setcommonModalConfig(s),n.editActionItems.seq=t.item.seq,n.editActionItems.which=e,n.editActionItems.Data=n.replaceContentData(String(t.item[e]),!1)}else n.items.filter((function(t){if(t.seq==n.editActionItems.seq){var e=n.editActionItems.Data;e=n.replaceContentData(String(e),!0),t[n.editActionItems.which]=e}}));n.editActionModalShow=a,n.togglecommonModal(a),a&&setTimeout((function(){o.$nextTick((function(){return o.$refs.editlongdata.focus()}))}),0)},replaceContentData:function(t,e){return e?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):t.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g," ")},toggleAddModal:function(t){var e=this;if(t){var a=JSON.parse(JSON.stringify(e.DEFAULT_commonModalConfig));a.size="xl",e.setcommonModalConfig(a)}else e.addWhich=null,e.setSystemFormCompletedData({});e.addModalShow=t,e.togglecommonModal(t)},toggleDelModal:function(t,e){var a=this;if(t){var o=JSON.parse(JSON.stringify(a.DEFAULT_commonModalConfig));o.hideModalHeader=!0,o.hideModalHeaderClose=!0,a.setcommonModalConfig(o)}a.delItemSeq=e,a.delModalShow=t,a.togglecommonModal(t)},toggleVMListModal:function(t){var e=this;if(e.reset(["tabIndex","breadcrumbWhich","breadcrumbList","serverIDList","thisVMBelong","fields","items","serverItems","VMItems","vmList","slotList"]),t){var a=JSON.parse(JSON.stringify(e.DEFAULT_commonModalConfig));a.size="xl",a.modalClassFull=!0,e.setcommonModalConfig(a),e.VMFields.splice(17,1)}e.vmListModalShow=t,e.togglecommonModal(t)},removeHeaderFields:function(t,e){var a=null;this.fields.map((function(t,o){t.key==e&&(a=o)})),this.fields.splice(a,1),this.slotList.splice(this.slotList.indexOf(e),1)},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},Me=_e,Te=(a("7ae9"),Object(b["a"])(Me,ke,xe,!1,null,"4f5b367b",null)),Oe=Te.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Storage container"},[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"3"}},[a("h4",[t._v("儲存設備狀態")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"9"}},[a("b-button",{attrs:{pill:"",variant:"success"},on:{click:function(e){return t.toggleAddModal(!0)}}},[t._v("新增")]),a("commonQuery",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1),a("b-breadcrumb",t._l(t.breadcrumbList,(function(e,o){return a("b-breadcrumb-item",{key:o,attrs:{active:e.active},on:{click:function(a){return t.breadcrumbClick(e.text,e.active,o)}}},[t._v(t._s(e.text))])})),1),a("b-tabs",{model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"查詢",active:""}},[0==t.items.length?a("h5",{staticClass:"mt-2"},[t._v("查無資料")]):a("commonTable")],1),"Species"!=t.breadcrumbWhich?a("b-tab",{attrs:{title:"編輯"}},[0==t.items.length?a("h5",{staticClass:"card-title mt-2"},[t._v(" 查無資料 ")]):a("commonTable")],1):t._e()],1),t.addModalShow?a("modal",{scopedSlots:t._u([{key:"modalheader",fn:function(){return[a("h5",[t._v("新增Storage")])]},proxy:!0},{key:"default",fn:function(){return[a("systemForm")]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleAddModal(!1)}}},[t._v("Close")])],1)]},proxy:!0}],null,!1,2859371193)}):t._e()],1)},Ae=[],Ce=function(t){var e=function(t){return/^[0-9]+$/.test(t)};return e(t)},Ie={name:"Storage",data:function(){return{tabIndex:0,addModalShow:!1,fields:[{key:"species",label:"種類",sortable:!0},{key:"type",label:"類型",sortable:!1},{key:"name",label:"名稱",sortable:!1},{key:"size",label:"SIZE(GB)",sortable:!1},{key:"subSize",label:"SUB SIZE(GB)",sortable:!1},{key:"note",label:"內容說明",sortable:!1},{key:"IP",label:"對應的server IP",sortable:!1},{key:"Action",label:"功能",sortable:!1,tdClass:"w150px",thClass:"w150px"}],items:[],speciesItem:{},childrenLen:{},breadcrumbWhich:"Species",breadcrumbList:[{text:"種類",active:!0}],commonTableSlotConfig:{slotConfig:{species:{value:"species","v-html":!0,removeHeader:!0,edit:{type:"input"}},type:{value:"type","v-html":!0,removeHeader:!1,edit:{type:"input"}},name:{value:"name","v-html":!0,removeHeader:!0,edit:{type:"input"}},size:{value:"size","v-html":!0,removeHeader:!0,edit:{type:"number"}},subSize:{value:"subSize","v-html":!0,removeHeader:!0,edit:{type:"number"}},note:{value:"note","v-html":!0,removeHeader:!0,edit:{type:"input"}},IP:{value:"IP","v-html":!0,removeHeader:!0,edit:{type:"input"}}},actionConfig:{query:{location:"toggleItems",Species:{havedata:"查看",nodata:"查無資料"}},edit:{authority:!0,type:"self",location:"modAction"},del:{authority:!0,location:"delAction",delfield:["seq"]}},selectable:!1}}},created:function(){this.setCommonQueryData(),this.setSystemFormData(),this.settableSlotConfig(this.commonTableSlotConfig)},mounted:function(){this.togglealertModal(!0),this.queryAgain()},components:{commonQuery:H,systemForm:gt,modal:y,commonTable:kt},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",loginData:"getlogin/get_loginData",queryResponse:"commonquery/get_queryResponse",tableBusy:"commonquery/get_tableBusy",systemFormCompletedData:"systemform/get_completedData",inputData:"commonquery/get_inputData",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",isInit:"commonquery/get_isInit",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),watch:{tabIndex:{handler:function(t){this.reset(["tabIndex","speciesItem","childrenLen","items","fields","breadcrumbWhich","breadcrumbList"]),this.settableInWhichTab({index:t,which:this.breadcrumbWhich})}},systemFormCompletedData:{handler:function(){var t=this;0!=Object.keys(t.systemFormCompletedData).length&&t.storageAdd()}},queryResponse:{handler:function(){var t=this;if(t.togglealertModal(!1),t.reset(["tabIndex","breadcrumbWhich","breadcrumbList"]),"查無資料"==t.queryResponse||"時間尚未選擇"==t.queryResponse)return t.setTimeOutAlertMsg(t.queryResponse),void t.settimeoutalertModal();t.getDataList()}},tableResponse:{handler:function(){var t=this;t[t.tableResponse.function](t.tableResponse.params)}}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosPostAction:"commonaxios/axiosPostAction",axiosPatchAction:"commonaxios/axiosPatchAction",axiosDeleteAction:"commonaxios/axiosDeleteAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",togglealertModal:"alertmodal/toggle_alertModal",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",queryAgain:"commonquery/do_queryAgain",setvforData:"systemform/set_vforData",setsystemFormResponse:"systemform/set_systemFormResponse",setSystemFormCompletedData:"systemform/set_completedData",setSystemFormSelectOptions:"systemform/set_selectOptions",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab",setactiveItemsSeq:"commontable/set_activeItemsSeq"})),{},{setSystemFormData:function(){var t={};t={species:["text","種類"],type:["textarea","類型"],name:["text","名稱"],size:["number","SIZE(GB)"],subSize:["number","SUB SIZE(GB)"],note:["textarea","內容說明"],IP:["text","對應的server IP"],textclass:!1,button:["Add","新增"]},this.setvforData(t)},setCommonQueryData:function(){var t=this,e="ALL",a=[{value:"ALL",text:"全選"}],o=JSON.parse(JSON.stringify(t.DEFAULT_inputData));o.options=a,o.selected=e,o.usetime=!1,t.setinputData(o);var n=JSON.parse(JSON.stringify(t.DEFAULT_apiParams));n.normal.table="storage",t.setapiParams(n)},storageAdd:function(){var t=this;t.togglealertModal(!0),Object.keys(t.systemFormCompletedData).map((function(e){"size"!=e&&"subsize"!=e&&(t.systemFormCompletedData[e]=t.replaceContentData(String(t.systemFormCompletedData[e]),!0))}));var e={url:"api/YS/1.0/my/CommonUse/storage"};e["postdata"]={seq:[""],species:[t.systemFormCompletedData.species],type:[t.systemFormCompletedData.type],name:[t.systemFormCompletedData.name],size:[t.systemFormCompletedData.size],subSize:[t.systemFormCompletedData.subSize],note:[t.systemFormCompletedData.note],IP:[t.systemFormCompletedData.IP],creatorID:[t.loginData.account]},t.axiosPostAction(e).then((function(){var e=t.axiosResult;200==e.status?"ok"===e.data["Response"]?t.setTimeOutAlertMsg("新增成功"):t.setTimeOutAlertMsg(e.data["Response"]):t.setTimeOutAlertMsg(e.data)})).catch((function(e){t.setTimeOutAlertMsg(e)})).finally((function(){t.togglealertModal(!1),t.settimeoutalertModal(),t.toggleAddModal(!1),setTimeout((function(){t.queryAgain()}),1200)}))},modAction:function(t){for(var e=this,a=t.data,o=["size","subSize"],n=0;n<o.length;n++){if(""===a[o[n]])return e.setTimeOutAlertMsg("尚有未輸入的值"),void e.settimeoutalertModal();if(!Ce(a[o[n]]))return e.setTimeOutAlertMsg("數字必須為正整數"),void e.settimeoutalertModal()}e.togglealertModal(!0),Object.keys(a).map((function(t){"seq"!=t&&(a[t]=e.replaceContentData(String(a[t]),!0))}));var s={url:"api/YS/1.0/my/CommonUse/storage"};s["postdata"]={old_seq:[a.seq],species:[a.species],type:[a.type],name:[a.name],size:[a.size],subSize:[a.subSize],note:[a.note],IP:[a.IP]},e.setactiveItemsSeq(null),e.axiosPatchAction(s).then((function(){var t=e.axiosResult;200==t.status?"ok"===t.data["Response"]?e.setTimeOutAlertMsg("修改成功"):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.togglealertModal(!1),e.settimeoutalertModal(),setTimeout((function(){e.queryAgain()}),1200)}))},delAction:function(t){var e=this,a=t.data.seq;e.togglealertModal(!0);var o={url:"api/YS/1.0/my/CommonUse/storage"};o["postdata"]={seq:[a]},e.axiosDeleteAction(o).then((function(){var t=e.axiosResult;200==t.status?"ok"===t.data["Response"]?e.setTimeOutAlertMsg("刪除成功"):e.setTimeOutAlertMsg(t.data["Response"]):e.setTimeOutAlertMsg(t.data)})).catch((function(t){e.setTimeOutAlertMsg(t)})).finally((function(){e.togglealertModal(!1),e.settimeoutalertModal(),setTimeout((function(){e.queryAgain()}),1200)}))},getDataList:function(){var t=this;t.togglealertModal(!0);var e={},a={},o={};t.queryResponse.forEach((function(t){a.hasOwnProperty(String(t.species))||(a[String(t.species)]=[],o[String(t.species)]=0),e={seq:t.seq,species:t.species,type:t.type,name:t.name,size:t.size,subSize:t.subSize,note:t.note,IP:t.IP},a[String(t.species)].push(e),o[String(t.species)]+=1})),t.speciesItem=JSON.parse(JSON.stringify(a)),t.childrenLen=JSON.parse(JSON.stringify(o));var n={};t.speciesItem.hasOwnProperty(t.breadcrumbWhich)||(t.breadcrumbWhich="Species"),"Species"===t.breadcrumbWhich?(t.fields.splice(1,6),Object.keys(t.speciesItem).forEach((function(e){t.items.push({species:e})})),n=t.childrenLen,t.breadcrumbList[0]["active"]=!0,t.breadcrumbList.splice(1,1)):(t.fields.splice(0,1),t.items=t.speciesItem[t.breadcrumbWhich]),t.settableDetail({items:t.items,fields:t.fields,which:t.breadcrumbWhich,children:n}),t.settableInWhichTab({index:t.tabIndex,which:t.breadcrumbWhich}),t.togglealertModal(!1)},getHeaderSlot:function(t){return"head(".concat(t,")")},getCellSlot:function(t){return"cell(".concat(t,")")},toggleItems:function(t){var e=this;e.reset(["tabIndex","speciesItem","childrenLen","breadcrumbWhich"]);var a="Species",o={};"backtrack"!=t.data?(e.fields.splice(0,1),e.items=e.speciesItem[t.data],a=t.data,e.breadcrumbList[0]["active"]=!1,e.breadcrumbList.push({text:t.data,active:!0}),e.breadcrumbWhich=t.data):(e.fields.splice(1,6),Object.keys(e.speciesItem).forEach((function(t){e.items.push({species:t})})),e.breadcrumbList[0]["active"]=!0,e.breadcrumbList.splice(1,1),e.breadcrumbWhich="Species",o=e.childrenLen),e.settableDetail({items:e.items,fields:e.fields,which:a,children:o}),e.settableInWhichTab({index:e.tabIndex,which:e.breadcrumbWhich})},replaceContentData:function(t,e){return e?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):t.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g," ")},toggleAddModal:function(t){var e=this;if(t){var a=JSON.parse(JSON.stringify(e.DEFAULT_commonModalConfig));a.size="xl",e.setcommonModalConfig(a)}else e.setSystemFormCompletedData({});e.addModalShow=t,e.togglecommonModal(t)},removeHeaderFields:function(t){var e=this,a=t.data;delete e.commonTableSlotConfig.slotConfig.key,e.settableSlotConfig(e.commonTableSlotConfig),e.fields.map((function(t,o){t.key==a&&e.fields.splice(o,1)})),e.settableDetail({items:e.items,fields:e.fields,which:e.breadcrumbWhich}),e.settableInWhichTab({index:e.tabIndex,which:e.breadcrumbWhich})},breadcrumbClick:function(t,e,a){var o=this;"種類"===t&&o.toggleItems({data:"backtrack"})},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},Fe=Ie,qe=(a("10dd"),Object(b["a"])(Fe,we,Ae,!1,null,"2a3fc0fa",null)),Pe=qe.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FileUpDownload container"},[a("b-row",{staticClass:"mb-4"},[a("b-col",{attrs:{sm:"9"}},[a("h4",[t._v("暫時檔案之上傳下載")]),a("p",{staticClass:"subtitle"},[t._v(" 點選表格欄位可選擇欲下載檔案之列表，並可建立期限性帳號密碼提供下載 ")]),a("p",{staticClass:"subtitle"},[t._v(" 上傳的檔案若無建立期限性帳號密碼或帳號密碼已過期，將在每週日定時清除 ")])]),a("b-col",{staticClass:"text-right",attrs:{sm:"3"}},[a("b-button",{attrs:{pill:"",disabled:"",variant:"success"},on:{click:function(e){t.reset(["items"]),t.addModalShow=!0}}},[t._v("上傳檔案")])],1)],1),0==t.items.length?a("h5",[t._v("查無檔案")]):t._e(),0!=t.items.length?a("b-table",{ref:"FileUpDownloadTable",staticClass:"mt-2",attrs:{id:"FileUpDownloadTable","sticky-header":"550px",responsive:"",hover:"",items:t.items,fields:t.fields,"head-variant":"light",selectable:"","select-mode":"multi","selected-variant":"info"},on:{"row-selected":t.onRowSelected}}):t._e(),0!=t.selected.length?[a("div",{staticClass:"clearfix"},[a("b-button",{attrs:{size:"sm"},on:{click:t.selectAllRows}},[t._v("全選")]),a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"danger"},on:{click:t.clearSelected}},[t._v("取消全選")]),a("b-button",{staticClass:"float-right",attrs:{variant:"warning"},on:{click:t.createDownloadFileIdPwd}},[t._v("產生帳密供下載檔案")])],1)]:t._e(),t.show_createIdPwd&&null!=t.createIdPwd.Id?[a("label",[t._v("帳號")]),a("div",[a("p",{staticClass:"copyitem"},[t._v(t._s(t.createIdPwd.Id))])]),a("label",[t._v("密碼")]),a("div",[a("p",{staticClass:"copyitem"},[t._v(t._s(t.createIdPwd.Pwd))])]),a("label",[t._v("有效期限")]),a("p",[t._v("一天")]),a("label",[t._v("檔案列表")]),a("p",[t._v(t._s(t.createIdPwd.FileList))]),a("label",[t._v("下載網址")]),a("p",[t._v(t._s(t.createIdPwd.url))])]:t._e(),a("b-modal",{attrs:{centered:"","no-close-on-backdrop":"","no-close-on-esc":"",scrollable:"",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",[t._v("上傳檔案")])]},proxy:!0},{key:"default",fn:function(){return[a("b-row",{staticClass:"my-4"},[a("b-col",{attrs:{sm:"2"}},[a("label",{attrs:{for:"textarea-large"}},[t._v(" 檔案: "),a("br"),t._v("(小於1000MB) ")])]),a("b-col",{attrs:{sm:"10"}},[a("b-form-file",{ref:"file",staticClass:"mb-2",attrs:{multiple:"",type:"file","file-name-formatter":t.formatNames,accept:"image/*, .pdf, .zip, audio/*"},on:{change:t.fileChange},model:{value:t.form.files,callback:function(e){t.$set(t.form,"files",e)},expression:"form.files"}})],1)],1),a("b-row",[a("b-col",{staticClass:"pb-2",attrs:{lg:"12"}},[a("div",{staticClass:"text-center"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return e.preventDefault(),t.addAction()}}},[t._v("上傳")])],1),a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){e.preventDefault(),t.addModalShow=!1}}},[t._v("Close")])],1)])],1)]},proxy:!0},{key:"modal-footer",fn:function(){},proxy:!0}]),model:{value:t.addModalShow,callback:function(e){t.addModalShow=e},expression:"addModalShow"}}),t.delModalShow?a("modal",{scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("確定要刪除嗎？")])])]},proxy:!0},{key:"modalfooter",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(e){return e.preventDefault(),t.toggleDelModal(!1,null)}}},[t._v("Close")]),a("b-button",{staticClass:"float-right",staticStyle:{"margin-right":"10px"},attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.preventDefault(),t.delAction()}}},[t._v("確定刪除")])],1)]},proxy:!0}],null,!1,4083089280)}):t._e()],2)},Le=[],Re=a("b311"),Ee=a.n(Re),$e={name:"FileUpDownload",data:function(){return{delModalShow:!1,addModalShow:!1,form:{filename:[],files:[]},fields:[{key:"filename",label:"檔案列表",sortable:!1}],items:[],activeItemsSeq:null,delItem:{filename:null},selected:[],show_createIdPwd:!1,createIdPwd:{Id:null,Pwd:null,FileList:[],url:"https://211.22.242.17:9999"}}},created:function(){},mounted:function(){},components:{modal:y},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult",pageAccess:"getlogin/get_pageAccess",loginData:"getlogin/get_loginData",depDetail:"getlogin/get_depDetail",pageAccessConfig:"getlogin/get_pageAccessConfig",queryResponse:"commonquery/get_queryResponse",DEFAULT_inputData:"commonquery/get_DEFAULT_inputData",DEFAULT_apiParams:"commonquery/get_DEFAULT_apiParams",getDate:"getdate/get_Date",DEFAULT_commonModalConfig:"usemodal/get_DEFAULT_commonModalConfig",tableResponse:"commontable/get_tableResponse"})),methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosAction:"commonaxios/axiosAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",togglealertModal:"alertmodal/toggle_alertModal",settimeoutalertModal:"alertmodal/settimeout_alertModal",alertProgressModal:"alertmodal/toggle_alertProgressModal",setalertMsgProgressValue:"alertmodal/set_alertMsgProgressValue",queryAgain:"commonquery/do_queryAgain",setinputData:"commonquery/set_inputData",setapiParams:"commonquery/set_apiParams",togglecommonModal:"usemodal/toggle_commonModal",setcommonModalConfig:"usemodal/set_commonModalConfig",setSystemFormCompletedData:"systemform/set_completedData",settableSlotConfig:"commontable/set_tableSlotConfig",settableDetail:"commontable/set_tableDetail",settableInWhichTab:"commontable/set_tableInWhichTab"})),{},{queryFileList:function(){var t=this;t.items=[],t.togglealertModal(!0);var e=!1,a={methods:"GET",whichFunction:"FileList"};t.axiosAction(a).then((function(){var a=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(a))return t.setTimeOutAlertMsg(a),void(e=!0);"ok"==a["Response"]?a["FileList"].map((function(e){t.items.push({filename:e})})):(t.setTimeOutAlertMsg(a["Response"]),e=!0)})).catch((function(a){t.setTimeOutAlertMsg(a),e=!0})).finally((function(){e&&t.settimeoutalertModal(),t.togglealertModal(!1)}))},toggleDelModal:function(t,e){var a=this;if(t){var o=JSON.parse(JSON.stringify(a.DEFAULT_commonModalConfig));o.hideModalHeader=!0,o.hideModalHeaderClose=!0,a.setcommonModalConfig(o),a.delItem.filename=e}else a.delItem.filename=null;a.delModalShow=t,a.togglecommonModal(t)},addAction:function(){var t=this;if(0==this.form.files.length)return t.setTimeOutAlertMsg("必須上傳檔案"),void t.settimeoutalertModal();for(var e=new FormData,a=0;a<this.form.files.length;a++){var o=this.form.files[a];if(o.size>1048576e3)return t.setTimeOutAlertMsg("檔名:"+o.name+"檔案太大"),void t.settimeoutalertModal(1200);e.append("fileToUpload["+a+"]",o)}t.form.level,e.append("filename",t.form.filename);var n={headers:{"Content-Type":"multipart/form-data"}};t.alertProgressModal(!0);var s=N.a.create({withCredentials:!0,onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.setalertMsgProgressValue(a)}});s.post("/php/views/tool/tempFileAdd.php",e,n).then(function(e){var a=e.data;t.setTimeOutAlertMsg(a);var o=0;o=1==a.length?1200:a.length<4?1500:2500,t.settimeoutalertModal(o),t.reset([])}.bind(this)).catch((function(e){t.setTimeOutAlertMsg(e),t.settimeoutalertModal()})).finally((function(){t.alertProgressModal(!1),t.queryFileList()}))},formatNames:function(t){for(var e=this,a=0;a<t.length;a++)e.addModalShow?e.form.filename.push(t[a].name):e.modModalShow&&e.modfrom.filename.push(t[a].name);return t.length>3?"".concat(t.length," files selected"):e.addModalShow?"".concat(e.form.filename):e.modModalShow?"".concat(e.modfrom.filename):void 0},fileChange:function(){var t=this;t.addModalShow?t.form.filename.length=0:t.modModalShow&&(t.modfrom.filename.length=0)},delAction:function(){var t=this;t.togglealertModal(!0);var e={methods:"NOAPI",whichFunction:"DeleteFile"};e["filename"]=t.delItem.filename,t.axiosAction(e).then((function(){var e=t.axiosResult;t.setTimeOutAlertMsg(e[0]),t.settimeoutalertModal()})).catch((function(t){})).finally((function(){t.togglealertModal(!1),t.toggleDelModal(!1,null),t.reset([]),t.queryFileList()}))},onRowSelected:function(t){this.selected=t},selectAllRows:function(){this.$refs.FileUpDownloadTable.selectAllRows()},clearSelected:function(){this.$refs.FileUpDownloadTable.clearSelected()},createDownloadFileIdPwd:function(){var t=this;t.togglealertModal(!0);var e=!1,a={},o=[];t.selected.map((function(t){o.push(t.filename)})),a["methods"]="POST",a["whichFunction"]="CreateDownloadFileIdPwd",a["data"]=o,t.axiosAction(a).then((function(){var a=t.axiosResult;if("[object Object]"!=Object.prototype.toString.call(a))return t.setTimeOutAlertMsg(a),void(e=!0);"ok"==a["Response"]?(t.createIdPwd.Id=a["ID"],t.createIdPwd.Pwd=a["PWD"],t.createIdPwd.FileList=a["DownloadList"],t.show_createIdPwd=!0):(t.setTimeOutAlertMsg(a["Response"]),e=!0)})).catch((function(a){t.setTimeOutAlertMsg(a),e=!0})).finally((function(){e?t.settimeoutalertModal():setTimeout((function(){t.setcopybtn()}),0),t.togglealertModal(!1),t.reset(["createIdPwd","items","show_createIdPwd"]),t.clearSelected()}))},setcopybtn:function(){var t=document.getElementsByClassName("copyitem");if(null!==t)for(var e=0;e<t.length;e++){var a=document.createElement("div"),o=document.createTextNode("copy");a.className="copy",a.appendChild(o),t[e].parentElement.classList.add("copyitem_parent"),t[e].parentElement.appendChild(a)}var n=new Ee.a(".copy",{target:function(t){return t.previousElementSibling}});n.on("success",(function(t){t.trigger.textContent="copied!",setTimeout((function(){t.clearSelection(),t.trigger.textContent="copy"}),2e3)}))},reset:function(t){for(var e=this.$options.data(),a=0;a<t.length;a++)e[t[a]]=this[t[a]];Object.assign(this.$data,e)}})},Ne=$e,Ue=(a("c9ad"),Object(b["a"])(Ne,je,Le,!1,null,"07c07835",null)),ze=Ue.exports,Qe=[{path:"/index",redirect:"/index/bulletin/board",component:C,children:[{path:"home",component:L,meta:{needLogin:!0}},{path:"bulletin/board",component:K,meta:{needLogin:!0}},{path:"bulletin/manage",component:it,meta:{needLogin:!0}},{path:"management/department",component:Tt,meta:{needLogin:!0}},{path:"management/account",component:Ft,meta:{needLogin:!0}},{path:"report/todolist",component:Yt,meta:{needLogin:!0}},{path:"report/weeklyreport",component:oe,meta:{needLogin:!0}},{path:"report/meetingminutes",component:ce,meta:{needLogin:!0}},{path:"report/sop",component:he,meta:{needLogin:!0}},{path:"architecture/structure",component:Se,meta:{needLogin:!0}},{path:"architecture/server",component:Oe,meta:{needLogin:!0}},{path:"architecture/storage",component:Pe,meta:{needLogin:!0}},{path:"tool/fileupdownload",component:ze,meta:{needLogin:!0}}]}],Be={name:"App",computed:Object(l["a"])({},Object(c["c"])({loginData:"getlogin/get_loginData",DEFAULT_pageAccess:"getlogin/get_DEFAULT_pageAccess"})),methods:Object(l["a"])({},Object(c["b"])({change_loginData:"getlogin/change_loginData",change_pageAccess:"getlogin/change_pageAccess"})),created:function(){var t=this;if("/login"!=t.$router.currentRoute.path)if(null!=sessionStorage.getItem("loginStatus")&&"undefined"!=sessionStorage.getItem("loginStatus")){var e={};e.account=sessionStorage.getItem("loginAccount"),e.status=Boolean(sessionStorage.getItem("loginStatus")),e.username=sessionStorage.getItem("loginUsername"),e.accesslist=JSON.parse(sessionStorage.getItem("loginAccessList"));var a=JSON.parse(sessionStorage.getItem("loginAccessList"));t.change_loginData(e);var o=[];Object.entries(a).forEach((function(t){t[1]["authority"]&&(t[1].hasOwnProperty("children")?Object.keys(t[1].children).map((function(e){t[1].children[e].authority&&o.push(t[0]+"/"+e)})):o.push(t[0]))})),o.push("home"),Qe[0].children=Qe[0].children.filter((function(t){return o.includes(t.path)})),t.change_pageAccess(a),t.$router.addRoutes(Qe),sessionStorage.removeItem("loginStatus"),sessionStorage.removeItem("loginUsername"),sessionStorage.removeItem("loginAccount"),sessionStorage.removeItem("loginAccessList")}else t.$router.push("/login");window.addEventListener("beforeunload",(function(){if(!0===t.loginData.status)sessionStorage.setItem("loginStatus",Boolean(t.loginData.status)),sessionStorage.setItem("loginUsername",t.loginData.username),sessionStorage.setItem("loginAccount",t.loginData.account),sessionStorage.setItem("loginAccessList",JSON.stringify(t.loginData.accesslist));else{var e={account:null,status:!1,username:null,accesslist:null},a=Object.assign({},t.DEFAULT_pageAccess);t.change_pageAccess(a),t.change_loginData(e),t.$router.push("/login")}}))}},Je=Be,Ve=(a("5c0b"),Object(b["a"])(Je,i,r,!1,null,null,null)),He=Ve.exports,We=a("8c4f"),Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("form",{staticClass:"form-signin"},[t._m(0),a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"inputdiv"},[a("label",[t._v("帳號:")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.uID,expression:"user.uID"}],staticClass:"form-control",attrs:{type:"text",id:"account",required:"",autofocus:""},domProps:{value:t.user.uID},on:{input:function(e){e.target.composing||t.$set(t.user,"uID",e.target.value)}}})])]),a("div",{staticClass:"inputdiv"},[a("label",[t._v("密碼:")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.pwd,expression:"user.pwd"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:t.user.pwd},on:{input:function(e){e.target.composing||t.$set(t.user,"pwd",e.target.value)}}})])])]),a("div",[a("button",{staticClass:"btn btn-lg btn-secondary btn-block loginbtn",attrs:{id:"login"},on:{click:function(e){return e.preventDefault(),t.checkUser(e)}}},[t._v(" 登入 ")])])]),a("alertModal")],1)},Ye=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"text-center"},[o("img",{staticClass:"yishanimg",attrs:{src:a("9696"),alt:"yishan"}})])}],Ke={name:"login",data:function(){return{user:{uID:"",pwd:""}}},components:{alertModal:T},computed:Object(l["a"])({},Object(c["c"])({axiosResult:"commonaxios/get_axiosResult"})),methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({axiosGetAction:"commonaxios/axiosGetAction",setTimeOutAlertMsg:"alertmodal/set_setTimeOutAlertMsg",settimeoutalertModal:"alertmodal/settimeout_alertModal",togglealertModal:"alertmodal/toggle_alertModal",change_loginData:"getlogin/change_loginData",change_pageAccess:"getlogin/change_pageAccess",changeloginCusID:"getlogin/change_loginCusID"})),{},{checkUser:function(t){var e=this;if(""===e.user.uID)return e.setTimeOutAlertMsg("帳號尚未輸入"),void e.settimeoutalertModal();var a={url:"api/YS/1.0/my/CommonUse/Interval/user"};a["urlparams"]={attr:"uID",valueStart:e.user.uID,valueEnd:e.user.uID};var o=!1;e.togglealertModal(!0),e.axiosGetAction(a).then((function(){e.togglealertModal(!1);var t=e.axiosResult;if(200!=t.status)return o=!0,void e.setTimeOutAlertMsg(t.data);if("ok"===t.data["Response"]){if(0==t.data["QueryTableData"].length)return o=!0,void e.setTimeOutAlertMsg("無此帳號");if(t.data["QueryTableData"][0].pwd!=e.user.pwd)return o=!0,void e.setTimeOutAlertMsg("帳號或密碼錯誤");e.setTimeOutAlertMsg("登入成功");var a={};a.account=e.user.uID,a.status=!0,a.username=t.data["QueryTableData"][0].uName,a.accesslist=JSON.parse(t.data["QueryTableData"][0].accessList);var n=JSON.parse(t.data["QueryTableData"][0].accessList),s=[];Object.entries(n).forEach((function(t){t[1]["authority"]&&(t[1].hasOwnProperty("children")?Object.keys(t[1].children).map((function(e){t[1].children[e].authority&&s.push(t[0]+"/"+e)})):s.push(t[0]))})),s.push("home"),Qe[0].children=Qe[0].children.filter((function(t){return s.includes(t.path)})),e.change_loginData(a),e.change_pageAccess(a.accesslist),e.$router.addRoutes(Qe),e.change_loginData(a),setTimeout((function(){e.$router.push("/index")}),500)}else o=!0,e.setTimeOutAlertMsg(t.data["Response"])})).catch((function(t){o=!0,e.setTimeOutAlertMsg(t)})).finally((function(){o&&e.settimeoutalertModal()}))}})},Xe=Ke,Ze=(a("7b95"),Object(b["a"])(Xe,Ge,Ye,!1,null,"167538ca",null)),ta=Ze.exports;s["default"].use(We["a"]);var ea=[{path:"/",redirect:"/login"},{path:"/login",component:ta}],aa=new We["a"]({routes:ea}),oa=aa,na={loginAccount:null,loginUsername:null,loginStatus:!1,loginAccessList:null,depDetail:{selectOptions:[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}],config:{1001:"資訊通訊部",1002:"系統研發部",1003:"平台部"}},pageAccess:{bulletin:{authority:!1,children:{board:{authority:!1},manage:{authority:!1}}},management:{authority:!1,children:{department:{authority:!1},account:{authority:!1}}},architecture:{authority:!1,children:{structure:{authority:!1},server:{authority:!1},storage:{authority:!1}}},report:{authority:!1,children:{todolist:{authority:!1,remark:{commonQueryCondition:{main:null}}},weeklyreport:{authority:!1,remark:{commonQueryCondition:{main:null}}},meetingminutes:{authority:!1,remark:{commonQueryCondition:{main:[],secondary:null},dataHandleAuthority:[]}},sop:{authority:!1,remark:{commonQueryCondition:{main:null,secondary:null},dataHandleAuthority:[]}}}},tool:{authority:!1,children:{fileupdownload:{authority:!1}}}},DEFAULT_pageAccess:{bulletin:{authority:!1,children:{board:{authority:!1},manage:{authority:!1}}},management:{authority:!1,children:{department:{authority:!1},account:{authority:!1}}},architecture:{authority:!1,children:{structure:{authority:!1},server:{authority:!1},storage:{authority:!1}}},report:{authority:!1,children:{todolist:{authority:!1,remark:{commonQueryCondition:{main:null}}},weeklyreport:{authority:!1,remark:{commonQueryCondition:{main:null}}},meetingminutes:{authority:!1,remark:{commonQueryCondition:{main:[],secondary:null},dataHandleAuthority:[]}},sop:{authority:!1,remark:{commonQueryCondition:{main:null,secondary:null},dataHandleAuthority:[]}}}},tool:{authority:!1,children:{fileupdownload:{authority:!1}}}},pageAccessConfig:{bulletin:{label:"系統公告",children:{board:{label:"公告區"},manage:{label:"公告管理"}}},management:{label:"系統管理",children:{department:{label:"部門"},account:{label:"帳號"}}},architecture:{label:"系統架構",children:{structure:{label:"架構圖"},server:{label:"伺服器狀態"},storage:{label:"儲存設備狀態"}}},report:{label:"報告",children:{todolist:{label:"待辦事項",remark:{commonQueryCondition:{main:{options:[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}],multiple:!1,placeholder:"選擇查詢部門條件"}}}},weeklyreport:{label:"週報表",remark:{commonQueryCondition:{main:{options:[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}],multiple:!1,placeholder:"選擇查詢部門條件"}}}},meetingminutes:{label:"會議記錄",remark:{commonQueryCondition:{main:{options:[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"共用",value:"common"}],multiple:!0,placeholder:"選擇查詢條件"},secondary:{options:[{text:"員工",value:"employee"},{text:"主管",value:"supervisor"}],multiple:!1,placeholder:"選擇職位階級"}},dataHandleAuthority:{options:[{text:"查詢",value:"query"},{text:"修改",value:"modify"},{text:"刪除",value:"delete"},{text:"新增",value:"add"}],multiple:!0,placeholder:"選擇可執行權限"}}},sop:{label:"SOP文件",remark:{commonQueryCondition:{main:{options:[{text:"平台部",value:"1003"},{text:"系統研發部",value:"1002"},{text:"資訊通訊部",value:"1001"},{text:"全選",value:"ALL"}],multiple:!1,placeholder:"選擇查詢部門條件"},secondary:{options:[{text:"員工",value:"employee"},{text:"主管",value:"supervisor"}],multiple:!1,placeholder:"選擇職位階級"}},dataHandleAuthority:{options:[{text:"查詢",value:"query"},{text:"修改",value:"modify"},{text:"刪除",value:"delete"},{text:"新增",value:"add"}],multiple:!0,placeholder:"選擇可執行權限"}}}}},tool:{label:"工具",children:{fileupdownload:{label:"暫時檔案上傳下載"}}}}},sa={get_loginData:function(t){var e={};return e.account=t.loginAccount,e.username=t.loginUsername,e.status=t.loginStatus,e.accesslist=t.loginAccessList,e},get_pageAccess:function(t){return t.pageAccess},get_DEFAULT_pageAccess:function(t){return t.DEFAULT_pageAccess},get_pageAccessConfig:function(t){return t.pageAccessConfig},get_depDetail:function(t){return t.depDetail}},ia={change_loginData:function(t,e){t.commit("CHANGE_LOGINDATA",e)},change_pageAccess:function(t,e){t.commit("CHANGE_PAGEACCESS",e)}},ra={CHANGE_LOGINDATA:function(t,e){t.loginAccount=e.account,t.loginStatus=e.status,t.loginUsername=e.username,t.loginAccessList=e.accesslist},CHANGE_PAGEACCESS:function(t,e){t.pageAccess=e}},la={namespaced:!0,state:na,getters:sa,actions:ia,mutations:ra},ca={partitionStatus:{status:!1}},ma={get_getpartitionStatus:function(t){return t.partitionStatus.status}},da={change_setPartitionStatus:function(t,e){t.commit("CHANGE_SETPARTITIONSTATUS",e)}},ua={CHANGE_SETPARTITIONSTATUS:function(t,e){t.partitionStatus.status=e}},pa={namespaced:!0,state:ca,getters:ma,actions:da,mutations:ua},fa={commonmodalShow:!1,commonModalConfig:{hideModalFooter:!1,hideModalHeader:!1,hideModalHeaderClose:!1,centered:!0,scrollable:!0,modalClassFull:!1,size:"md"},DEFAULT_commonModalConfig:{hideModalFooter:!1,hideModalHeader:!1,hideModalHeaderClose:!1,centered:!0,scrollable:!0,modalClassFull:!1,size:"md"}},ha={get_commonModalShow:function(t){return t.commonmodalShow},get_commonModalConfig:function(t){return t.commonModalConfig},get_DEFAULT_commonModalConfig:function(t){return t.DEFAULT_commonModalConfig}},ga={toggle_commonModal:function(t,e){t.commit("TOGGLE_COMMONMODAL",e)},set_commonModalConfig:function(t,e){t.commit("SET_COMMONMODALCONFIG",e)}},ba={TOGGLE_COMMONMODAL:function(t,e){t.commonmodalShow=!!e},SET_COMMONMODALCONFIG:function(t,e){t.commonModalConfig=e}},va={namespaced:!0,state:fa,getters:ha,actions:ga,mutations:ba},ya={alertModalShow:!1,setTimeOutAlertModalShow:!1,alertModalShowTime:900,alertMsg:"請稍候....",setTimeOutAlertMsg:"",alertProgressValue:0,alertProgressModalShow:!1},Da={get_alertModalShow:function(t){return t.alertModalShow},get_setTimeOutalertModalShow:function(t){return t.setTimeOutAlertModalShow},get_alertMsg:function(t){return t.alertMsg},get_setTimeOutAlertMsg:function(t){return t.setTimeOutAlertMsg},get_alertProgressValue:function(t){return t.alertProgressValue},get_alertMsgProgressShow:function(t){return t.alertProgressModalShow}},Sa={toggle_alertModal:function(t,e){t.commit("TOGGLE_ALERTMODAL",e)},settimeout_alertModal:function(t,e){"undefined"===typeof e&&(e=ya.alertModalShowTime),t.commit("SETTIMEOUT_ALERTMODAL",e)},set_alertMsg:function(t,e){t.commit("SET_ALERTMSG",e)},set_setTimeOutAlertMsg:function(t,e){t.commit("SET_SETTIMEOUTALERTMSG",e)},set_alertMsgProgressValue:function(t,e){t.commit("SET_ALERTMSGPROGRESSVALUE",e)},toggle_alertProgressModal:function(t,e){t.commit("TOGGLE_ALERTPROGRESSMODAL",e)}},ka={TOGGLE_ALERTMODAL:function(t,e){t.alertModalShow=!!e},SETTIMEOUT_ALERTMODAL:function(t,e){t.setTimeOutAlertModalShow=!0,this.timer=setTimeout((function(){t.setTimeOutAlertModalShow=!1}),e)},SET_ALERTMSG:function(t,e){t.alertMsg=e},SET_SETTIMEOUTALERTMSG:function(t,e){t.setTimeOutAlertMsg=e},SET_ALERTMSGPROGRESSVALUE:function(t,e){t.alertProgressValue=e},TOGGLE_ALERTPROGRESSMODAL:function(t,e){e?(t.alertProgressModalShow=!0,t.alertModalShow=!0):(t.alertModalShow=!1,t.alertProgressModalShow=!1,t.alertProgressValue=0)}},xa={namespaced:!0,state:ya,getters:Da,actions:Sa,mutations:ka},_a=(a("24f8"),N.a.create({baseURL:"https://yishan-paas.herokuapp.com/"})),Ma={uid:"@YS@PaaS"},Ta={params:{}};function Oa(t,e){if(_.isArray(t))return t.concat(e)}Ta.params["httpsAgent"]=new a("24f8").Agent({rejectUnauthorized:!1});var wa={axiosResult:null},Aa={get_axiosResult:function(t){return t.axiosResult}},Ca={axiosAction:function(t,e){var a=this;return Object(jt["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,N.a.post("/php/modules.php",e).then(function(e){var a=e.data;t.commit("AXIOSACTION",a)}.bind(a)).catch((function(t){}));case 2:case"end":return o.stop()}}),o)})))()},axiosGetAction:function(t,e){var a=this;return Object(jt["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=Object(ut["cloneDeep"])(Ta),e.hasOwnProperty("urlparams")&&Object(ut["mergeWith"])(n.params,e.urlparams,Oa),Object(ut["mergeWith"])(n.params,Ma,Oa),o.next=5,_a.get(e.url,n).then(function(e){var a={status:e.status,data:e.data};t.commit("AXIOSACTION",a)}.bind(a)).catch((function(t){404===t.response.status&&(wa.axiosResult={status:t.response.status,data:t.response.statusText})}));case 5:case"end":return o.stop()}}),o)})))()},axiosPostAction:function(t,e){var a=this;return Object(jt["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=Object(ut["cloneDeep"])(Ta),e.hasOwnProperty("urlparams")&&Object(ut["mergeWith"])(n.params,e.urlparams,Oa),Object(ut["mergeWith"])(n.params,Ma,Oa),o.next=5,_a.post(e.url,e.postdata,n).then(function(e){var a={status:e.status,data:e.data};t.commit("AXIOSACTION",a)}.bind(a)).catch((function(t){404===t.response.status&&(wa.axiosResult={status:t.response.status,data:t.response.statusText})}));case 5:case"end":return o.stop()}}),o)})))()},axiosPatchAction:function(t,e){var a=this;return Object(jt["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=Object(ut["cloneDeep"])(Ta),e.hasOwnProperty("urlparams")&&Object(ut["mergeWith"])(n.params,e.urlparams,Oa),Object(ut["mergeWith"])(n.params,Ma,Oa),o.next=5,_a.patch(e.url,e.postdata,n).then(function(e){var a={status:e.status,data:e.data};t.commit("AXIOSACTION",a)}.bind(a)).catch((function(t){404===t.response.status&&(wa.axiosResult={status:t.response.status,data:t.response.statusText})}));case 5:case"end":return o.stop()}}),o)})))()},axiosDeleteAction:function(t,e){var a=this;return Object(jt["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=Object(ut["cloneDeep"])(Ta),e.hasOwnProperty("urlparams")&&Object(ut["mergeWith"])(n.params,e.urlparams,Oa),Object(ut["mergeWith"])(n.params,Ma,Oa),n["data"]=e.postdata,o.next=6,_a.delete(e.url,n).then(function(e){var a={status:e.status,data:e.data};t.commit("AXIOSACTION",a)}.bind(a)).catch((function(t){404===t.response.status&&(wa.axiosResult={status:t.response.status,data:t.response.statusText})}));case 6:case"end":return o.stop()}}),o)})))()}},Ia={AXIOSACTION:function(t,e){t.axiosResult=e}},Fa={namespaced:!0,state:wa,getters:Aa,actions:Ca,mutations:Ia},qa={queryResponse:null,thisQueryTimeInterval:null,tableBusy:!1,queryAgain:!1,inputData:{label:"條件",options:[],selected:"",conversiontable:{},usetime:!0,childcondition:"input",secondcondition:[!1],second_selected:""},DEFAULT_inputData:{label:"條件",options:[],selected:"",conversiontable:{},usetime:!0,childcondition:"input",secondcondition:[!1],second_selected:""},apiParams:{type:"normal",normal:{table:"",attr:"",timeattr:"lastUpdateTime",intervaltime:{}},join:{},customized:{}},DEFAULT_apiParams:{type:"normal",normal:{table:"",attr:"",timeattr:"lastUpdateTime",intervaltime:{}},join:{},customized:{}},isInit:!0,conditionOptions:[]},Pa={get_queryResponse:function(t){return t.queryResponse},get_thisQueryTimeInterval:function(t){return t.thisQueryTimeInterval},get_tableBusy:function(t){return t.tableBusy},receive_queryAgain:function(t){return t.queryAgain},get_inputData:function(t){return t.inputData},get_DEFAULT_inputData:function(t){return t.DEFAULT_inputData},get_apiParams:function(t){return t.apiParams},get_DEFAULT_apiParams:function(t){return t.DEFAULT_apiParams},get_isInit:function(t){return t.isInit},get_conditionOptions:function(t){return t.conditionOptions}},ja={set_queryResponse:function(t,e){t.commit("SET_QUERYRESPONSE",e)},set_thisQueryTimeInterval:function(t,e){t.commit("SET_THISQUERYTIMEINTERVAL",e)},change_tableBusy:function(t){t.commit("CHANGE_TABLEBUSY")},do_queryAgain:function(t){t.commit("DO_QUERYAGAIN")},set_inputData:function(t,e){t.commit("SET_INPUTDATA",e)},set_apiParams:function(t,e){t.commit("SET_APIPARAMS",e)},set_isInit:function(t,e){t.commit("SET_ISINIT",e)},set_conditionOptions:function(t,e){t.commit("SET_CONDITIONOPTIONS",e)}},La={SET_QUERYRESPONSE:function(t,e){t.queryResponse=e},SET_THISQUERYTIMEINTERVAL:function(t,e){t.thisQueryTimeInterval=e},CHANGE_TABLEBUSY:function(t){t.tableBusy=!t.tableBusy},DO_QUERYAGAIN:function(t){t.queryAgain=!t.queryAgain},SET_INPUTDATA:function(t,e){t.inputData=e},SET_APIPARAMS:function(t,e){t.apiParams=e},SET_ISINIT:function(t,e){t.isInit=e},SET_CONDITIONOPTIONS:function(t,e){t.conditionOptions=e}},Ra={namespaced:!0,state:qa,getters:Pa,actions:ja,mutations:La},Ea={vforData:{},selectOptions:[],completedData:{},systemFormResponse:!1},$a={get_vforData:function(t){return t.vforData},get_selectOptions:function(t){return t.selectOptions},get_completedData:function(t){return t.completedData},get_systemFormResponse:function(t){return t.systemFormResponse}},Na={set_vforData:function(t,e){t.commit("SET_VFORDATA",e)},set_selectOptions:function(t,e){t.commit("SET_SELECTOPTIONS",e)},set_completedData:function(t,e){t.commit("SET_COMPLETEDDATA",e)},set_systemFormResponse:function(t){t.commit("SET_SYSTEMFORMRESPONSE")}},Ua={SET_VFORDATA:function(t,e){t.vforData=e},SET_SELECTOPTIONS:function(t,e){t.selectOptions=e},SET_COMPLETEDDATA:function(t,e){t.completedData=e},SET_SYSTEMFORMRESPONSE:function(t){t.systemFormResponse=!t.systemFormResponse}},za={namespaced:!0,state:Ea,getters:$a,actions:Na,mutations:Ua},Qa={autoTable:{theme:"grid",body:null,columns:[],columnStyles:{},headStyles:{},exportfilename:"",exportfiletype:"PDF",text:[]},ttfStatus:!0,errorFormat:[],autoTableStatus:!1},Ba={get_autoTable:function(t){return t.autoTable},get_ttfStatus:function(t){return t.ttfStatus},get_errorFormat:function(t){return t.errorFormat},get_autoTableStatus:function(t){return t.autoTableStatus}},Ja={set_autoTable:function(t,e){t.commit("SET_AUTOTABLE",e)},set_ttfStatus:function(t,e){t.commit("SET_TTFSTATUS",e)},set_errorFormat:function(t,e){t.commit("SET_ERRORFORMAT",e)},set_autoTableStatus:function(t,e){t.commit("SET_AUTOTABLESTATUS",e)}},Va={SET_AUTOTABLE:function(t,e){t.autoTable=Object.assign({},t.autoTable,e)},SET_TTFSTATUS:function(t,e){t.ttfStatus=!!e},SET_ERRORFORMAT:function(t,e){t.errorFormat=e},SET_AUTOTABLESTATUS:function(t,e){t.autoTableStatus=!!e}},Ha={namespaced:!0,state:Qa,getters:Ba,actions:Ja,mutations:Va},Wa={now:"",nowFormat:"",thisweekday:[]},Ga={get_Date:function(t){var e={};return e.now=t.now,e.nowFormat=t.nowFormat,e.thisweekday=t.thisweekday,e}},Ya={set_Date:function(t,e){t.commit("SET_DATE",e)}},Ka={SET_DATE:function(t,e){t.now=e.now,t.nowFormat=e.nowFormat,t.thisweekday=e.thisweekday}},Xa={namespaced:!0,state:Wa,getters:Ga,actions:Ya,mutations:Ka},Za={config:{asc:{greater:1,less:-1},desc:{greater:-1,less:1}}},to={},eo={set_thisSortData:function(t,e){t.commit("SET_THISSORTDATA",e)}},ao={SET_THISSORTDATA:function(t,e){e.data=e.data.sort(oo(e.sortKey))}};function oo(t){return function(e,a){var o=0;while(o<t.length){if(o==t.length)return-1;if(e[t[o][0]]>a[t[o][0]])return Za.config[t[o][1]]["greater"];if(e[t[o][0]]<a[t[o][0]])return Za.config[t[o][1]]["less"];o++}}}var no={namespaced:!0,state:Za,getters:to,actions:eo,mutations:ao},so={data:null},io={get_contentData:function(t){return t.data}},ro={adjust_ContentData:function(t,e){t.commit("ADJUST_CONTENTDATA",e)}},lo={ADJUST_CONTENTDATA:function(t,e){t.data=co(e.content,e.status)}};function co(t,e){return e?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"):t.replace(/<br\s*[\/]?>/g,"\n").replace(/&nbsp;/g," ")}var mo={namespaced:!0,state:so,getters:io,actions:ro,mutations:lo},uo={tableDetail:{items:[],fields:[],which:null,children:{}},tableSlotConfig:{slotConfig:{},actionConfig:{}},tableResponse:null,tableInWhichTab:{index:0,which:null},activeItemsSeq:null},po={get_tableDetail:function(t){return t.tableDetail},get_tableSlotConfig:function(t){return t.tableSlotConfig},get_tableResponse:function(t){return t.tableResponse},get_tableInWhichTab:function(t){return t.tableInWhichTab},get_activeItemsSeq:function(t){return t.activeItemsSeq}},fo={set_tableDetail:function(t,e){t.commit("SET_TABLEDETAIL",e)},set_tableSlotConfig:function(t,e){t.commit("SET_TABLESLOTCONFIG",e)},set_tableResponse:function(t,e){t.commit("SET_TABLERESPONSE",e)},set_tableInWhichTab:function(t,e){t.commit("SET_TABLEINWHICHTAB",e)},set_activeItemsSeq:function(t,e){t.commit("SET_ACTIVEITEMSEQ",e)}},ho={SET_TABLEDETAIL:function(t,e){t.tableDetail=e},SET_TABLESLOTCONFIG:function(t,e){t.tableSlotConfig=e},SET_TABLERESPONSE:function(t,e){t.tableResponse=e},SET_TABLEINWHICHTAB:function(t,e){t.tableInWhichTab=e},SET_ACTIVEITEMSEQ:function(t,e){t.activeItemsSeq=e}},go={namespaced:!0,state:uo,getters:po,actions:fo,mutations:ho},bo={getlogin:la,home:pa,usemodal:va,alertmodal:xa,commonaxios:Fa,commonquery:Ra,systemform:za,exportfile:Ha,getdate:Xa,sort:no,adjustdata:mo,commontable:go};s["default"].use(c["a"]);var vo=new c["a"].Store({modules:bo}),yo=a("a7fe"),Do=a.n(yo),So=a("5f5b"),ko=a("b1e0"),xo=a("4a7a"),_o=a.n(xo),Mo=(a("6dfc"),a("ecee")),To=a("c074"),Oo=a("ad3d");s["default"].component("v-select",_o.a),s["default"].config.productionTip=!1,Mo["c"].add(To["a"]),s["default"].component("font-awesome-icon",Oo["a"]),s["default"].use(Do.a,N.a),s["default"].use(So["a"]),s["default"].use(ko["a"]),new s["default"]({router:oa,store:vo,render:function(t){return t(He)}}).$mount("#app"),oa.beforeEach((function(t,e,a){if(0===t.matched.length&&(oa.app.$options.store.dispatch("alertmodal/set_setTimeOutAlertMsg","請先登入"),oa.app.$options.store.dispatch("alertmodal/settimeout_alertModal"),a("/login")),t.meta.needLogin){var o=oa.app.$options.store.getters["getlogin/get_loginData"];if(o.status)oa.app.$options.store.dispatch("commonquery/set_isInit",!0),oa.app.$options.store.dispatch("exportfile/set_ttfStatus",!0),a();else{oa.app.$options.store.dispatch("alertmodal/set_setTimeOutAlertMsg","請先登入"),oa.app.$options.store.dispatch("alertmodal/settimeout_alertModal");var n={account:null,status:!1,username:null,accesslist:null};oa.app.$options.store.dispatch("getlogin/change_loginData",n),a("/login")}}else a()}))},"58ec":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var o=a("9c0c"),n=a.n(o);n.a},"5cf3":function(t,e,a){},6106:function(t,e,a){},6770:function(t,e,a){"use strict";var o=a("cdda"),n=a.n(o);n.a},"67fe":function(t,e,a){},"7ae9":function(t,e,a){"use strict";var o=a("fbec"),n=a.n(o);n.a},"7b95":function(t,e,a){"use strict";var o=a("de05"),n=a.n(o);n.a},"90d4":function(t,e,a){},"94af":function(t,e,a){"use strict";var o=a("90d4"),n=a.n(o);n.a},"960f":function(t,e,a){"use strict";var o=a("4fce"),n=a.n(o);n.a},9696:function(t,e,a){t.exports=a.p+"img/yishan_logo1.d6624bdb.png"},"96a6":function(t,e,a){},"9c0c":function(t,e,a){},a340:function(t,e,a){"use strict";var o=a("32a3"),n=a.n(o);n.a},a9b8:function(t,e,a){"use strict";var o=a("db79"),n=a.n(o);n.a},a9f8:function(t,e,a){"use strict";var o=a("67fe"),n=a.n(o);n.a},ab9b:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id="ab9b"},b042:function(t,e,a){"use strict";var o=a("58ec"),n=a.n(o);n.a},b265:function(t,e,a){"use strict";var o=a("c5b6"),n=a.n(o);n.a},bfa0:function(t,e,a){t.exports=a.p+"img/todolist.3051e8d5.png"},c5b6:function(t,e,a){},c6c3:function(t,e,a){"use strict";var o=a("4c71"),n=a.n(o);n.a},c953:function(t,e,a){"use strict";var o=a("192a"),n=a.n(o);n.a},c9ad:function(t,e,a){"use strict";var o=a("96a6"),n=a.n(o);n.a},ccb2:function(t,e,a){"use strict";var o=a("6106"),n=a.n(o);n.a},cdda:function(t,e,a){},d149:function(t,e,a){"use strict";var o=a("0de6"),n=a.n(o);n.a},db79:function(t,e,a){},de05:function(t,e,a){},ee89:function(t,e,a){"use strict";var o=a("fb4c"),n=a.n(o);n.a},f4eb:function(t,e,a){},fb4c:function(t,e,a){},fbec:function(t,e,a){}});